(this["webpackJsonpsafe-streets"]=this["webpackJsonpsafe-streets"]||[]).push([[0],{524:function(e,t,a){},525:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(35),i=a.n(c),s=(a(342),a(343),a(9)),o=a(11),l=a.n(o),u=a(93),d=a(21),b=a(56),j=(a(345),a(346),function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,w.doc("users/".concat(t)).get();case 5:return a=e.sent,e.abrupt("return",Object(u.a)({uid:t},a.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()),h=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.createUserWithEmailAndPassword(t,a);case 3:return r=e.sent,n=r.user,console.log("User created with email: "+n.email+"\nUID: "+n.uid),m(n),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=w.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=16;break}return n=t.email,e.prev=8,e.next=11,r.set(Object(u.a)({email:n,favourites:[]},a));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Firebase error: ",e.t0.message);case 16:return e.abrupt("return",j(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(l.a.mark((function e(t,a,r,n,c,i){var s,o,u,d,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.a.auth().currentUser,o={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},u=(new Date).toLocaleDateString([],o),d={title:t,allCrimes:a,locationName:r,lat:n,lon:c,timestamp:u,filters:i},h=w.doc("users/".concat(s.uid)),e.next=7,h.get();case 7:if(!e.sent.exists){e.next=17;break}return e.prev=9,e.next=12,h.update({favourites:b.a.firestore.FieldValue.arrayUnion(Object.assign({},d))});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("Error adding favourite",e.t0);case 17:return e.abrupt("return",j(s.uid));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a,r,n,c,i){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.auth().currentUser,a=w.doc("users/".concat(t.uid)),e.next=4,a.get();case 4:if(!(r=e.sent).exists){e.next=14;break}return e.prev=6,n=r.data().favourites,e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(6),console.error("Error retriving favourites",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.auth().currentUser,r=w.doc("users/".concat(a.uid)),e.next=4,r.get();case 4:if(!(n=e.sent).exists){e.next=14;break}return e.prev=6,e.next=9,r.update({favourites:n.data().favourites.filter((function(e){return e.timestamp!==t}))});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error deleting favourite",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.auth().currentUser,r=w.doc("users/".concat(a.uid)),e.next=4,r.get();case 4:if(!(n=e.sent).exists){e.next=14;break}return e.prev=6,c=n.data().favourites.find((function(e){return e.timestamp===t})),e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(6),console.error("Error retriving favourite",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.auth().currentUser,r=b.a.auth.EmailAuthProvider.credential(a.email,t),e.next=4,a.reauthenticateWithCredential(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.auth().currentUser,a=w.doc("users/".concat(t.uid)),e.next=4,a.delete();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.auth().currentUser,e.next=3,t.delete();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b.a.apps.length?b.a.app():b.a.initializeApp({apiKey:"AIzaSyBT4RoXDLZ505dMhCPkEuYPEeL1EUF_Wh0",authDomain:"safe-streets-app.firebaseapp.com",projectId:"safe-streets-app",storageBucket:"safe-streets-app.appspot.com",messagingSenderId:"400130243033",appId:"1:400130243033:web:3439d32591167991e041c8"});var k=b.a.auth(),w=b.a.firestore(),N=a(32),C=a(19),A=a(3),S=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)(null),d=Object(s.a)(u,2),b=d[0],j=d[1],h=function(e){var t=e.currentTarget,a=t.name,r=t.value;"email"===a?n(r):"password"===a&&l(r)};return Object(A.jsx)(C.g,{className:"login-container",children:Object(A.jsx)(C.n,{children:Object(A.jsx)(C.f,{md:"7",children:Object(A.jsx)(C.c,{children:Object(A.jsxs)(C.d,{children:[Object(A.jsx)(C.e,{className:"form-header bg-primary rounded",children:Object(A.jsxs)("h1",{className:"my-3",children:[Object(A.jsx)(C.h,{className:"login-icon-lock",icon:"lock",size:"lg"}),"Login"]})}),Object(A.jsxs)("form",{className:"login-sign-header",children:[Object(A.jsxs)("div",{className:"grey-text login-sign-topinput",children:[Object(A.jsx)(C.j,{label:"Type your email",size:"lg",icon:"envelope",autoComplete:"email",autoFocus:!0,group:!0,type:"email",name:"email",validate:!0,error:"wrong",success:"right",required:!0,value:a,onChange:function(e){return h(e)}}),Object(A.jsx)(C.j,{label:"Type your password",size:"lg",icon:"lock",autoComplete:"current-password",required:!0,group:!0,type:"password",name:"password",validate:!0,value:o,onChange:function(e){return h(e)}})]}),Object(A.jsxs)("div",{className:"text-center mt-4",children:[null!==b&&Object(A.jsx)("div",{className:"py-4 bg-red-600 w-full text-red text-center mb-3",children:b}),Object(A.jsx)(C.b,{color:"blue",className:"btn-login mb-3",type:"submit",onClick:function(e){!function(e,t,a){e.preventDefault(),k.signInWithEmailAndPassword(t,a).catch((function(e){j(""+e)}))}(e,a,o)},children:"Login"})]})]}),Object(A.jsx)(C.k,{children:Object(A.jsxs)("div",{className:"font-weight-light main-link",children:["Don't have an account?",Object(A.jsx)(N.b,{to:"/register",strong:"true",className:"py-4 font-weight-bold ml-1 w-full text-red text-center mb-3",children:"Register"})]})})]})})})})})},D=a(43),P=function(e){var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),o=Object(s.a)(i,2),u=o[0],b=o[1],j=Object(r.useState)(null),m=Object(s.a)(j,2),f=m[0],p=m[1],x=Object(D.g)(),O=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h(n,u).then((function(e){if(!0!==e)p(e);else{x.push("/search")}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.currentTarget,a=t.name,r=t.value;"email"===a?c(r):"password"===a&&b(r)};return Object(A.jsx)(C.g,{className:"register-container",children:Object(A.jsx)(C.n,{children:Object(A.jsx)(C.f,{md:"7",children:Object(A.jsx)(C.c,{children:Object(A.jsxs)(C.d,{children:[Object(A.jsx)(C.e,{className:"form-header bg-primary rounded",children:Object(A.jsxs)("h1",{className:"my-3",children:[Object(A.jsx)(C.h,{className:"register-icon-user",icon:"user-circle",size:"lg"})," ","Sign Up"]})}),Object(A.jsxs)("form",{className:"login-sign-header",children:[Object(A.jsxs)("div",{className:"grey-text login-sign-topinput",children:[Object(A.jsx)(C.j,{label:"Type your email",size:"lg",icon:"envelope",autoComplete:"email",autoFocus:!0,group:!0,type:"email",name:"email",validate:!0,error:"wrong",success:"right",value:n,onChange:function(e){return v(e)}}),Object(A.jsx)(C.j,{label:"Type your password",size:"lg",icon:"lock",autoComplete:"new-password",group:!0,type:"password",name:"password",validate:!0,value:u,onChange:function(e){return v(e)}})]}),Object(A.jsxs)("div",{className:"text-center mt-4",children:[null!==f&&Object(A.jsx)("div",{className:"py-4 bg-red-600 w-full text-red text-center mb-3",children:f}),Object(A.jsx)(C.b,{color:"blue",className:"btn-signup mb-3",type:"submit",onClick:function(e){O(e,n,u)},children:"Sign Up"})]})]}),Object(A.jsx)(C.k,{children:Object(A.jsxs)("div",{className:"font-weight-light main-link",children:["Already have an account?",Object(A.jsx)(N.b,{to:"/",className:"py-4 font-weight-bold ml-1 w-full text-red text-center mb-3",children:"Login here"})]})})]})})})})})},F=a(298),B=a(299),z=a(300),H=a(326),M=Object(r.createContext)({user:null}),T=function(e){Object(z.a)(a,e);var t=Object(H.a)(a);function a(){var e;Object(F.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={user:null},e.componentDidMount=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.onAuthStateChanged((function(t){e.setState({user:t})}));case 2:case"end":return t.stop()}}),t)}))),e}return Object(B.a)(a,[{key:"render",value:function(){return Object(A.jsx)(M.Provider,{value:this.state.user,children:this.props.children})}}]),a}(r.Component),E=n.a.createContext(),I=n.a.createContext(),R=a(327),L=a(53),K=a.n(L),V=a(324),U=a(58),Q=a(18),G=a(23),J=a(78),q=a.n(J),Y=function(e){var t=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e.timestamp);case 2:e.updateUserFavourites(),e.onHide();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(A.jsxs)(Q.a,{animation:!1,show:e.show,onHide:e.onHide,size:"lg",centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:"Are you sure you want to delete this favourite?"})}),Object(A.jsxs)(Q.a.Footer,{children:[Object(A.jsx)(G.a,{variant:"green",onClick:e.onHide,children:"Cancel"}),Object(A.jsx)(G.a,{variant:"red",type:"submit",onClick:function(){return t()},children:"Delete Favourite"})]})]})},W=function(){var e=Object(r.useContext)(M),t=Object(r.useContext)(E),a=Object(s.a)(t,2),c=(a[0],a[1]),i=Object(r.useContext)(I),o=Object(s.a)(i,2),u=(o[0],o[1]),b=Object(r.useState)([]),j=Object(s.a)(b,2),h=j[0],m=j[1],f=Object(r.useState)(""),p=Object(s.a)(f,2),x=p[0],O=p[1],w=Object(r.useState)(""),N=Object(s.a)(w,2),C=N[0],S=N[1],P=Object(r.useState)(null),F=Object(s.a)(P,2),B=F[0],z=F[1],H=Object(r.useState)(!1),T=Object(s.a)(H,2),L=T[0],J=T[1],W=Object(r.useState)(!1),X=Object(s.a)(W,2),Z=X[0],_=X[1],$=function(){return J(!1)},ee=Object(D.g)();Object(r.useEffect)((function(){te()}),[]);var te=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,V.a.firestore().collection("users").doc(e.uid);case 3:t.sent.get().then((function(e){e.exists?m(e.data().favourites):console.log("No favourites!")})).catch((function(e){console.log("Error getting favourites:",e)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.signOut().then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(C).then((function(e){g().then((function(e){y().then((function(e){console.log("User Account successfully deleted"),alert("Your account has been sucessfully deleted.");ee.push("/register")})).catch((function(e){console.log("Error deleting user data",e)}))})).catch((function(e){z(e.message),console.log("Error deleting user document",e)}))})).catch((function(e){z(e.message),console.log("Error deleting user account",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)(n.a.Fragment,{children:e?Object(A.jsx)(q.a,{delay:250,children:Object(A.jsxs)(U.b,{className:"profile-card",children:[Object(A.jsx)(U.e,{className:"profile-heading",children:Object(A.jsx)("h1",{className:"profile-main-heading",children:"Profile"})}),Object(A.jsx)(U.c,{children:Object(A.jsx)(U.g,{children:Object(A.jsxs)("label",{className:"profile-text",children:["Email: ",e.email]})})}),Object(A.jsx)(U.e,{className:"profile-heading",children:Object(A.jsxs)("h2",{className:"profile-main-heading",children:["Favourites (",h.length,")"]})}),Object(A.jsx)(U.k,{flush:!0,children:h.map((function(e){return Object(A.jsx)("div",{className:"profile-list-favourite-item",children:Object(A.jsxs)(U.l,{className:"profile-favourites-list",children:[Object(A.jsx)(U.f,{children:Object(A.jsxs)("label",{className:"profile-text profile-favourite-entry",onClick:function(){var t;t=e,c((function(e){return{allCrimes:t.allCrimes,locationName:t.locationName,lat:t.lat,lon:t.lon,filters:t.filters}})),u(t.allCrimes),ee.push("/mapdisplay",{isfavourite:"true",timestamp:t.timestamp})},children:[e.title," timestamp:"," ",e.timestamp]})}),Object(A.jsx)("i",{className:"far fa-trash-alt fa-lg trash-profile",onClick:function(){var t;t=e.timestamp,O(t),_(!0)}})]})},K()())}))}),Object(A.jsx)(Y,{animation:!1,show:Z,onHide:function(){return _(!1)},updateUserFavourites:te,timestamp:x}),Object(A.jsxs)(U.d,{className:"profile-footer",children:[Object(A.jsx)(U.a,{color:"primary",className:"mb-3 profile-footer-button",type:"submit",onClick:ae,children:"Logout"}),Object(A.jsx)(U.a,{color:"danger",className:"mb-3 profile-footer-button",type:"submit",onClick:function(){return J(!0)},children:"Delete Account"})]}),Object(A.jsxs)(Q.a,{show:L,onHide:$,animation:!1,children:[Object(A.jsxs)(U.h,{children:[Object(A.jsx)(U.i,{className:"iconDeleteAccount",size:"md",icon:"user"}),Object(A.jsx)("label",{className:"deleteAccountEmail",children:e.email}),Object(A.jsx)(Q.a.Title,{children:Object(A.jsx)("p",{children:"To permanently delete your account, please confirm your password."})})]}),Object(A.jsxs)(Q.a.Body,{children:[Object(A.jsx)("div",{children:Object(A.jsx)(U.j,{icon:"lock",type:"password",name:"password",placeholder:"Enter your password...",autoFocus:!0,value:C,onChange:function(e){return function(e){var t=e.currentTarget.value;S(t)}(e)}})}),Object(A.jsx)("div",{className:"text-center mt-4 delete-profile-error",children:null!==B&&Object(A.jsx)("div",{className:"py-4 bg-red-600 w-full text-red text-center mb-3",children:B})})]}),Object(A.jsxs)(Q.a.Footer,{children:[Object(A.jsx)(G.a,{variant:"primary",onClick:$,children:"Cancel"}),Object(A.jsx)(G.a,{variant:"danger",onClick:re,children:"Delete My Account"})]})]})]})}):Object(A.jsx)(R.a,{noThrow:!0,to:"/"})})};function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var _=r.createElement("path",{d:"m193.789062 43.890625c7.757813-18.617187 22.816407-33.234375 41.652344-40.441406 10.695313-4.597657 22.804688-4.597657 33.5 0 18.835938 7.207031 33.894532 21.824219 41.652344 40.441406zm0 0",fill:"#d1d4d1"}),$=r.createElement("path",{d:"m484.761719 390.488281 10.414062 8.675781c3.902344 4.859376 7.289063 7.636719 7.894531 13.972657 1.476563 14.316406-9.457031 25.859375-20.046874 33.84375-10.5625 7.535156-21.910157 13.910156-33.84375 19.003906-57.109376 25.277344-118.914063 38.203125-181.367188 37.921875-2.863281 0-5.726562 0-8.59375.089844-2.339844 0-4.683594 0-7.027344-.089844h-.609375c-2.339843.089844-4.683593.089844-7.027343.089844-2.863282-.089844-5.726563-.089844-8.589844-.089844-62.453125.28125-124.261719-12.644531-181.371094-37.921875-11.96875-5.074219-23.347656-11.449219-33.929688-19.003906-10.5-7.984375-21.433593-19.527344-20.046874-33.84375 1.027343-5.417969 3.835937-10.335938 7.984374-13.972657l10.414063-8.675781zm0 0",fill:"#35495e"}),ee=r.createElement("path",{d:"m451.785156 362.976562 32.976563 27.511719s-1.214844 1.214844-3.644531 3.382813c-1.476563 1.214844-3.386719 2.863281-5.730469 4.6875-1.214844.953125-2.515625 1.996094-3.902344 3.035156-1.417969 1.238281-2.929687 2.371094-4.511719 3.386719l-2.605468 1.820312c-12.316407 8.730469-25.316407 16.449219-38.875 23.085938-38.445313 19.089843-95.632813 29.503906-171.566407 30.023437h-4.078125c-75.929687-.519531-133.121094-10.933594-171.5625-30.023437-13.5625-6.636719-26.5625-14.355469-38.878906-23.085938l-2.601562-1.820312c-1.585938-1.015625-3.09375-2.148438-4.511719-3.386719-1.390625-1.039062-2.691407-2.082031-3.90625-3.035156-2.34375-1.824219-4.253907-3.472656-5.726563-4.6875-2.429687-2.167969-3.644531-3.382813-3.644531-3.382813l33.320313-27.769531zm0 0",fill:"#2c3e50"}),te=r.createElement("path",{d:"m443.105469 308.742188c0 7.722656-.171875 15.445312-.691407 22.996093l-.4375 2.167969c-2.339843-.433594-4.769531 17.007812-7.289062 17.617188-119.832031 29.851562-245.160156 29.851562-364.992188 0-2.519531-.609376-4.949218-18.050782-7.292968-17.617188l-.433594-2.167969c-.519531-7.550781-.691406-15.273437-.691406-22.996093 0-130.429688 42.433594-234.394532 132.511718-264.851563 18.828126-6.257813 38.5625-9.367187 58.402344-9.199219 19.839844-.167968 39.574219 2.941406 58.402344 9.199219 90.078125 30.457031 132.511719 134.421875 132.511719 264.851563zm0 0",fill:"#35495e"}),ae=r.createElement("path",{d:"m454.648438 359.246094c-.117188.125-.207032.273437-.261719.433594-.714844 1.210937-1.589844 2.320312-2.601563 3.296874-1.082031 1.089844-2.308594 2.023438-3.644531 2.777344-1.5625.964844-3.257813 1.695313-5.035156 2.171875-125.371094 31.152344-256.457031 31.152344-381.828125 0-1.777344-.476562-3.472656-1.207031-5.035156-2.171875-1.460938-.785156-2.78125-1.8125-3.90625-3.035156-1.035157-1.023438-1.914063-2.191406-2.601563-3.472656-2.300781-3.835938-2.925781-8.445313-1.734375-12.757813 1.246094-4.457031 4.253906-8.214843 8.328125-10.414062 1.523437-.921875 3.199219-1.570313 4.949219-1.90625l1.125-.261719c2.421875-.429688 4.90625-.339844 7.292968.261719 119.832032 29.851562 245.160157 29.851562 364.992188 0 2.386719-.601563 4.871094-.691407 7.289062-.261719l1.128907.261719c6.367187 1.332031 11.472656 6.074219 13.277343 12.320312 1.191407 4.3125.5625 8.921875-1.734374 12.757813zm0 0",fill:"#2c2f38"}),re=r.createElement("path",{d:"m274.753906 111.925781c16.742188 7.28125 34.855469 10.863281 53.109375 10.5.953125-.089843 1.824219-.089843 2.691407-.175781 2.445312-.128906 4.832031.789062 6.554687 2.53125 1.726563 1.742188 2.625 4.136719 2.46875 6.582031 0 .867188-.085937 1.734375-.085937 2.601563-.648438 25.445312 9.503906 49.972656 27.941406 67.515625.695312.609375 1.304687 1.214843 1.910156 1.824219 1.859375 1.597656 2.929688 3.925781 2.929688 6.375 0 2.453124-1.070313 4.78125-2.929688 6.378906-.605469.609375-1.214844 1.128906-1.910156 1.738281-18.429688 17.585937-28.574219 42.132813-27.941406 67.601563 0 .867187.085937 1.734374.085937 2.601562.15625 2.445312-.742187 4.839844-2.46875 6.582031-1.722656 1.742188-4.109375 2.660157-6.554687 2.53125-.867188-.089843-1.738282-.089843-2.691407-.175781-25.445312-.574219-49.957031 9.601562-67.515625 28.03125-.621094.59375-1.203125 1.230469-1.734375 1.910156-1.644531 1.808594-3.976562 2.839844-6.421875 2.839844-2.445312 0-4.777344-1.03125-6.421875-2.839844-.53125-.679687-1.113281-1.316406-1.734375-1.910156-17.558594-18.429688-42.070312-28.605469-67.515625-28.03125-.953125.085938-1.824219.085938-2.691406.175781-2.445313.128907-4.832031-.789062-6.554687-2.53125-1.726563-1.742187-2.625-4.136719-2.46875-6.582031 0-.867188.085937-1.734375.085937-2.601562.632813-25.46875-9.515625-50.015626-27.941406-67.601563-.695313-.609375-1.304688-1.128906-1.910157-1.738281-1.859374-1.597656-2.929687-3.925782-2.929687-6.378906 0-2.449219 1.070313-4.777344 2.929687-6.375.605469-.609376 1.214844-1.214844 1.910157-1.824219 18.4375-17.542969 28.589843-42.070313 27.941406-67.515625 0-.867188-.085937-1.734375-.085937-2.601563-.15625-2.445312.742187-4.839843 2.46875-6.582031 1.722656-1.742188 4.109374-2.660156 6.554687-2.53125.867187.085938 1.738281.085938 2.691406.175781 18.253907.363281 36.367188-3.21875 53.109375-10.5",fill:"#d1d4d1"}),ne=r.createElement("path",{d:"m321.613281 208.25c0 38.339844-31.082031 69.421875-69.421875 69.421875s-69.421875-31.082031-69.421875-69.421875c0-38.34375 31.082031-69.425781 69.421875-69.425781s69.421875 31.082031 69.421875 69.425781zm0 0",fill:"#5e5f62"}),ce=r.createElement("path",{d:"m286.902344 208.25c0 19.171875-15.539063 34.710938-34.710938 34.710938s-34.710937-15.539063-34.710937-34.710938 15.539062-34.710938 34.710937-34.710938 34.710938 15.539063 34.710938 34.710938zm0 0",fill:"#d1d4d1"}),ie=r.createElement("path",{d:"m252.191406 69.402344c53.542969-15.300782 32.925782 30.078125 27.285156 41.054687-.742187 1.445313-2.230468 2.347657-3.855468 2.335938h-46.859375c-1.625.011719-3.113281-.890625-3.855469-2.335938-5.640625-10.976562-26.257812-56.355469 27.285156-41.054687",fill:"#bdc3c7"}),se=r.createElement("path",{d:"m252.191406 95.4375c-4.792968 0-8.679687-3.886719-8.679687-8.679688v-26.035156c0-4.792968 3.886719-8.675781 8.679687-8.675781 4.792969 0 8.679688 3.882813 8.679688 8.675781v26.035156c0 4.792969-3.886719 8.679688-8.679688 8.679688zm0 0",fill:"#e6e7e8"});function oe(e,t){var a=e.title,n=e.titleId,c=Z(e,["title","titleId"]);return r.createElement("svg",X({height:"40pt",viewBox:"0 0 503 503.9947",width:"40pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),a?r.createElement("title",{id:n},a):null,_,$,ee,te,ae,re,ne,ce,ie,se)}var le=r.forwardRef(oe),ue=(a.p,a(156)),de=a(236),be=a(305),je=a(105),he=function(e){var t=Object(r.useContext)(M),a=Object(r.useState)(!1),n=Object(s.a)(a,2),c=n[0],i=n[1],o=function(){return i(!1)};return Object(A.jsxs)(de.a,{className:"navbar-full",fixed:"top",children:[Object(A.jsxs)(de.a.Brand,{as:N.c,to:"/",className:"navbar-logo",children:[Object(A.jsx)(le,{}),Object(A.jsx)("div",{className:"navbar-logo-text",children:Object(A.jsx)("h1",{children:"Safe Streets"})})]}),t?Object(A.jsxs)(je.a,{children:[Object(A.jsx)("div",{className:"menu-icon",onClick:function(){return i(!c)},children:Object(A.jsx)("i",{className:c?"fas fa-times":"fas fa-bars"})}),Object(A.jsx)("li",{className:"nav-item mobile-show mobile-nav-search",children:Object(A.jsxs)(je.a.Link,{as:N.c,to:"/search",onClick:o,children:[Object(A.jsx)("i",{className:"fas fa-search fa-2x mobile-search"}),Object(A.jsx)("label",{className:"nav-icon-label search-icon-label",children:"Search"})]})}),Object(A.jsxs)("ul",{className:c?"nav-menu active":"nav-menu",children:[Object(A.jsx)("li",{className:"nav-item mobile-hide",children:Object(A.jsxs)(je.a.Link,{as:N.c,to:"/search",onClick:o,children:[Object(A.jsx)("i",{className:"fas fa-search fa-2x mobile-icon"}),Object(A.jsx)("label",{className:"nav-icon-label search-icon-label",children:"Search"})]})}),Object(A.jsx)("li",{className:"nav-item",children:Object(A.jsxs)(je.a.Link,{as:N.c,to:"/favourites",onClick:o,children:[Object(A.jsx)("i",{className:"fas fa-bookmark fa-2x mobile-icon"}),Object(A.jsx)("label",{className:"nav-icon-label label-dropdown favourites-dropdown",children:"Favourites"})]})}),Object(A.jsx)("li",{className:"nav-item mobile-show",children:Object(A.jsxs)(je.a.Link,{className:"user-dropdown-button",as:N.c,to:"/profile",onClick:o,children:[Object(A.jsx)("i",{className:"fas fa-user fa-2x mobile-icon"}),Object(A.jsx)("label",{className:"nav-icon-label label-dropdown",children:"Profile"})]})}),Object(A.jsx)("li",{className:"nav-item mobile-show",children:Object(A.jsxs)(je.a.Link,{className:"user-dropdown-button",as:N.c,to:"/",onClick:function(){return k.signOut()},children:[Object(A.jsx)("i",{className:"fas fa-sign-out-alt fa-2x mobile-icon"}),Object(A.jsx)("label",{className:"nav-icon-label label-dropdown",children:"Logout"})]})}),Object(A.jsxs)(be.a,{className:"mobile-hide",title:Object(A.jsx)("i",{className:"fa fa-user fa-2x mobile-icon"}),children:[Object(A.jsxs)(ue.a,{className:"dropdown-button",as:N.c,to:"/profile",onClick:o,children:[Object(A.jsx)("i",{id:"dropdownProfileIcon",className:"fas fa-user fa-lg"}),Object(A.jsx)("label",{className:"dropdown-text",children:"Profile"})]}),Object(A.jsxs)(ue.a,{className:"dropdown-button",as:N.c,to:"/",onClick:function(){return k.signOut()},children:[Object(A.jsx)("i",{id:"dropdownLogoutIcon",className:"fas fa-sign-out-alt fa-2x"}),Object(A.jsx)("label",{className:"dropdown-text",children:"Logout"})]})]})]})]}):Object(A.jsx)(je.a,{children:" "})]})},me=n.a.createContext(),fe=a(55),pe=a.p+"static/media/ukVectorGuide.675d95a8.svg",xe=function(e){var t=e.submitForm,a=e.formInputHandler,n=e.locationName,c=e.lat,i=e.lon,o=e.numberOfMonths,l=e.dropHandler,u=e.radioButton,d=e.radioClickedHandler,b=e.submitText,j=Object(r.useState)(!1),h=Object(s.a)(j,2),m=h[0],f=h[1],p=function(e){e.preventDefault(),f(!m)};return Object(A.jsxs)("form",{onSubmit:t,children:[Object(A.jsxs)("fieldset",{onClick:function(e){return d("0")},className:"0"===u?"selectedFieldSet":"notSelectedFieldSet",children:[Object(A.jsxs)("label",{children:["Search by location (England)",Object(A.jsx)("input",{className:"form-radio",type:"radio",checked:"0"===u,onClick:function(e){return d("0")},onChange:a,id:"searchRadioStreet"})]}),Object(A.jsx)("br",{}),Object(A.jsx)("label",{className:"inputLabels",children:"Street address or town"}),Object(A.jsx)(C.j,{autoFocus:"0"===u,size:"lg",icon:"road",type:"text",name:"locationName",value:n,onChange:a,onClick:function(e){return d("0")}})]}),Object(A.jsxs)("fieldset",{onClick:function(e){return d("1")},className:"1"===u?"selectedFieldSet":"notSelectedFieldSet",children:[Object(A.jsxs)("label",{children:[" ","Search by latitude and longitude",Object(A.jsx)("input",{className:"form-radio",type:"radio",checked:"1"===u,onClick:function(e){return d("1")},onChange:a,id:"searchRadioLatLon"})]}),Object(A.jsx)("br",{}),Object(A.jsx)("label",{className:"inputLabels",children:"Latitude"}),Object(A.jsx)(C.j,{autoFocus:"1"===u,size:"lg",icon:"map-marker-alt",type:"text",name:"lat",value:c,onChange:a,onClick:function(e){return d("1")}}),Object(A.jsx)("label",{className:"inputLabels",children:"Longitude"}),Object(A.jsx)(C.j,{size:"lg",icon:"map-marker-alt",type:"text",name:"lon",value:i,onChange:a,onClick:function(e){return d("1")}}),Object(A.jsxs)(C.b,{id:"showMapGuide",color:"warning",className:"mb-3",block:!0,size:"lg",onClick:p,children:[Object(A.jsx)("img",{className:"mapicon",src:"data:image/png;base64,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",onClick:p,alt:"Outline of the UK Map"}),"UK Map boundary guide"]}),m&&Object(A.jsx)("dialog",{className:"dialog",style:{position:"absolute"},open:!0,onClick:p,children:Object(A.jsx)("img",{className:"uk-guide-map",src:pe,onClick:p,alt:"UK Map"})})]}),Object(A.jsx)("label",{className:"monthsInputLabel",children:"Number of month's records to include?"}),Object(A.jsxs)(fe.a,{name:"monthsDropdown",id:"dropdown-months-button",size:"lg",onSelect:function(e){return l(e)},children:[Object(A.jsxs)(fe.a.Toggle,{variant:"danger",id:"dropdown-months-toggle",children:[o," months"]}),Object(A.jsxs)(fe.a.Menu,{children:[Object(A.jsx)(fe.a.Item,{eventKey:"3",children:"3 Months"}),Object(A.jsx)(fe.a.Item,{eventKey:"6",children:"6 Months"}),Object(A.jsx)(fe.a.Item,{eventKey:"12",children:"12 Months"})]})]}),Object(A.jsx)("div",{className:"text-center mt-4",children:Object(A.jsx)(C.b,{id:"searchSubmitButton",color:"secondary",className:"mb-3 submit-search-btn",block:!0,size:"lg",type:"submit",children:b})})]})},Oe=a(191),ve=a(140),ge=a.n(ve),ye=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){ge.a.post("http://localhost:4000/api/map",t).then((function(t){var a={predictions:t.data.predictions,historicCrimes:t.data.historicCrimes,locationName:t.data.locationName,lat:t.data.lat,lon:t.data.lon,noCrimes:t.data.noCrimes,policeForce:t.data.policeForce,allCrimes:t.data.allCrimes};e(a)})).catch((function(e){console.log("error in obtaining node API response: ",e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){var t="";switch(e){case"Anti-social behaviour":t="Anti-Social Behaviour";break;case"Burglary":t="Burglary";break;case"Criminal damage and arson":t="Criminal Damage & Arson";break;case"Drugs":t="Drugs";break;case"Possession of weapons":t="Possession of Weapons";break;case"Public order":t="Public Order";break;case"Robbery":t="Robbery";break;case"Shoplifting":t="Shoplifting";break;case"Theft":t="Theft";break;case"Vehicle crime":t="Vehicle Crime";break;case"Violent crime":t="Violent Crime"}return t},we=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){ge.a.post("http://localhost:4000/api/map/predictions",t).then((function(t){var a={predictions:t.data.predictions};e(a)})).catch((function(e){console.log("error in obtaining prediction results from API: ",e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){ge.a.post("http://localhost:4000/api/map/historic",t).then((function(t){var a={historicCrimes:t.data.historicCrimes};e(a)})).catch((function(e){console.log("error in obtaining historic crimes from API: ")}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){var t;return(t=e.sort((function(e,t){return e.percentage-t.percentage}))).reverse(),t},Ae=function(e){var t=[];for(var a in e.percentages){var r={crime:ke(a),occurrences:parseInt(e.totals[a]),percentage:parseFloat(e.percentages[a])};t.push(r)}return t=Ce(t)},Se=function(e){for(var t="Low",a=Ae(e),r=Ce(a),n=0;n<2;n++){var c=r[n].crime;if("Possession of Weapons"===c||"Violent Crime"===c||"Robbery"===c){t="High";break}if("Vehicle Crime"===c||"Theft"===c||"Criminal Damage & Arson"===c||"Burglary"===c){t="Medium";break}}return t},De=function(e){var t=Object(r.useState)("Submit"),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)("0"),o=Object(s.a)(i,2),u=o[0],b=o[1],j=Object(r.useState)(3),h=Object(s.a)(j,2),m=h[0],f=h[1],p=Object(r.useState)(""),x=Object(s.a)(p,2),O=x[0],v=x[1],g=Object(r.useState)(""),y=Object(s.a)(g,2),k=y[0],w=y[1],N=Object(r.useState)(""),S=Object(s.a)(N,2),P=S[0],F=S[1],B=Object(r.useState)(null),z=Object(s.a)(B,2),H=z[0],M=z[1],T=Object(D.g)(),R=Object(r.useContext)(E),L=Object(s.a)(R,2),K=(L[0],L[1]),V=Object(r.useContext)(me),U=Object(s.a)(V,2),Q=(U[0],U[1]),G=Object(r.useContext)(I),J=Object(s.a)(G,2),q=(J[0],J[1]),Y=function(e,t){var a=!0;return(e<49.88||e>60.86||t<-8.21||t>1.77)&&(a=!1),a},W=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,n,i,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(a="0"===u)||!isNaN(k)&&!isNaN(P)){e.next=7;break}M("Latitude and Longitude must be valid numbers"),alert("Latitude and Longitude must be number coordinates"),e.next=32;break;case 7:if(r=Y(k,P),!a||""!==O){e.next=12;break}alert("The location is empty, please enter a location!"),e.next=32;break;case 12:if(a||""!==k&&""!==P){e.next=16;break}alert("Please add coordinates for both latitude and longitude!"),e.next=32;break;case 16:if(a||!isNaN(k)&&!isNaN(P)){e.next=20;break}alert("Your latitude and longitude coordinates must be numbers only!"),e.next=32;break;case 20:if(a||r){e.next=24;break}alert("Your latitude and longitude coordinates are outside of the UK!"),e.next=32;break;case 24:return c(Object(A.jsxs)("div",{children:[Object(A.jsx)(Oe.a,{as:"span",animation:"border",role:"status","aria-hidden":"true",variant:"dark"}),Object(A.jsx)("label",{className:"submit-btn-text",children:"LOADING CRIME DATA...."})]})),n={locationName:O,isNameSearch:a,lat:k,lon:P,numberOfMonths:m},e.next=28,ye(n);case 28:i=e.sent,s=i.noCrimes,Y(i.lat,i.lon)?s&&"greater-manchester"===i.policeForce?(c("Submit"),alert("Please note that Greater Manchester crime data is currently restricted due to an ongoing investigation into missing police data."),Q({predictions:i.predictions,historicCrimes:i.historicCrimes})):s?(c("Submit"),alert("No crime data found for this search!")):("greater-manchester"===i.policeForce&&alert("Please note: Greater Manchester crime data is currently restricted due to an ongoing investigation into missing police crime data."),w(i.lat),F(i.lon),l=i.locationName,d=i.lat,b=i.lon,j=i.allCrimes,K({locationName:l,allCrimes:j,lat:d,lon:b,filters:[]}),o=Se(i.predictions),Q({predictions:i.predictions,historicCrimes:i.historicCrimes,threatLevel:o}),q(i.allCrimes),T.push("/mapdisplay",{isfavourite:"false",threatlevel:o})):(c(Object(A.jsx)("label",{className:"submit-btn-text",children:"Submit"})),alert("Location name is not recognised!, please check your spelling"));case 32:case"end":return e.stop()}var l,d,b,j}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)("div",{className:"search-map-div",children:Object(A.jsx)(C.n,{children:Object(A.jsx)(C.f,{size:"12",sm:"10",className:"form-card",children:Object(A.jsx)(C.c,{children:Object(A.jsxs)(C.d,{children:[Object(A.jsxs)(C.e,{className:"form-header bg-primary rounded",children:[Object(A.jsx)("i",{className:"fas fa-globe"}),Object(A.jsx)("label",{className:"header-label",children:"Search"})]}),Object(A.jsx)(xe,{submitForm:W,formInputHandler:function(e){var t=e.currentTarget,a=t.name,r=t.value;"locationName"===a?v(r):"lat"===a?w(r):"lon"===a&&F(r)},locationName:O,lat:k,lon:P,numberOfMonths:m,error:H,dropHandler:function(e){0===e&&(e=3),f(e)},radioButton:u,radioClickedHandler:function(e){b(e)},submitText:n})]})})})})})},Pe=a(162),Fe=a(306),Be=a(65),ze=a.n(Be),He="b0188d827da8401786390efebdbc0484",Me=function(e){var t;switch(e){case"anti-social-behaviour":t="Anti-Social Behaviour";break;case"burglary":t="Burglary";break;case"criminal-damage-arson":t="Criminal Damage/Arson";break;case"drugs":t="Drugs";break;case"possession-of-weapons":t="Possession of Weapons";break;case"public-order":case"other-crime":t="Public Order";break;case"robbery":t="Robbery";break;case"shoplifting":t="Shoplifting";break;case"theft-from-the-person":case"bicycle-theft":case"other-theft":t="Theft";break;case"vehicle-crime":t="Vehicle Crime";break;case"violent-crime":case"violence-and-sexual-offences":t="Violent Crime"}return t},Te=function(e,t){var a,r,n,c;switch(e){case"anti-social-behaviour":n="darkslateblue",r="record-voice-over",c="material";break;case"burglary":n="hotpink",r="home",c="awesome";break;case"criminal-damage-arson":n="orangered",r="fire-alt",c="awesome";break;case"drugs":n="brown",r="syringe",c="awesome";break;case"possession-of-weapons":n="red",r="fist-raised",c="awesome";break;case"public-order":case"other-crime":n="%23570345",r="bullhorn",c="awesome";break;case"robbery":n="olive",r="cash-register",c="awesome";break;case"shoplifting":n="gold",r="shopping-cart",c="awesome";break;case"theft-from-the-person":case"bicycle-theft":case"other-theft":n="blue",r="money-bill-alt",c="awesome";break;case"vehicle-crime":n="%238884d8",r="car",c="awesome";break;case"violent-crime":case"violence-and-sexual-offences":n="black",r="sports_kabaddi",c="material"}if(t){a=new ze.a.icon({iconUrl:"https://api.geoapify.com/v1/icon/?type=circle&color="+n+"&size=x-large&icon="+r+"&iconType="+c+"&iconSize=large&noShadow&noWhiteCircle&apiKey="+He,iconSize:[75,95]})}else a=new ze.a.icon({iconUrl:"https://api.geoapify.com/v1/icon/?type="+c+"&color="+n+"&size=xx-large&icon="+r+"&textSize=large&noWhiteCircle&scaleFactor=2&apiKey="+He,iconSize:[65,90],iconAnchor:[15.5,42],popupAnchor:[20,-33]});return a},Ee=function(){return new ze.a.icon({iconUrl:"https://api.geoapify.com/v1/icon/?type=awesome&color=red&icon=search&size=xx-large&iconType=awesome&iconSize=large&noWhiteCircle&scaleFactor=2&apiKey="+He,iconSize:[95,130],iconAnchor:[15.5,42],popupAnchor:[20,-33]})},Ie=a(535),Re=a(536),Le=a(537),Ke=a(546),Ve=(a(262),function(e){var t=e.title,a=e.locationName,n=e.lat,c=e.lon,i=e.timestamp,o=e.deleteFavourite,l=e.displayMap,u=Object(r.useState)(null),d=Object(s.a)(u,2),b=d[0],j=d[1];return Object(A.jsx)(Fe.a,{className:"container-fluid mt-4",children:Object(A.jsxs)(Pe.a,{className:"favourite-card",border:"info",style:{width:"18rem"},children:[Object(A.jsxs)(Ie.a,{className:"markercluster-map",center:[n,c],zoom:15,maxZoom:18,style:{height:"33vh"},whenCreated:function(){return j(b)},zoomControl:!1,children:[Object(A.jsx)(Re.a,{position:[n,c],icon:Ee(),children:Object(A.jsxs)(Le.a,{className:"icon-popup",children:[a,Object(A.jsxs)("p",{children:["(",n,", ",c,")"]})]})},K()()),Object(A.jsx)(Ke.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]}),Object(A.jsx)(Pe.a.Header,{className:"favourite-card-header",children:Object(A.jsx)("h3",{children:t})}),Object(A.jsxs)(Pe.a.Body,{className:"favourite-card-body",bg:"light",children:[Object(A.jsx)(G.a,{className:"favourite-card-display-button",onClick:function(){l(i)},variant:"primary",children:"Display Map"}),Object(A.jsx)("i",{className:"far fa-trash-alt fa-lg trash-favourites",onClick:function(){o(i)}})]}),Object(A.jsx)(Pe.a.Footer,{children:Object(A.jsxs)("small",{className:"text-muted",children:[" ",Object(A.jsx)("h5",{children:"Date created:"}),Object(A.jsx)("h4",{children:i.slice(0,-10)})]})})]},K()())})}),Ue=a(205),Qe=a(44),Ge=a(60),Je=function(e){var t=Object(D.g)();return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ge.a,{placement:"right",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{className:"button-tooltip-text",children:"Back"})}),children:Object(A.jsx)(G.a,{className:"btn-back",variant:"secondary",onClick:function(){return t.goBack()},children:Object(A.jsx)("i",{className:"fa fa-arrow-left fa-lg mx-2"})})})})},qe=a(307),Ye=function(e){var t=Object(r.useState)([]),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useContext)(E),o=Object(s.a)(i,2),u=(o[0],o[1]),b=Object(r.useContext)(I),j=Object(s.a)(b,2),h=(j[0],j[1]),m=Object(D.g)();Object(r.useEffect)((function(){y()}),[]);var f=function(e){u((function(t){return{allCrimes:e.allCrimes,locationName:e.locationName,lat:e.lat,lon:e.lon,filters:e.filters}})),h(e.allCrimes)},v=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:a=e.sent,f(a),m.push("/mapdisplay",{isfavourite:"true",timestamp:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:y();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(Ue.a,{className:"favourites-container",children:[Object(A.jsx)(Je,{id:"back-btn-favourites"}),Object(A.jsx)(q.a,{delay:240,children:Object(A.jsx)(Ue.a,{children:Object(A.jsxs)(Ue.a,{id:"favourites-list-Container",children:[Object(A.jsxs)("h3",{className:"favourites-title",style:{opacity:"0.8"},children:["You have ",n.length,n.length>1||0===n.length?" favourites saved":" favourite saved"]}),Object(A.jsx)(qe.a,{children:n.map((function(e){return Object(A.jsx)(Ve,{deleteFavourite:g,displayMap:v,title:e.title,locationName:e.locationName,lat:e.lat,lon:e.lon,timestamp:e.timestamp},K()())}))})]})})})]})},We=function(e,t){var a=[],r=function(e){return["anti-social-behaviour","burglary","criminal-damage-arson","drugs","possession-of-weapons","public-order","robbery","shoplifting","theft","vehicle-crime","violent-crime"].filter((function(t){return!e.includes(t)}))}(t);return e.forEach((function(e){r.includes(e.category)&&a.push(e)})),a},Xe=function(e){var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(50),o=Object(s.a)(i,2),u=o[0],b=o[1],j=Object(D.g)(),h=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onHide(),t.prev=1,t.next=4,f(n,e.mapdetails.allCrimes,e.mapdetails.locationName,e.mapdetails.lat,e.mapdetails.lon,e.mapdetails.filters);case 4:j.push("/mapdisplay",{isfavourite:"true"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("Error adding favourite"+t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(A.jsxs)(Q.a,{animation:!1,show:e.show,onHide:e.onHide,size:"lg",centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:Object(A.jsxs)("h3",{className:"my-3",children:[Object(A.jsx)(C.h,{className:"addFavModal-icon",icon:"bookmark"}),"Add New Favourite Location"]})})}),Object(A.jsx)(Q.a.Body,{children:Object(A.jsxs)("div",{className:"grey-text",children:[Object(A.jsx)(C.j,{className:"favourite-input-title",required:!0,label:"Enter a title...",maxLength:"42",background:!0,size:"lg",autoFocus:!0,group:!0,type:"text",name:"title",validate:!0,error:"wrong",success:"right",value:n,onChange:function(e){return function(e){var t=e.currentTarget,a=t.name,r=t.value;"title"===a&&(c(r),b(42-r.length))}(e)}}),Object(A.jsxs)("label",{children:["(",u," Characters Remaining)"]})]})}),Object(A.jsxs)(Q.a.Footer,{children:[Object(A.jsx)(G.a,{variant:"red",onClick:e.onHide,children:"Cancel"}),Object(A.jsx)(G.a,{variant:"green",type:"submit",onClick:function(){return h()},children:"Save Favourite"})]})]})},Ze=a(538),_e=a(539),$e=a(543),et=a(196),tt=a(197),at=a(163),rt=a(320),nt=function(e){var t=Object(r.useContext)(me),a=Object(s.a)(t,2),n=a[0],c=(a[1],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),i=function(e){var t="";switch(e){case"Anti social behaviour":t="Anti-Social Behaviour";break;case"Burglary":t="Burglary";break;case"Criminal damage arson":t="Criminal Damage & Arson";break;case"Drugs":t="Drugs";break;case"Possession of weapons":t="Possession of Weapons";break;case"Public order":case"Other crime":t="Public Order";break;case"Robbery":t="Robbery";break;case"Shoplifting":t="Shoplifting";break;case"Theft from the person":case"Bicycle theft":case"Other theft":t="Theft";break;case"Vehicle crime":t="Vehicle Crime";break;case"Violent crime":case"Violence and sexual offences":t="Violent Crime"}return t},o=function(){var e=[],t=(new Date).getMonth()+1;1===t?t=11:2===t?t=12:t-=2;for(var a=t+1,r=0;r<12;r++){a>12&&(a-=12);var n={month:c[a-1],"Anti-Social Behaviour":0,Burglary:0,"Criminal Damage & Arson":0,Drugs:0,"Possession of Weapons":0,"Public Order":0,Robbery:0,Shoplifting:0,Theft:0,"Vehicle Crime":0,"Violent Crime":0};e.push(n),a++}return e}();for(var l in n.historicCrimes){var u=n.historicCrimes[l],d=u.category.replace(/-/g," ");d=i(d=d.charAt(0).toUpperCase()+d.slice(1));var b=parseInt(u.month-1),j=c[b];for(var h in o){var m=o[h];m.month===j&&(m[d]=m[d]+1)}}return Object(A.jsxs)(Q.a,{animation:!1,dialogClassName:"modal-dialog modal-xl",show:e.show,onHide:e.onHide,centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:Object(A.jsxs)("h3",{className:"my-3",children:[Object(A.jsx)(C.h,{className:"addFavModal-icon",icon:"bookmark"}),"Crime occurences per month in this area"]})})}),Object(A.jsx)(Q.a.Body,{children:Object(A.jsx)(Ze.a,{width:"100%",height:600,children:Object(A.jsxs)(_e.a,{width:"100%",height:"100%",data:o,animationDuration:800,margin:{top:10,right:30,left:0,bottom:0},children:[Object(A.jsx)($e.a,{strokeDasharray:"3 3"}),Object(A.jsx)(et.a,{dataKey:"month"}),Object(A.jsx)(tt.a,{type:"number",domain:["dataMin","dataMax"]}),Object(A.jsx)(at.a,{}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Anti-Social Behaviour",stackId:"1",stroke:"darkslateblue",fill:"darkslateblue"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Burglary",stackId:"1",stroke:"hotpink",fill:"hotpink"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Criminal Damage & Arson",stackId:"1",stroke:"orangered",fill:"orangered"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Drugs",stackId:"1",stroke:"brown",fill:"brown"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Possession of Weapons",stackId:"1",stroke:"red",fill:"red"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Public Order",stackId:"1",stroke:"#570345",fill:"#570345"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Robbery",stackId:"1",stroke:"olive",fill:"olive"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Shoplifting",stackId:"1",stroke:"gold",fill:"gold"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Theft",stackId:"1",stroke:"blue",fill:"blue"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Vehicle Crime",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),Object(A.jsx)(rt.a,{type:"monotone",dataKey:"Violent Crime",stackId:"1",stroke:"black",fill:"black"})]})})})]})},ct=a(544),it=a(328),st=a(195),ot=a(322),lt=function(e){var t=Object(r.useContext)(me),a=Object(s.a)(t,2),n=a[0],c=(a[1],Object(r.useState)(["darkslateblue","hotpink","orangered","brown","red","#570345","olive","gold","blue","#8884d8","black"])),i=Object(s.a)(c,2),o=i[0],l=(i[1],["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()+1]),u=function(e){var t="";switch(e){case"Anti-social behaviour":t="Anti-Social Behaviour";break;case"Burglary":t="Burglary";break;case"Criminal damage and arson":t="Criminal Damage & Arson";break;case"Drugs":t="Drugs";break;case"Possession of weapons":t="Possession of Weapons";break;case"Public order":t="Public Order";break;case"Robbery":t="Robbery";break;case"Shoplifting":t="Shoplifting";break;case"Theft":t="Theft";break;case"Vehicle crime":t="Vehicle Crime";break;case"Violent crime":t="Violent Crime"}return t},d=[];if(n.predictions)for(var b in n.predictions.totals){var j={crime:u(b),occurrences:parseInt(n.predictions.totals[b]),percentage:parseFloat(n.predictions.percentages[b])+"%"};d.push(j)}return Object(A.jsxs)(Q.a,{animation:!1,dialogClassName:"modal-dialog modal-xl",show:e.show,onHide:e.onHide,centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:Object(A.jsxs)("h2",{className:"my-3 prediction-modal-heading",children:[Object(A.jsx)(C.h,{className:"probabilityModal-icon",icon:"fa fa-brain fa-lg"}),"Number of crime incidents predicted for ",l]})})}),Object(A.jsx)(Q.a.Body,{children:Object(A.jsx)(q.a,{delay:250,children:Object(A.jsx)(Ze.a,{width:"100%",height:500,children:Object(A.jsxs)(ct.a,{data:d,layout:"vertical",barCategoryGap:4,margin:{top:0,right:65,left:22,bottom:0},children:[Object(A.jsx)(et.a,{type:"number",hide:!0}),Object(A.jsx)(tt.a,{type:"category",width:220,dataKey:"crime",tickMargin:10}),Object(A.jsxs)(it.a,{dataKey:"occurrences",fill:"blue",animationDuration:2e3,radius:[0,8,8,0],children:[Object(A.jsx)(st.a,{className:"chart-labellist",dataKey:"occurrences",position:"right",style:{fill:"black"}}),d.map((function(e,t){return Object(A.jsx)(ot.a,{fill:o[t]},"cell-".concat(t))}))]})]})})})})]})},ut=function(e){var t=Object(r.useContext)(me),a=Object(s.a)(t,2),n=a[0],c=(a[1],Ae(n.predictions)),i=function(e){var t="incident";return e>1&&(t="incidents"),t};return Object(A.jsxs)(Q.a,{animation:!1,dialogClassName:"modal-dialog modal-xl",show:e.show,onHide:e.onHide,centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:Object(A.jsxs)("p",{className:"my-3 prediction-modal-heading",children:[Object(A.jsx)(C.h,{className:"crime-warnings-icon",icon:"fa fa-exclamation fa-lg"}),"Predicted Threat Level: ",n.threatLevel,Object(A.jsxs)("span",{className:"risk-title-declaration",children:[" ","(",function(e){var t;switch(e){case"High":t="Risk of violence";break;case"Medium":t="Risk to property or possessions";break;case"Low":t="Risk of noise and distruption"}return t}(n.threatLevel),")"," "]})]})})}),Object(A.jsx)(Q.a.Body,{children:Object(A.jsxs)(q.a,{delay:100,children:[Object(A.jsxs)(Q.a.Body,{children:[Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:Object(A.jsx)("p",{className:"threat-list-titles",children:"Most Prolific Predicted Crimes"})}),c.slice(0,2).map((function(e){return Object(A.jsxs)("p",{className:"crime-warning-top",children:[Object(A.jsxs)("strong",{children:[e.crime,": "]}),e.occurrences," ",i(e.occurrences),Object(A.jsxs)("span",{className:"percentages-top-crimes",children:["(",e.percentage,"% of crimes)"]})]},K()())}))]}),Object(A.jsxs)(Q.a.Body,{children:[Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:Object(A.jsx)("p",{className:"threat-list-titles",children:"Other Predicted Crimes"})}),c.slice(2).map((function(e){return Object(A.jsxs)("p",{className:"crime-warning-other",children:[e.crime,": ",e.occurrences," ",i(e.occurrences),Object(A.jsxs)("span",{className:"percentages-other-crimes",children:["(",e.percentage,"% of crimes)"]})]},K()())}))]})]})})]})},dt=function(e){var t=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e.timestamp);case 2:e.setFavouriteButton("false"),e.onHide();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(A.jsxs)(Q.a,{animation:!1,show:e.show,onHide:e.onHide,size:"lg",centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:"Are you sure you want to delete this favourite?"})}),Object(A.jsxs)(Q.a.Footer,{children:[Object(A.jsx)(G.a,{variant:"green",onClick:e.onHide,children:"Cancel"}),Object(A.jsx)(G.a,{variant:"red",type:"submit",onClick:function(){return t(e.timestamp)},children:"Delete Favourite"})]})]})},bt=a(325),jt=a(40),ht=function(e){return Object(A.jsxs)(G.a,{className:e.isActive?"btn-filter-active":"btn-filter-inactive",id:e.id,onClick:function(){return e.changeFilterState(e.label)},children:[Object(A.jsx)("img",{className:"filter-icon",src:e.getCrimeIcon(e.id,!0).options.iconUrl,alt:e.label}),Object(A.jsx)("span",{className:"filter-text",children:e.label}),Object(A.jsx)("i",{className:e.isActive?"fa fas fa-check fa-sm filter-button-icon":"fa fas fa-times fa-sm filter-button-icon"})]})},mt=[],ft=function(e){var t=Object(r.useState)([{label:"Anti-Social Behaviour",categories:["anti-social-behaviour"],isActive:!0},{label:"Burglary",categories:["burglary"],isActive:!0},{label:"Criminal Damage & Arson",categories:["criminal-damage-arson"],isActive:!0},{label:"Drugs",categories:["drugs"],isActive:!0},{label:"Weapons",categories:["possession-of-weapons"],isActive:!0},{label:"Public Order",categories:["public-order","other-crime"],isActive:!0},{label:"Robbery",categories:["robbery"],isActive:!0},{label:"Shoplifting",categories:["shoplifting"],isActive:!0},{label:"Theft",categories:["other-theft","bicycle-theft","theft-from-the-person"],isActive:!0},{label:"Vehicle Crime",categories:["vehicle-crime"],isActive:!0},{label:"Violent Crime",categories:["violent-crime"],isActive:!0}]),a=Object(s.a)(t,2),n=a[0],c=a[1],i=function(e){var t="";switch(e){case"anti-social-behaviour":t="Anti-Social Behaviour";break;case"burglary":t="Burglary";break;case"criminal-damage-arson":t="Criminal Damage & Arson";break;case"drugs":t="Drugs";break;case"possession-of-weapons":t="Weapons";break;case"public-order":case"other-crime":t="Public Order";break;case"robbery":t="Robbery";break;case"shoplifting":t="Shoplifting";break;case"theft-from-the-person":case"bicycle-theft":case"other-theft":t="Theft";break;case"vehicle-crime":t="Vehicle Crime";break;case"violent-crime":case"violence-and-sexual-offences":t="Violent Crime"}return t};Object(r.useEffect)((function(){if(e.favouriteFilters.length>0){var t,a=Object(jt.a)(e.favouriteFilters);try{for(a.s();!(t=a.n()).done;){var r=t.value,n=i(r);o(n)}}catch(c){a.e(c)}finally{a.f()}}}),[]);var o=function(e){var t=n.findIndex((function(t){return t.label===e})),a=Object(bt.a)(n),r=!a[t].isActive;a[t].isActive=r;var i=a[t].categories;if(r){var s,o=Object(jt.a)(a[t].categories);try{var l=function(){var e=s.value;mt=mt.filter((function(t){return t!==e}))};for(o.s();!(s=o.n()).done;)l()}catch(j){o.e(j)}finally{o.f()}}else{var u,d=Object(jt.a)(i);try{for(d.s();!(u=d.n()).done;){var b=u.value;mt.push(b)}}catch(j){d.e(j)}finally{d.f()}}c(a)},u=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.onHide(),e.updateFilteredCrimes(mt);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(A.jsxs)(Q.a,{animation:!1,show:e.show,onHide:e.onHide,size:"lg",centered:!0,children:[Object(A.jsx)(Q.a.Header,{closeButton:!0,children:Object(A.jsx)(Q.a.Title,{id:"contained-modal-title-vcenter",children:"Crime Filters"})}),Object(A.jsx)(Q.a.Body,{className:"filterButtonsGroup",children:Object(A.jsx)(q.a,{delay:100,children:n.map((function(e){return Object(A.jsx)(ht,{id:e.categories[0],label:e.label,categories:e.categories,isActive:e.isActive,changeFilterState:o,getCrimeIcon:Te},K()())}))})}),Object(A.jsxs)(Q.a.Footer,{children:[Object(A.jsx)(G.a,{className:"btn-footer",variant:"red",onClick:function(){mt=[];var e,t=Object(jt.a)(n);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.isActive||o(a.label)}}catch(r){t.e(r)}finally{t.f()}},children:"Reset"}),Object(A.jsx)(G.a,{className:"btn-footer",variant:"green",type:"submit",onClick:function(){return u()},children:"Apply"})]})]})},pt=function(e){var t=e.setModalShow;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ge.a,{placement:"left",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{children:Object(A.jsx)("h2",{className:"button-tooltip-text",children:"Add to favourites"})})}),children:Object(A.jsx)(G.a,{className:"w-full py-3 btn-add-to-favourites",variant:"success",title:"Add to favourites",onClick:function(){return t(!0)},children:Object(A.jsx)("i",{className:"fa fa-plus fa-lg mx-4"})})})})},xt=function(e){var t=e.setModalShow;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ge.a,{placement:"left",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{className:"button-tooltip-text",children:"Delete from favourites"})}),children:Object(A.jsx)(G.a,{className:"w-full py-3 btn-delete-favourite",variant:"danger",onClick:function(){return t(!0)},children:Object(A.jsx)("i",{className:"fa fa-minus fa-lg mx-4"})})})})},Ot=function(e){var t=e.setModalShow;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ge.a,{placement:"left",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{className:"button-tooltip-text",children:"Filter Crimes"})}),children:Object(A.jsx)(G.a,{className:"btn-open-filter",variant:"dark",onClick:function(){return t(!0)},children:Object(A.jsx)("i",{className:"fa fa-filter fa-lg mx-2"})})})})},vt=function(e){var t=e.setModalShow;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ge.a,{placement:"top",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{className:"button-tooltip-text",children:"Predict Crimes"})}),children:Object(A.jsxs)(G.a,{className:"btn-display-predictions",variant:"danger",onClick:function(){return t(!0)},children:[Object(A.jsx)("i",{className:"fa fa-brain fa-lg mx-4",title:"View Crime Predictions"}),Object(A.jsx)("span",{className:"tooltip-text",children:"Crime Predictions"})]})})})},gt=function(e){var t=e.setModalShow,a=e.analysisComplete,n=Object(r.useContext)(me),c=Object(s.a)(n,1)[0],i="success",o=c.threatLevel;return"Medium"===c.threatLevel?i="warning":"High"===c.threatLevel&&(i="danger"),Object(A.jsx)(A.Fragment,{children:a?Object(A.jsx)(Ge.a,{placement:"bottom",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{className:"button-tooltip-text",children:"Crime Alerts"})}),children:Object(A.jsxs)(G.a,{className:"btn-show-warnings",variant:i,onClick:function(){return t(!0)},children:[Object(A.jsx)("i",{className:"fa fa-exclamation-triangle fa-2x mx-4"}),Object(A.jsxs)("span",{className:"tooltip-text",children:["Threat level: ",o]})]})}):Object(A.jsxs)(G.a,{className:"btn-show-analysis",variant:"light",title:"Show warnings",children:[Object(A.jsx)("i",{className:"fa fa-exclamation-triangle fa-2x mx-4",title:"Warning"}),Object(A.jsxs)("span",{className:"tooltip-text",children:["Analysing Threats...."," ",Object(A.jsx)(Oe.a,{as:"span",animation:"border",role:"status","aria-hidden":"true",variant:"danger"})]})]})})},yt=function(e){var t=e.setModalShow;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ge.a,{placement:"right",overlay:Object(A.jsx)(Qe.a,{id:"button-tooltip",children:Object(A.jsx)(Qe.a.Content,{className:"button-tooltip-text",children:"Display Annual Crime Rates"})}),children:Object(A.jsxs)(G.a,{className:"btn-display-historiccrimes",variant:"secondary",title:"Show data",onClick:function(){return t(!0)},children:[Object(A.jsx)("i",{className:"fa fa-chart-line fa-lg mx-4",title:"View Historic Crime Data"}),Object(A.jsx)("span",{className:"tooltip-text",children:"Historic Crime Data"})]})})})},kt=function(){var e,t=Object(r.useState)(null),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],b=o[1],j=Object(r.useState)(!1),h=Object(s.a)(j,2),m=h[0],f=h[1],p=Object(r.useContext)(me),x=Object(s.a)(p,2),O=(x[0],x[1]),v=Object(r.useState)(!1),g=Object(s.a)(v,2),y=g[0],k=g[1],w=Object(r.useState)(!1),N=Object(s.a)(w,2),C=N[0],S=N[1],P=Object(r.useState)(!1),F=Object(s.a)(P,2),B=F[0],z=F[1],H=Object(r.useState)(!1),M=Object(s.a)(H,2),T=M[0],R=M[1],L=Object(r.useContext)(E),V=Object(s.a)(L,2),U=V[0],Q=V[1],G=Object(r.useContext)(I),J=Object(s.a)(G,2),q=J[0],Y=J[1],W=Object(r.useState)(""),X=Object(s.a)(W,2),Z=X[0],_=X[1],$=Object(r.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],re=Object(D.g)();Object(r.useEffect)((function(){var e;"true"===(null===(e=re.location.state)||void 0===e?void 0:e.isfavourite)?(ie(U.filters),re.location.state.timestamp&&_(re.location.state.timestamp),ce()):ae(!0)}),[]);var ne=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re.location.state.isfavourite=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={lat:U.lat,lon:U.lon},e.next=3,we(t);case 3:return a=e.sent,r=Se(a.predictions),e.next=7,Ne(t);case 7:n=e.sent,O({predictions:a.predictions,historicCrimes:n.historicCrimes,threatLevel:r}),ae(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=We(U.allCrimes,t),Y(a),Q((function(e){return{allCrimes:e.allCrimes,locationName:e.locationName,lat:e.lat,lon:e.lon,filters:t}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)("div",{className:"map-container",children:Object(A.jsxs)(Ie.a,{className:"markercluster-map",center:[U.lat,U.lon],zoom:17,maxZoom:18,style:{height:"90vh"},whenCreated:function(){return c(n)},zoomControl:!1,children:[q.map((function(e){return Object(A.jsx)(Re.a,{position:[e.latitude,e.longitude],icon:Te(e.category,!1),children:Object(A.jsxs)(Le.a,{className:"icon-popup",children:[Me(e.category),"\n",Object(A.jsxs)("p",{children:[(t=e.month,["January","February","March","April","May","June","July","August","September","October","November","December"][t]),", ",e.year]}),Object(A.jsxs)("p",{children:["(",e.latitude,", ",e.longitude,")"]})]})},K()());var t})),Object(A.jsx)(Re.a,{position:[U.lat,U.lon],icon:Ee(),children:Object(A.jsxs)(Le.a,{className:"icon-popup",children:[U.locationName,Object(A.jsxs)("p",{children:["(",U.lat,", ",U.lon,")"]})]})},K()()),Object(A.jsx)(Je,{}),Object(A.jsx)(gt,{setModalShow:R,analysisComplete:te}),Object(A.jsx)(ut,{animation:!1,show:T,onHide:function(){return R(!1)}}),Object(A.jsx)(Ot,{setModalShow:k}),Object(A.jsx)(ft,{animation:!1,show:y,onHide:function(){return k(!1)},updateFilteredCrimes:ie,favouriteFilters:U.filters}),"true"===(null===(e=re.location.state)||void 0===e?void 0:e.isfavourite)?Object(A.jsx)(xt,{setModalShow:f}):Object(A.jsx)(pt,{setModalShow:b}),Object(A.jsx)(dt,{animation:!1,show:m,onHide:function(){return f(!1)},mapdetails:U,timestamp:Z,setFavouriteButton:ne}),Object(A.jsx)(Xe,{animation:!1,show:u,onHide:function(){return b(!1)},mapdetails:U}),Object(A.jsx)(lt,{animation:!1,show:B,onHide:function(){return z(!1)}}),Object(A.jsx)(vt,{setModalShow:z}),Object(A.jsx)(nt,{animation:!1,show:C,onHide:function(){return S(!1)}}),Object(A.jsx)(yt,{setModalShow:S}),Object(A.jsx)(Ke.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]})})},wt=function(){var e=Object(r.useContext)(M);return Object(A.jsxs)(n.a.Fragment,{children:[Object(A.jsx)(he,{}),e?Object(A.jsx)("div",{children:Object(A.jsxs)(D.d,{children:[Object(A.jsx)(D.b,{exact:!0,path:"/mapdisplay",render:function(e){return Object(A.jsx)(kt,{})}}),Object(A.jsx)(D.b,{exact:!0,path:"/search",render:function(e){return Object(A.jsx)(De,{})}}),Object(A.jsx)(D.b,{exact:!0,path:"/favourites",component:Ye}),Object(A.jsx)(D.b,{exact:!0,path:"/profile",component:W}),Object(A.jsxs)(D.b,{exact:!0,path:"/",children:[Object(A.jsx)(D.a,{to:"/search"})," : ",Object(A.jsx)(De,{})]})]})}):Object(A.jsx)("div",{children:Object(A.jsxs)(D.d,{children:[Object(A.jsx)(D.b,{exact:!0,path:"/",component:S}),Object(A.jsxs)(D.b,{exact:!0,path:"/search",children:[Object(A.jsx)(D.a,{to:"/"})," : ",Object(A.jsx)(S,{})]}),Object(A.jsxs)(D.b,{exact:!0,path:"/favourites",children:[Object(A.jsx)(D.a,{to:"/"})," : ",Object(A.jsx)(S,{})]}),Object(A.jsxs)(D.b,{exact:!0,path:"/profile",children:[Object(A.jsx)(D.a,{to:"/"})," : ",Object(A.jsx)(S,{})]}),Object(A.jsxs)(D.b,{exact:!0,path:"/mapdisplay",children:[Object(A.jsx)(D.a,{to:"/"})," : ",Object(A.jsx)(S,{})]}),Object(A.jsxs)(D.b,{exact:!0,path:"/register",children:[Object(A.jsx)(D.a,{to:"/register"})," : ",Object(A.jsx)(P,{})]})]})})]})};a(524);ge.a.defaults.withCredentials=!0;var Nt=function(){var e=Object(r.useState)({}),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)({}),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)({}),d=Object(s.a)(u,2),b=d[0],j=d[1];return Object(A.jsx)(I.Provider,{value:[b,j],children:Object(A.jsx)(me.Provider,{value:[o,l],children:Object(A.jsx)(E.Provider,{value:[a,n],children:Object(A.jsx)(T,{children:Object(A.jsx)(wt,{})})})})})};i.a.render(Object(A.jsx)(n.a.StrictMode,{children:Object(A.jsx)(N.a,{children:Object(A.jsx)(Nt,{})})}),document.getElementById("root"))}},[[525,1,2]]]);
//# sourceMappingURL=main.abbe3a87.chunk.js.map