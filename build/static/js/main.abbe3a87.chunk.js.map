{"version":3,"sources":["firebase.jsx","pages/Login.jsx","pages/Register.jsx","auth/UserProvider.jsx","contexts/MapDetailsContext.jsx","contexts/CrimeDataContext.jsx","modals/RemoveProfileFavouriteModal.jsx","pages/Profile.jsx","images/logo.svg","navigation/NavBar.jsx","contexts/ResultsDataContext.jsx","images/ukVectorGuide.svg","components/Form.jsx","images/uk-icon.png","util/GetCrimeData.jsx","pages/Search.jsx","util/AssignMapIcons.jsx","components/Favourite.jsx","components/ButtonBack.jsx","pages/Favourites.jsx","util/FilterCrimeIcons.jsx","modals/AddFavouriteModal.jsx","modals/HistoricCrimeModal.jsx","modals/PredictionsModal.jsx","modals/CrimeWarningModal.jsx","modals/RemoveFavouriteModal.jsx","components/ButtonFilterCrime.jsx","modals/FiltersModal.jsx","components/ButtonAddToFavs.jsx","components/ButtonRemoveFromFavs.jsx","components/ButtonShowFilters.jsx","components/ButtonShowPredictions.jsx","components/ButtonShowWarnings.jsx","components/ButtonShowHistoricCrimes.jsx","pages/MapDisplay.jsx","util/DateHelper.jsx","components/Application.jsx","App.js","index.js"],"names":["getUserDocument","uid","a","firestore","doc","get","userDocument","data","console","error","createUserWithEmailAndPassword","email","password","auth","user","log","generateUserDocument","message","additionalData","userRef","exists","set","favourites","addUserFavourite","title","allCrimes","locationName","lat","lon","filters","firebase","currentUser","options","year","month","day","hour","minute","second","timestamp","Date","toLocaleDateString","newFavourite","update","FieldValue","arrayUnion","Object","assign","getUserFavourites","snapshot","deleteUserFavourite","aTimestamp","filter","favourite","getUserFavourite","find","reauthenticateUser","credentials","EmailAuthProvider","credential","reauthenticateWithCredential","deleteUserDocument","userDocumentRef","delete","deleteUserAccount","apps","length","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","Login","useState","setEmail","setPassword","setError","onChangeHandler","e","currentTarget","name","value","className","md","icon","size","label","autoComplete","autoFocus","group","type","validate","success","required","onChange","color","onClick","preventDefault","signInWithEmailAndPassword","catch","signInWithEmailAndPasswordHandler","to","strong","Register","props","formError","setFormError","history","useHistory","createUserWithEmailAndPasswordHandler","then","res","push","event","UserContext","createContext","UserProvider","state","componentDidMount","onAuthStateChanged","setState","Provider","this","children","Component","MapDetails","React","Crimes","RemoveProfileFavouriteModal","deleteFavourite","updateUserFavourites","onHide","Modal","animation","show","centered","Header","closeButton","Title","id","Footer","Button","variant","Profile","useContext","setMapDetails","setCrimesToDisplay","localFavourites","setLocalFavourites","timestampToDelete","setTimestampToDelete","setShow","showRemoveFavouritesModal","setShowRemoveFavouritesModal","handleClose","useEffect","getUserDetails","collection","onSignOutHandler","signOut","err","deleteUserHandler","alert","Fragment","delay","flush","map","aFavourite","mapDetails","isfavourite","uuid","Body","placeholder","noThrow","_extends","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","_ref8","SvgLogo","_ref","svgRef","titleId","height","viewBox","width","xmlns","ref","ForwardRef","NavBar","click","setClick","closeMobileMenu","Navbar","fixed","Brand","as","NavLink","Nav","Link","NavDropdown","DropdownItem","ResultsData","Search","submitForm","formInputHandler","numberOfMonths","dropHandler","radioButton","radioClickedHandler","submitText","imageOpen","setImageOpen","handleShowImage","onSubmit","checked","block","src","alt","style","position","open","UKMapImage","Dropdown","onSelect","Toggle","Menu","Item","eventKey","getCrimeData","payload","Promise","resolve","axios","post","response","predictions","historicCrimes","noCrimes","policeForce","getCrimeCategory","aCrimeCategory","crimeCategory","getPredictions","getHistoricCrimes","sortCrimesByPercentage","result","sort","crimeA","crimeB","percentage","reverse","populateCrimes","results","crime","percentages","crimeData","occurrences","parseInt","totals","parseFloat","getThreatLevel","threatLevel","formattedCrimeArray","sortedPredictions","counter","crimeType","setSubmitText","setRadioButton","setNumberOfMonths","setLocationName","setLat","setLon","setResultsData","setCrimestoDisplay","isWithinUK","isValidCoordinate","isNameSearch","isNaN","coordinatesWithinUK","Spinner","role","aria-hidden","noCrimesDetected","aLocationName","aLat","aLon","threatlevel","sm","Form","selectedNumberOfMonths","radioSelected","geoapifyAPIKey","crimeCat","getCrimeIcon","isForButton","iconName","iconType","L","iconUrl","iconSize","iconAnchor","popupAnchor","getCenterPoint","Favourite","displayMap","setMap","Col","Card","border","MapContainer","center","zoom","maxZoom","whenCreated","zoomControl","Marker","Popup","TileLayer","attribution","url","bg","slice","ButtonFilter","OverlayTrigger","placement","overlay","Popover","Content","goBack","Favourites","getFavourites","updateMap","favouritesReturned","Container","ButtonBack","opacity","CardDeck","populateDisplayCrimes","crimes","displayCrimes","categoriesToInclude","aCategory","includes","applyFilters","forEach","aCrime","category","AddFavouriteModal","setTitle","charCount","setCharCount","createNewFavourite","mapdetails","maxLength","background","ShowHistoricCrimeModal","resultsData","months","graphData","sortedMonths","finalGraphMonth","getMonth","currentGraphMonth","monthlyStats","getSortedMonths","aCrimeRecord","replace","charAt","toUpperCase","indexOfMonth","aMonth","index","monthlyCrimes","dialogClassName","ResponsiveContainer","AreaChart","animationDuration","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","domain","Tooltip","Area","stackId","stroke","ShowPredictionsModal","crimeColours","aCurrentMonth","chartData","BarChart","layout","barCategoryGap","hide","tickMargin","Bar","radius","LabelList","entry","Cell","CrimeWarningModal","getIncidentText","occurences","text","aThreatLevel","getThreatMessage","RemoveFavouriteModal","setFavouriteButton","ButtonFilterCrime","isActive","changeFilterState","FiltersModal","categories","crimeButtons","setCrimeButtons","getButtonLabel","favouriteFilters","aFavouriteFilter","aLabel","indexOfButtonToUpdate","findIndex","aButton","updatedButtons","newIsActiveStatus","crimeFilter","updateFilteredCrimes","ButtonAddToFavs","setModalShow","ButtonRemoveFromFavs","ButtonShowFilters","ButtonShowPredictions","ButtonShowWarnings","analysisComplete","threatText","ButtonShowHistoricCrimes","MapDisplay","showAddFavouriteModal","setShowAddFavouriteModal","showFiltersModal","setShowFiltersModal","showHistoricCrimeModal","setShowHistoricCrimeModal","showPredictionsModal","setShowPredictionsModal","showWarningsModal","setShowWarningsModal","crimesToDisplay","setTimestamp","showWarningButton","setShowWarningButton","location","setMapFromFavourite","buttonState","predictionsResponse","historicResponse","crimesFiltered","latitude","longitude","aMonthNumber","Application","exact","path","render","component","defaults","withCredentials","App","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.abbe3a87.chunk.js","sourcesContent":["import firebase from \"firebase/app\"; // firebase\r\nimport \"firebase/auth\"; // firebase authentication\r\nimport \"firebase/firestore\"; // firebase firestore\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: \"AIzaSyBT4RoXDLZ505dMhCPkEuYPEeL1EUF_Wh0\",\r\n\tauthDomain: \"safe-streets-app.firebaseapp.com\",\r\n\tprojectId: \"safe-streets-app\",\r\n\tstorageBucket: \"safe-streets-app.appspot.com\",\r\n\tmessagingSenderId: \"400130243033\",\r\n\tappId: \"1:400130243033:web:3439d32591167991e041c8\",\r\n};\r\n\r\n// function which returns the latest user document from firestore\r\nconst getUserDocument = async (uid) => {\r\n\t// no UID supplied, return null\r\n\tif (!uid) {\r\n\t\treturn null;\r\n\t}\r\n\t// else user UID supplied for logged in user\r\n\ttry {\r\n\t\t// get reference to current user document\r\n\t\tconst userDocument = await firestore.doc(`users/${uid}`).get();\r\n\t\treturn {\r\n\t\t\tuid,\r\n\t\t\t...userDocument.data(),\r\n\t\t};\r\n\t} catch (error) {\r\n\t\tconsole.error(\"Error fetching user\", error);\r\n\t}\r\n};\r\n\r\n// function to create a new user with email and password\r\n//TODO add email authenticating\r\nexport const createUserWithEmailAndPassword = async (email, password) => {\r\n\ttry {\r\n\t\tconst { user } = await auth.createUserWithEmailAndPassword(\r\n\t\t\temail,\r\n\t\t\tpassword\r\n\t\t);\r\n\t\tconsole.log(\r\n\t\t\t\"User created with email: \" + user.email + \"\\nUID: \" + user.uid\r\n\t\t); \r\n\t\tgenerateUserDocument(user);\r\n\t\treturn true;\r\n\t} catch (error) {\r\n\t\treturn error.message;\r\n\t}\r\n};\r\n\r\n// function to create a user document //TODO document all functions\r\nexport const generateUserDocument = async (user, additionalData) => {\r\n\t// if user missing, exit\r\n\tif (!user) {\r\n\t\treturn;\r\n\t}\r\n\t// get reference to current user data in firestore by UID\r\n\tconst userRef = firestore.doc(`users/${user.uid}`);\r\n\tconst snapshot = await userRef.get();\r\n\r\n\t// if user is logged in but no firestore document exists\r\n\tif (!snapshot.exists) {\r\n\t\t// get email of currently logged in user\r\n\t\tconst { email } = user;\r\n\t\ttry {\r\n\t\t\tawait userRef.set({\r\n\t\t\t\temail, // set user email\r\n\t\t\t\tfavourites: [], // initialise empty favourites array\r\n\t\t\t\t...additionalData,\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Firebase error: \", error.message);\r\n\t\t}\r\n\t}\r\n\t// call getUserDocument function with user UID\r\n\treturn getUserDocument(user.uid);\r\n};\r\n\r\n// function to add a new favourite to a user collection of favourites\r\nexport const addUserFavourite = async (\r\n\ttitle,\r\n\tallCrimes,\r\n\tlocationName,\r\n\tlat,\r\n\tlon,\r\n\tfilters\r\n) => {\r\n\tvar user = firebase.auth().currentUser;\r\n\tvar options = {\r\n\t\tyear: \"numeric\",\r\n\t\tmonth: \"long\",\r\n\t\tday: \"numeric\",\r\n\t\thour: \"numeric\",\r\n\t\tminute: \"numeric\",\r\n\t\tsecond: \"numeric\",\r\n\t};\r\n\r\n\tconst timestamp = new Date().toLocaleDateString([], options);\r\n\r\n\t// create a new favourite object\r\n\tvar newFavourite = {\r\n\t\ttitle: title,\r\n\t\tallCrimes: allCrimes,\r\n\t\tlocationName: locationName,\r\n\t\tlat: lat,\r\n\t\tlon: lon,\r\n\t\ttimestamp: timestamp,\r\n\t\tfilters: filters,\r\n\t};\r\n\r\n\t// get reference to current user data in firestore by UID\r\n\tconst userRef = firestore.doc(`users/${user.uid}`);\r\n\tconst snapshot = await userRef.get();\r\n\t// if firestore user document was found\r\n\tif (snapshot.exists) {\r\n\t\ttry {\r\n\t\t\tawait userRef.update({\r\n\t\t\t\tfavourites: firebase.firestore.FieldValue.arrayUnion(\r\n\t\t\t\t\tObject.assign({}, newFavourite)\r\n\t\t\t\t),\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error adding favourite\", error);\r\n\t\t}\r\n\t}\r\n\treturn getUserDocument(user.uid);\r\n};\r\n\r\n// function which retrieves the favourites for a user\r\nexport const getUserFavourites = async () => {\r\n\tvar user = firebase.auth().currentUser; //get reference to currently logged in user\r\n\r\n\t// get reference to current user data in firestore by UID\r\n\tconst userRef = firestore.doc(`users/${user.uid}`);\r\n\tconst snapshot = await userRef.get();\r\n\r\n\tvar favourites;\r\n\r\n\t// if firestore user document was found\r\n\tif (snapshot.exists) {\r\n\t\ttry {\r\n\t\t\tfavourites = snapshot.data().favourites;\r\n\t\t\treturn favourites;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error retriving favourites\", error);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// function to remove a favourite from a user's collection of favourites\r\nexport const deleteUserFavourite = async (aTimestamp) => {\r\n\tvar user = firebase.auth().currentUser; //get reference to currently logged in user\r\n\r\n\t// get reference to current user data in firestore by UID\r\n\tconst userRef = firestore.doc(`users/${user.uid}`);\r\n\tconst snapshot = await userRef.get();\r\n\t// if firestore user document was found\r\n\tif (snapshot.exists) {\r\n\t\ttry {\r\n\t\t\tawait userRef.update({\r\n\t\t\t\tfavourites: snapshot\r\n\t\t\t\t\t.data()\r\n\t\t\t\t\t.favourites.filter(\r\n\t\t\t\t\t\t(favourite) => favourite.timestamp !== aTimestamp\r\n\t\t\t\t\t),\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error deleting favourite\", error);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// function to return a single user favourite from a user's collection of favourites\r\nexport const getUserFavourite = async (aTimestamp) => {\r\n\tvar user = firebase.auth().currentUser; //get reference to currently logged in user\r\n\r\n\t// get reference to current user data in firestore by UID\r\n\tconst userRef = firestore.doc(`users/${user.uid}`);\r\n\tconst snapshot = await userRef.get();\r\n\r\n\tvar favourite;\r\n\r\n\t// if firestore user document was found\r\n\tif (snapshot.exists) {\r\n\t\ttry {\r\n\t\t\tfavourite = snapshot.data().favourites.find(\r\n\t\t\t\t({ timestamp }) => timestamp === aTimestamp // find favourite with matching timestamp\r\n\t\t\t);\r\n\t\t\treturn favourite;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error retriving favourite\", error);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// re-authenticate user with password\r\nexport const reauthenticateUser = async (password) => {\r\n\tvar user = firebase.auth().currentUser; //get reference to currently logged in user\r\n\tvar credentials = firebase.auth.EmailAuthProvider.credential(\r\n\t\tuser.email,\r\n\t\tpassword\r\n\t);\r\n\tawait user.reauthenticateWithCredential(credentials);\r\n};\r\n\r\n// function to delete a user document from firestore\r\nexport const deleteUserDocument = async () => {\r\n\tvar user = firebase.auth().currentUser; //get reference to currently logged in user\r\n\r\n\t// get reference to current user data in firestore by UID\r\n\tconst userDocumentRef = firestore.doc(`users/${user.uid}`);\r\n\r\n\t// delete user document from firestore\r\n\tawait userDocumentRef.delete();\r\n};\r\n\r\n// function to delete a user account from firebase (authentication list)\r\nexport const deleteUserAccount = async () => {\r\n\tvar user = firebase.auth().currentUser; //get reference to currently logged in user\r\n\r\n\tawait user.delete(); //delete user authentication account record\r\n};\r\n\r\n// initialise firebase\r\nif (!firebase.apps.length) {\r\n\tfirebase.initializeApp(firebaseConfig);\r\n} else {\r\n\tfirebase.app(); //if already initialized, use that one\r\n}\r\n\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\n","import React, { useState } from \"react\";\r\nimport { auth } from \"../firebase\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//styled components\r\nimport {\r\n\tMDBContainer,\r\n\tMDBRow,\r\n\tMDBCol,\r\n\tMDBCard,\r\n\tMDBCardBody,\r\n\tMDBModalFooter,\r\n\tMDBIcon,\r\n\tMDBCardHeader,\r\n\tMDBBtn,\r\n\tMDBInput,\r\n} from \"mdbreact\";\r\n\r\nconst Login = () => {\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [error, setError] = useState(null);\r\n\r\n\t// sign in user with firebase sign in method\r\n\tconst signInWithEmailAndPasswordHandler = (e, email, password) => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// sign user in with firebase sign in method\r\n\t\tauth.signInWithEmailAndPassword(email, password).catch((error) => {\r\n\t\t\tsetError(\"\" + error);\r\n\t\t});\r\n\t};\r\n\r\n\t// function to handle user form input\r\n\tconst onChangeHandler = (e) => {\r\n\t\tconst { name, value } = e.currentTarget;\r\n\t\t// if email input set email state\r\n\t\tif (name === \"email\") {\r\n\t\t\tsetEmail(value);\r\n\t\t} else if (name === \"password\") {\r\n\t\t\t// if password input, set password state\r\n\t\t\tsetPassword(value);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MDBContainer className=\"login-container\">\r\n\t\t\t<MDBRow>\r\n\t\t\t\t<MDBCol md=\"7\">\r\n\t\t\t\t\t<MDBCard>\r\n\t\t\t\t\t\t<MDBCardBody>\r\n\t\t\t\t\t\t\t<MDBCardHeader className=\"form-header bg-primary rounded\">\r\n\t\t\t\t\t\t\t\t<h1 className=\"my-3\">\r\n\t\t\t\t\t\t\t\t\t<MDBIcon\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"login-icon-lock\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t</MDBCardHeader>\r\n\t\t\t\t\t\t\t<form className=\"login-sign-header\">\r\n\t\t\t\t\t\t\t\t<div className=\"grey-text login-sign-topinput\">\r\n\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Type your email\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"envelope\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t\t\t\t\t\terror=\"wrong\"\r\n\t\t\t\t\t\t\t\t\t\tsuccess=\"right\"\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChangeHandler(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Type your password\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChangeHandler(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"text-center mt-4\">\r\n\t\t\t\t\t\t\t\t\t{error !== null && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"py-4 bg-red-600 w-full text-red text-center mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn-login mb-3\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsignInWithEmailAndPasswordHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\te,\r\n\t\t\t\t\t\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\t\t\t\t\t\tpassword\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t\t<MDBModalFooter>\r\n\t\t\t\t\t\t\t\t<div className=\"font-weight-light main-link\">\r\n\t\t\t\t\t\t\t\t\tDon't have an account?\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tto=\"/register\"\r\n\t\t\t\t\t\t\t\t\t\tstrong=\"true\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"py-4 font-weight-bold ml-1 w-full text-red text-center mb-3\">\r\n\t\t\t\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</MDBModalFooter>\r\n\t\t\t\t\t\t</MDBCardBody>\r\n\t\t\t\t\t</MDBCard>\r\n\t\t\t\t</MDBCol>\r\n\t\t\t</MDBRow>\r\n\t\t</MDBContainer>\r\n\t);\r\n};\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { createUserWithEmailAndPassword } from \"../firebase\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\n//styled components\r\nimport {\r\n\tMDBContainer,\r\n\tMDBRow,\r\n\tMDBCol,\r\n\tMDBCard,\r\n\tMDBCardBody,\r\n\tMDBModalFooter,\r\n\tMDBIcon,\r\n\tMDBCardHeader,\r\n\tMDBBtn,\r\n\tMDBInput,\r\n} from \"mdbreact\";\r\n\r\nconst Register = (props) => {\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [formError, setFormError] = useState(null);\r\n\tconst history = useHistory();\r\n\r\n\tconst createUserWithEmailAndPasswordHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tcreateUserWithEmailAndPassword(email, password).then((res) => {\r\n\t\t\tif (res !== true) {\r\n\t\t\t\t// error creating user\r\n\t\t\t\tsetFormError(res); // set error message\r\n\t\t\t} else {\r\n\t\t\t\tlet path = `/search`; // success, redirect to search page\r\n\t\t\t\thistory.push(path);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst onChangeHandler = (e) => {\r\n\t\tconst { name, value } = e.currentTarget;\r\n\t\tif (name === \"email\") {\r\n\t\t\tsetEmail(value);\r\n\t\t} else if (name === \"password\") {\r\n\t\t\tsetPassword(value);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MDBContainer className=\"register-container\">\r\n\t\t\t<MDBRow>\r\n\t\t\t\t<MDBCol md=\"7\">\r\n\t\t\t\t\t<MDBCard>\r\n\t\t\t\t\t\t<MDBCardBody>\r\n\t\t\t\t\t\t\t<MDBCardHeader className=\"form-header bg-primary rounded\">\r\n\t\t\t\t\t\t\t\t<h1 className=\"my-3\">\r\n\t\t\t\t\t\t\t\t\t<MDBIcon\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"register-icon-user\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"user-circle\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t</MDBCardHeader>\r\n\t\t\t\t\t\t\t<form className=\"login-sign-header\">\r\n\t\t\t\t\t\t\t\t<div className=\"grey-text login-sign-topinput\">\r\n\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Type your email\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"envelope\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t\t\t\t\t\terror=\"wrong\"\r\n\t\t\t\t\t\t\t\t\t\tsuccess=\"right\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChangeHandler(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Type your password\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"new-password\"\r\n\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChangeHandler(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"text-center mt-4\">\r\n\t\t\t\t\t\t\t\t\t{formError !== null && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"py-4 bg-red-600 w-full text-red text-center mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t{formError}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn-signup mb-3\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\r\n\t\t\t\t\t\t\t\t\t\t\tcreateUserWithEmailAndPasswordHandler(\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\t\t\t\t\t\tpassword\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t\t<MDBModalFooter>\r\n\t\t\t\t\t\t\t\t<div className=\"font-weight-light main-link\">\r\n\t\t\t\t\t\t\t\t\tAlready have an account?\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tto=\"/\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"py-4 font-weight-bold ml-1 w-full text-red text-center mb-3\">\r\n\t\t\t\t\t\t\t\t\t\tLogin here\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</MDBModalFooter>\r\n\t\t\t\t\t\t</MDBCardBody>\r\n\t\t\t\t\t</MDBCard>\r\n\t\t\t\t</MDBCol>\r\n\t\t\t</MDBRow>\r\n\t\t</MDBContainer>\r\n\t);\r\n};\r\nexport default Register;\r\n","import React, { Component, createContext } from \"react\";\r\nimport { auth } from \"../firebase\"; // firebase authentication\r\n\r\n// context for user\r\nexport const UserContext = createContext({ user: null });\r\n\r\nclass UserProvider extends Component {\r\n\t// hold reference to the currently logged in user\r\n\tstate = {\r\n\t\tuser: null,\r\n\t};\r\n\r\n\tcomponentDidMount = async () => {\r\n\t\tawait auth.onAuthStateChanged((user) => {\r\n\t\t\tthis.setState({ user: user });\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<UserContext.Provider value={this.state.user}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</UserContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\nexport default UserProvider;\r\n","import React from \"react\";\r\n\r\nexport const MapDetails = React.createContext();\r\n","import React from \"react\";\r\n\r\nexport const Crimes = React.createContext();\r\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { deleteUserFavourite } from \"../firebase\";\r\n\r\nconst RemoveProfileFavouriteModal = (props) => {\r\n\t\t\r\n\tconst deleteFavourite = async () => {\t\t\r\n\t\tawait deleteUserFavourite(props.timestamp);\t\r\n\t\tprops.updateUserFavourites();\t\r\n\t\tprops.onHide(); //hide modal interface\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\t\t\t\r\n\t\t\tsize=\"lg\"\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tAre you sure you want to delete this favourite?\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"green\" onClick={props.onHide}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"red\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tonClick={() => deleteFavourite()}>\r\n\t\t\t\t\tDelete Favourite\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RemoveProfileFavouriteModal;\r\n//onClick={() => deleteFavourite()}>","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"../auth/UserProvider\";\r\nimport { MapDetails } from \"../contexts/MapDetailsContext\";\r\nimport { Crimes } from \"../contexts/CrimeDataContext\";\r\nimport { Redirect } from \"@reach/router\";\r\nimport {\r\n\tauth,\r\n\tdeleteUserDocument,\r\n\tdeleteUserAccount,\r\n\treauthenticateUser,\r\n} from \"../firebase\";\r\nimport uuid from \"react-uuid\";\r\nimport firebase from \"firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n\tMDBCard,\r\n\tMDBCardBody,\r\n\tMDBCardHeader,\r\n\tMDBCardLink,\r\n\tMDBListGroup,\r\n\tMDBListGroupItem,\r\n\tMDBCardFooter,\r\n\tMDBCardText,\r\n\tMDBBtn,\r\n\tMDBContainer,\r\n\tMDBIcon,\r\n\tMDBInput,\r\n} from \"mdb-react-ui-kit\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport FadeIn from \"react-fade-in\";\r\nimport RemoveProfileFavouriteModal from \"../modals/RemoveProfileFavouriteModal\";\r\n\r\nconst Profile = () => {\r\n\tconst user = useContext(UserContext);\r\n\tconst [mapDetails, setMapDetails] = useContext(MapDetails);\r\n\tconst [crimestoDisplay, setCrimesToDisplay] = useContext(Crimes);\r\n\tconst [localFavourites, setLocalFavourites] = useState([]);\r\n\tconst [timestampToDelete, setTimestampToDelete] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [error, setError] = useState(null);\r\n\tconst [show, setShow] = useState(false);\r\n\tconst [showRemoveFavouritesModal, setShowRemoveFavouritesModal] =\r\n\t\tuseState(false);\r\n\tconst handleClose = () => setShow(false);\r\n\tconst handleShow = () => setShow(true);\r\n\tconst history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tgetUserDetails();\r\n\t\t//eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\t// function which retrieves the favourites for a user\r\n\tconst getUserDetails = async () => {\r\n\t\tif (user) {\r\n\t\t\tvar userRef = await firebase\r\n\t\t\t\t.firestore()\r\n\t\t\t\t.collection(\"users\")\r\n\t\t\t\t.doc(user.uid);\r\n\t\t\tuserRef\r\n\t\t\t\t.get()\r\n\t\t\t\t.then(function (doc) {\r\n\t\t\t\t\tif (doc.exists) {\r\n\t\t\t\t\t\t// set favourites to all user favourites\r\n\t\t\t\t\t\tsetLocalFavourites(doc.data().favourites);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"No favourites!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function (error) {\r\n\t\t\t\t\tconsole.log(\"Error getting favourites:\", error);\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// function which handles user input changes\r\n\tconst onChangeHandler = (e) => {\r\n\t\tconst { value } = e.currentTarget;\r\n\t\tsetPassword(value);\r\n\t};\r\n\r\n\t// sign out user\r\n\tconst onSignOutHandler = async () => {\r\n\t\tawait auth\r\n\t\t\t.signOut()\r\n\t\t\t.then((data) => console.log(data))\r\n\t\t\t.catch((err) => console.log(err));\r\n\t};\r\n\r\n\t// function to delete the current user's account\r\n\tconst deleteUserHandler = async (e) => {\r\n\t\t// re-authenticate user with password input\r\n\t\tawait reauthenticateUser(password)\r\n\t\t\t.then((res) => {\r\n\t\t\t\t// delete all user document data from firestore\r\n\t\t\t\tdeleteUserDocument()\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t// delete user authentication account entry from firebase\r\n\t\t\t\t\t\tdeleteUserAccount()\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\t\"User Account successfully deleted\"\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t\t\t\"Your account has been sucessfully deleted.\"\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t// redirect to register page\r\n\t\t\t\t\t\t\t\tlet path = `/register`;\r\n\t\t\t\t\t\t\t\thistory.push(path);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"Error deleting user data\", error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tsetError(error.message);\r\n\t\t\t\t\t\tconsole.log(\"Error deleting user document\", error);\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tsetError(error.message);\r\n\t\t\t\tconsole.log(\"Error deleting user account\", error);\r\n\t\t\t});\r\n\t};\r\n\r\n\t// display favourited map which was clicked on\r\n\tconst displayMap = (aFavourite) => {\r\n\t\tsetMapDetails((mapDetails) => ({\r\n\t\t\tallCrimes: aFavourite.allCrimes,\r\n\t\t\tlocationName: aFavourite.locationName,\r\n\t\t\tlat: aFavourite.lat,\r\n\t\t\tlon: aFavourite.lon,\r\n\t\t\tfilters: aFavourite.filters,\r\n\t\t}));\r\n\r\n\t\tsetCrimesToDisplay(aFavourite.allCrimes);\r\n\r\n\t\t// redirect to results page\r\n\t\thistory.push(`/mapdisplay`, {\r\n\t\t\tisfavourite: \"true\", // if map a previously favourited or new search\r\n\t\t\ttimestamp: aFavourite.timestamp,\r\n\t\t});\r\n\t};\r\n\r\n\t// function to display confirmation modal\r\n\tconst displayConfirmationModal = (aTimestamp) => {\r\n\t\tsetTimestampToDelete(aTimestamp);\r\n\t\tsetShowRemoveFavouritesModal(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{user ? (\r\n\t\t\t\t<FadeIn delay={250}>\r\n\t\t\t\t\t<MDBCard className=\"profile-card\">\r\n\t\t\t\t\t\t<MDBCardHeader className=\"profile-heading\">\r\n\t\t\t\t\t\t\t<h1 className=\"profile-main-heading\">Profile</h1>\r\n\t\t\t\t\t\t</MDBCardHeader>\r\n\t\t\t\t\t\t<MDBCardBody>\r\n\t\t\t\t\t\t\t<MDBCardText>\r\n\t\t\t\t\t\t\t\t<label className=\"profile-text\">\r\n\t\t\t\t\t\t\t\t\tEmail: {user.email}\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</MDBCardText>\r\n\t\t\t\t\t\t</MDBCardBody>\r\n\t\t\t\t\t\t<MDBCardHeader className=\"profile-heading\">\r\n\t\t\t\t\t\t\t<h2 className=\"profile-main-heading\">\r\n\t\t\t\t\t\t\t\tFavourites ({localFavourites.length})\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t</MDBCardHeader>\r\n\t\t\t\t\t\t<MDBListGroup flush>\r\n\t\t\t\t\t\t\t{localFavourites.map((favourite) => (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\tclassName=\"profile-list-favourite-item\">\r\n\t\t\t\t\t\t\t\t\t<MDBListGroupItem className=\"profile-favourites-list\">\r\n\t\t\t\t\t\t\t\t\t\t<MDBCardLink>\r\n\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"profile-text profile-favourite-entry\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayMap(favourite);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{favourite.title} timestamp:{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{favourite.timestamp}\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCardLink>\r\n\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"far fa-trash-alt fa-lg trash-profile\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplayConfirmationModal(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfavourite.timestamp\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</MDBListGroupItem>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</MDBListGroup>\r\n\t\t\t\t\t\t<RemoveProfileFavouriteModal\r\n\t\t\t\t\t\t\tanimation={false}\r\n\t\t\t\t\t\t\tshow={showRemoveFavouritesModal}\r\n\t\t\t\t\t\t\tonHide={() => setShowRemoveFavouritesModal(false)}\r\n\t\t\t\t\t\t\tupdateUserFavourites={getUserDetails}\r\n\t\t\t\t\t\t\ttimestamp={timestampToDelete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<MDBCardFooter className=\"profile-footer\">\r\n\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tclassName=\"mb-3 profile-footer-button\"\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\tonClick={onSignOutHandler}>\r\n\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t\t<MDBBtn\r\n\t\t\t\t\t\t\t\tcolor=\"danger\"\r\n\t\t\t\t\t\t\t\tclassName=\"mb-3 profile-footer-button\"\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\tonClick={handleShow}>\r\n\t\t\t\t\t\t\t\tDelete Account\r\n\t\t\t\t\t\t\t</MDBBtn>\r\n\t\t\t\t\t\t</MDBCardFooter>\r\n\t\t\t\t\t\t<Modal\r\n\t\t\t\t\t\t\tshow={show}\r\n\t\t\t\t\t\t\tonHide={handleClose}\r\n\t\t\t\t\t\t\tanimation={false}>\r\n\t\t\t\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t\t\t\t<MDBIcon\r\n\t\t\t\t\t\t\t\t\tclassName=\"iconDeleteAccount\"\r\n\t\t\t\t\t\t\t\t\tsize=\"md\"\r\n\t\t\t\t\t\t\t\t\ticon=\"user\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label className=\"deleteAccountEmail\">\r\n\t\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<Modal.Title>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tTo permanently delete your account,\r\n\t\t\t\t\t\t\t\t\t\tplease confirm your password.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t\t\t\t</MDBContainer>\r\n\t\t\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter your password...\"\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => onChangeHandler(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"text-center mt-4 delete-profile-error\">\r\n\t\t\t\t\t\t\t\t\t{error !== null && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"py-4 bg-red-600 w-full text-red text-center mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t\t\t<Button variant=\"primary\" onClick={handleClose}>\r\n\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\t\t\t\tonClick={deleteUserHandler}>\r\n\t\t\t\t\t\t\t\t\tDelete My Account\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t</MDBCard>\r\n\t\t\t\t</FadeIn>\r\n\t\t\t) : (\r\n\t\t\t\t<Redirect noThrow to=\"/\" />\r\n\t\t\t)}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\nexport default Profile;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m193.789062 43.890625c7.757813-18.617187 22.816407-33.234375 41.652344-40.441406 10.695313-4.597657 22.804688-4.597657 33.5 0 18.835938 7.207031 33.894532 21.824219 41.652344 40.441406zm0 0\",\n  fill: \"#d1d4d1\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m484.761719 390.488281 10.414062 8.675781c3.902344 4.859376 7.289063 7.636719 7.894531 13.972657 1.476563 14.316406-9.457031 25.859375-20.046874 33.84375-10.5625 7.535156-21.910157 13.910156-33.84375 19.003906-57.109376 25.277344-118.914063 38.203125-181.367188 37.921875-2.863281 0-5.726562 0-8.59375.089844-2.339844 0-4.683594 0-7.027344-.089844h-.609375c-2.339843.089844-4.683593.089844-7.027343.089844-2.863282-.089844-5.726563-.089844-8.589844-.089844-62.453125.28125-124.261719-12.644531-181.371094-37.921875-11.96875-5.074219-23.347656-11.449219-33.929688-19.003906-10.5-7.984375-21.433593-19.527344-20.046874-33.84375 1.027343-5.417969 3.835937-10.335938 7.984374-13.972657l10.414063-8.675781zm0 0\",\n  fill: \"#35495e\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m451.785156 362.976562 32.976563 27.511719s-1.214844 1.214844-3.644531 3.382813c-1.476563 1.214844-3.386719 2.863281-5.730469 4.6875-1.214844.953125-2.515625 1.996094-3.902344 3.035156-1.417969 1.238281-2.929687 2.371094-4.511719 3.386719l-2.605468 1.820312c-12.316407 8.730469-25.316407 16.449219-38.875 23.085938-38.445313 19.089843-95.632813 29.503906-171.566407 30.023437h-4.078125c-75.929687-.519531-133.121094-10.933594-171.5625-30.023437-13.5625-6.636719-26.5625-14.355469-38.878906-23.085938l-2.601562-1.820312c-1.585938-1.015625-3.09375-2.148438-4.511719-3.386719-1.390625-1.039062-2.691407-2.082031-3.90625-3.035156-2.34375-1.824219-4.253907-3.472656-5.726563-4.6875-2.429687-2.167969-3.644531-3.382813-3.644531-3.382813l33.320313-27.769531zm0 0\",\n  fill: \"#2c3e50\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m443.105469 308.742188c0 7.722656-.171875 15.445312-.691407 22.996093l-.4375 2.167969c-2.339843-.433594-4.769531 17.007812-7.289062 17.617188-119.832031 29.851562-245.160156 29.851562-364.992188 0-2.519531-.609376-4.949218-18.050782-7.292968-17.617188l-.433594-2.167969c-.519531-7.550781-.691406-15.273437-.691406-22.996093 0-130.429688 42.433594-234.394532 132.511718-264.851563 18.828126-6.257813 38.5625-9.367187 58.402344-9.199219 19.839844-.167968 39.574219 2.941406 58.402344 9.199219 90.078125 30.457031 132.511719 134.421875 132.511719 264.851563zm0 0\",\n  fill: \"#35495e\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m454.648438 359.246094c-.117188.125-.207032.273437-.261719.433594-.714844 1.210937-1.589844 2.320312-2.601563 3.296874-1.082031 1.089844-2.308594 2.023438-3.644531 2.777344-1.5625.964844-3.257813 1.695313-5.035156 2.171875-125.371094 31.152344-256.457031 31.152344-381.828125 0-1.777344-.476562-3.472656-1.207031-5.035156-2.171875-1.460938-.785156-2.78125-1.8125-3.90625-3.035156-1.035157-1.023438-1.914063-2.191406-2.601563-3.472656-2.300781-3.835938-2.925781-8.445313-1.734375-12.757813 1.246094-4.457031 4.253906-8.214843 8.328125-10.414062 1.523437-.921875 3.199219-1.570313 4.949219-1.90625l1.125-.261719c2.421875-.429688 4.90625-.339844 7.292968.261719 119.832032 29.851562 245.160157 29.851562 364.992188 0 2.386719-.601563 4.871094-.691407 7.289062-.261719l1.128907.261719c6.367187 1.332031 11.472656 6.074219 13.277343 12.320312 1.191407 4.3125.5625 8.921875-1.734374 12.757813zm0 0\",\n  fill: \"#2c2f38\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m274.753906 111.925781c16.742188 7.28125 34.855469 10.863281 53.109375 10.5.953125-.089843 1.824219-.089843 2.691407-.175781 2.445312-.128906 4.832031.789062 6.554687 2.53125 1.726563 1.742188 2.625 4.136719 2.46875 6.582031 0 .867188-.085937 1.734375-.085937 2.601563-.648438 25.445312 9.503906 49.972656 27.941406 67.515625.695312.609375 1.304687 1.214843 1.910156 1.824219 1.859375 1.597656 2.929688 3.925781 2.929688 6.375 0 2.453124-1.070313 4.78125-2.929688 6.378906-.605469.609375-1.214844 1.128906-1.910156 1.738281-18.429688 17.585937-28.574219 42.132813-27.941406 67.601563 0 .867187.085937 1.734374.085937 2.601562.15625 2.445312-.742187 4.839844-2.46875 6.582031-1.722656 1.742188-4.109375 2.660157-6.554687 2.53125-.867188-.089843-1.738282-.089843-2.691407-.175781-25.445312-.574219-49.957031 9.601562-67.515625 28.03125-.621094.59375-1.203125 1.230469-1.734375 1.910156-1.644531 1.808594-3.976562 2.839844-6.421875 2.839844-2.445312 0-4.777344-1.03125-6.421875-2.839844-.53125-.679687-1.113281-1.316406-1.734375-1.910156-17.558594-18.429688-42.070312-28.605469-67.515625-28.03125-.953125.085938-1.824219.085938-2.691406.175781-2.445313.128907-4.832031-.789062-6.554687-2.53125-1.726563-1.742187-2.625-4.136719-2.46875-6.582031 0-.867188.085937-1.734375.085937-2.601562.632813-25.46875-9.515625-50.015626-27.941406-67.601563-.695313-.609375-1.304688-1.128906-1.910157-1.738281-1.859374-1.597656-2.929687-3.925782-2.929687-6.378906 0-2.449219 1.070313-4.777344 2.929687-6.375.605469-.609376 1.214844-1.214844 1.910157-1.824219 18.4375-17.542969 28.589843-42.070313 27.941406-67.515625 0-.867188-.085937-1.734375-.085937-2.601563-.15625-2.445312.742187-4.839843 2.46875-6.582031 1.722656-1.742188 4.109374-2.660156 6.554687-2.53125.867187.085938 1.738281.085938 2.691406.175781 18.253907.363281 36.367188-3.21875 53.109375-10.5\",\n  fill: \"#d1d4d1\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m321.613281 208.25c0 38.339844-31.082031 69.421875-69.421875 69.421875s-69.421875-31.082031-69.421875-69.421875c0-38.34375 31.082031-69.425781 69.421875-69.425781s69.421875 31.082031 69.421875 69.425781zm0 0\",\n  fill: \"#5e5f62\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m286.902344 208.25c0 19.171875-15.539063 34.710938-34.710938 34.710938s-34.710937-15.539063-34.710937-34.710938 15.539062-34.710938 34.710937-34.710938 34.710938 15.539063 34.710938 34.710938zm0 0\",\n  fill: \"#d1d4d1\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m252.191406 69.402344c53.542969-15.300782 32.925782 30.078125 27.285156 41.054687-.742187 1.445313-2.230468 2.347657-3.855468 2.335938h-46.859375c-1.625.011719-3.113281-.890625-3.855469-2.335938-5.640625-10.976562-26.257812-56.355469 27.285156-41.054687\",\n  fill: \"#bdc3c7\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m252.191406 95.4375c-4.792968 0-8.679687-3.886719-8.679687-8.679688v-26.035156c0-4.792968 3.886719-8.675781 8.679687-8.675781 4.792969 0 8.679688 3.882813 8.679688 8.675781v26.035156c0 4.792969-3.886719 8.679688-8.679688 8.679688zm0 0\",\n  fill: \"#e6e7e8\"\n});\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: \"40pt\",\n    viewBox: \"0 0 503 503.9947\",\n    width: \"40pt\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.ac4324cd.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../auth/UserProvider\";\r\nimport { ReactComponent as Logo } from \"../images/logo.svg\";\r\nimport { auth } from \"../firebase\";\r\nimport DropdownItem from \"react-bootstrap/esm/DropdownItem\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport NavDropdown from \"react-bootstrap/NavDropdown\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst NavBar = (props) => {\r\n\tconst user = useContext(UserContext);\r\n\tconst [click, setClick] = useState(false);\r\n\tconst handleClick = () => setClick(!click);\r\n\tconst closeMobileMenu = () => setClick(false);\r\n\r\n\treturn (\r\n\t\t<Navbar className=\"navbar-full\" fixed=\"top\">\r\n\t\t\t<Navbar.Brand as={NavLink} to=\"/\" className=\"navbar-logo\">\r\n\t\t\t\t<Logo />\r\n\t\t\t\t<div className=\"navbar-logo-text\">\r\n\t\t\t\t\t<h1>Safe Streets</h1>\r\n\t\t\t\t</div>\r\n\t\t\t</Navbar.Brand>\r\n\t\t\t{user ? (\r\n\t\t\t\t<Nav>\r\n\t\t\t\t\t<div className=\"menu-icon\" onClick={handleClick}>\r\n\t\t\t\t\t\t<i className={click ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<li className=\"nav-item mobile-show mobile-nav-search\">\r\n\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\tto=\"/search\"\r\n\t\t\t\t\t\t\tonClick={closeMobileMenu}>\r\n\t\t\t\t\t\t\t<i className=\"fas fa-search fa-2x mobile-search\" />\r\n\t\t\t\t\t\t\t<label className=\"nav-icon-label search-icon-label\">\r\n\t\t\t\t\t\t\t\tSearch\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<ul className={click ? \"nav-menu active\" : \"nav-menu\"}>\r\n\t\t\t\t\t\t<li className=\"nav-item mobile-hide\">\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\t\tto=\"/search\"\r\n\t\t\t\t\t\t\t\tonClick={closeMobileMenu}>\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-search fa-2x mobile-icon\" />\r\n\t\t\t\t\t\t\t\t<label className=\"nav-icon-label search-icon-label\">\r\n\t\t\t\t\t\t\t\t\tSearch\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\t\tto=\"/favourites\"\r\n\t\t\t\t\t\t\t\tonClick={closeMobileMenu}>\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-bookmark fa-2x mobile-icon\" />\r\n\t\t\t\t\t\t\t\t<label className=\"nav-icon-label label-dropdown favourites-dropdown\">\r\n\t\t\t\t\t\t\t\t\tFavourites\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t\t<li className=\"nav-item mobile-show\">\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\tclassName=\"user-dropdown-button\"\r\n\t\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\t\t\tonClick={closeMobileMenu}>\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-user fa-2x mobile-icon\" />\r\n\t\t\t\t\t\t\t\t<label className=\"nav-icon-label label-dropdown\">\r\n\t\t\t\t\t\t\t\t\tProfile\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t\t<li className=\"nav-item mobile-show\">\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\tclassName=\"user-dropdown-button\"\r\n\t\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\t\tto=\"/\"\r\n\t\t\t\t\t\t\t\tonClick={() => auth.signOut()}>\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-sign-out-alt fa-2x mobile-icon\" />\r\n\t\t\t\t\t\t\t\t<label className=\"nav-icon-label label-dropdown\">\r\n\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\tclassName=\"mobile-hide\"\r\n\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t<i className=\"fa fa-user fa-2x mobile-icon\" />\r\n\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t<DropdownItem\r\n\t\t\t\t\t\t\t\tclassName=\"dropdown-button\"\r\n\t\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\t\t\tonClick={closeMobileMenu}>\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tid=\"dropdownProfileIcon\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"fas fa-user fa-lg\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label className=\"dropdown-text\">Profile</label>\r\n\t\t\t\t\t\t\t</DropdownItem>\r\n\t\t\t\t\t\t\t<DropdownItem\r\n\t\t\t\t\t\t\t\tclassName=\"dropdown-button\"\r\n\t\t\t\t\t\t\t\tas={NavLink}\r\n\t\t\t\t\t\t\t\tto=\"/\"\r\n\t\t\t\t\t\t\t\tonClick={() => auth.signOut()}>\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tid=\"dropdownLogoutIcon\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"fas fa-sign-out-alt fa-2x\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label className=\"dropdown-text\">Logout</label>\r\n\t\t\t\t\t\t\t</DropdownItem>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</Nav>\r\n\t\t\t) : (<Nav> </Nav>) }\r\n\t\t</Navbar>\r\n\t);\r\n};\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\n\r\nexport const ResultsData = React.createContext();\r\n","export default __webpack_public_path__ + \"static/media/ukVectorGuide.675d95a8.svg\";","import React, { useState } from \"react\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport UKMapImage from \"../images/ukVectorGuide.svg\";\r\nimport UKIconImage from \"../images/uk-icon.png\";\r\n\r\n// style components\r\nimport { MDBBtn, MDBInput } from \"mdbreact\";\r\n\r\nconst Search = (props) => {\r\n\tconst {\r\n\t\tsubmitForm,\r\n\t\tformInputHandler,\r\n\t\tlocationName,\r\n\t\tlat,\r\n\t\tlon,\r\n\t\tnumberOfMonths,\r\n\t\tdropHandler,\r\n\t\tradioButton,\r\n\t\tradioClickedHandler,\r\n\t\tsubmitText,\r\n\t} = props;\r\n\r\n\tlet [imageOpen, setImageOpen] = useState(false);\r\n\r\n\t// map guide image popup for uk\r\n\tconst handleShowImage = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetImageOpen(!imageOpen);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={submitForm}>\r\n\t\t\t<fieldset\r\n\t\t\t\tonClick={(e) => radioClickedHandler(\"0\")}\r\n\t\t\t\tclassName={\r\n\t\t\t\t\tradioButton === \"0\"\r\n\t\t\t\t\t\t? \"selectedFieldSet\"\r\n\t\t\t\t\t\t: \"notSelectedFieldSet\"\r\n\t\t\t\t}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\tSearch by location (England)\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-radio\"\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tchecked={radioButton === \"0\"}\r\n\t\t\t\t\t\tonClick={(e) => radioClickedHandler(\"0\")}\r\n\t\t\t\t\t\tonChange={formInputHandler}\r\n\t\t\t\t\t\tid=\"searchRadioStreet\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<label className=\"inputLabels\">Street address or town</label>\r\n\t\t\t\t<MDBInput\r\n\t\t\t\t\tautoFocus={radioButton === \"0\" ? true : false}\r\n\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\ticon=\"road\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"locationName\"\r\n\t\t\t\t\tvalue={locationName}\r\n\t\t\t\t\tonChange={formInputHandler}\r\n\t\t\t\t\tonClick={(e) => radioClickedHandler(\"0\")}\r\n\t\t\t\t/>\r\n\t\t\t</fieldset>\r\n\t\t\t<fieldset\r\n\t\t\t\tonClick={(e) => radioClickedHandler(\"1\")}\r\n\t\t\t\tclassName={\r\n\t\t\t\t\tradioButton === \"1\"\r\n\t\t\t\t\t\t? \"selectedFieldSet\"\r\n\t\t\t\t\t\t: \"notSelectedFieldSet\"\r\n\t\t\t\t}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t{\" \"}\r\n\t\t\t\t\tSearch by latitude and longitude\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form-radio\"\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tchecked={radioButton === \"1\"}\r\n\t\t\t\t\t\tonClick={(e) => radioClickedHandler(\"1\")}\r\n\t\t\t\t\t\tonChange={formInputHandler}\r\n\t\t\t\t\t\tid=\"searchRadioLatLon\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<label className=\"inputLabels\">Latitude</label>\r\n\t\t\t\t<MDBInput\r\n\t\t\t\t\tautoFocus={radioButton === \"1\" ? true : false}\r\n\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\ticon=\"map-marker-alt\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"lat\"\r\n\t\t\t\t\tvalue={lat}\r\n\t\t\t\t\tonChange={formInputHandler}\r\n\t\t\t\t\tonClick={(e) => radioClickedHandler(\"1\")}\r\n\t\t\t\t/>\r\n\t\t\t\t<label className=\"inputLabels\">Longitude</label>\r\n\t\t\t\t<MDBInput\r\n\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\ticon=\"map-marker-alt\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tname=\"lon\"\r\n\t\t\t\t\tvalue={lon}\r\n\t\t\t\t\tonChange={formInputHandler}\r\n\t\t\t\t\tonClick={(e) => radioClickedHandler(\"1\")}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<MDBBtn\r\n\t\t\t\t\tid=\"showMapGuide\"\r\n\t\t\t\t\tcolor=\"warning\"\r\n\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\tblock\r\n\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\tonClick={handleShowImage}>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"mapicon\"\r\n\t\t\t\t\t\tsrc={UKIconImage}\r\n\t\t\t\t\t\tonClick={handleShowImage}\r\n\t\t\t\t\t\talt=\"Outline of the UK Map\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\tUK Map boundary guide\r\n\t\t\t\t</MDBBtn>\r\n\r\n\t\t\t\t{imageOpen && (\r\n\t\t\t\t\t<dialog\r\n\t\t\t\t\t\tclassName=\"dialog\"\r\n\t\t\t\t\t\tstyle={{ position: \"absolute\" }}\r\n\t\t\t\t\t\topen\r\n\t\t\t\t\t\tonClick={handleShowImage}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tclassName=\"uk-guide-map\"\r\n\t\t\t\t\t\t\tsrc={UKMapImage}\r\n\t\t\t\t\t\t\tonClick={handleShowImage}\r\n\t\t\t\t\t\t\talt=\"UK Map\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</dialog>\r\n\t\t\t\t)}\r\n\t\t\t</fieldset>\r\n\t\t\t<label className=\"monthsInputLabel\">\r\n\t\t\t\tNumber of month's records to include?\r\n\t\t\t</label>\r\n\t\t\t<Dropdown\r\n\t\t\t\tname=\"monthsDropdown\"\r\n\t\t\t\tid=\"dropdown-months-button\"\r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\tonSelect={(e) => dropHandler(e)}>\r\n\t\t\t\t<Dropdown.Toggle variant=\"danger\" id=\"dropdown-months-toggle\">\r\n\t\t\t\t\t{numberOfMonths} months\r\n\t\t\t\t</Dropdown.Toggle>\r\n\t\t\t\t<Dropdown.Menu>\r\n\t\t\t\t\t<Dropdown.Item eventKey=\"3\">3 Months</Dropdown.Item>\r\n\t\t\t\t\t<Dropdown.Item eventKey=\"6\">6 Months</Dropdown.Item>\r\n\t\t\t\t\t<Dropdown.Item eventKey=\"12\">12 Months</Dropdown.Item>\r\n\t\t\t\t</Dropdown.Menu>\r\n\t\t\t</Dropdown>\r\n\r\n\t\t\t<div className=\"text-center mt-4\">\r\n\t\t\t\t<MDBBtn\r\n\t\t\t\t\tid=\"searchSubmitButton\"\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\tclassName=\"mb-3 submit-search-btn\"\r\n\t\t\t\t\tblock\r\n\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\ttype=\"submit\">\r\n\t\t\t\t\t{submitText}\r\n\t\t\t\t</MDBBtn>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Search;\r\n","export default \"data:image/png;base64,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\"","import axios from \"axios\";\r\n\r\nexport const getCrimeData = async (payload) => {\r\n\treturn new Promise((resolve) => {\r\n\t\taxios\r\n\t\t\t.post(\"http://localhost:4000/api/map\", payload)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconst response = {\r\n\t\t\t\t\tpredictions: res.data.predictions,\r\n\t\t\t\t\thistoricCrimes: res.data.historicCrimes,\r\n\t\t\t\t\tlocationName: res.data.locationName,\r\n\t\t\t\t\tlat: res.data.lat,\r\n\t\t\t\t\tlon: res.data.lon,\r\n\t\t\t\t\tnoCrimes: res.data.noCrimes,\r\n\t\t\t\t\tpoliceForce: res.data.policeForce,\r\n\t\t\t\t\tallCrimes: res.data.allCrimes,\r\n\t\t\t\t};\r\n\t\t\t\tresolve(response);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(\"error in obtaining node API response: \", error);\r\n\t\t\t});\r\n\t});\r\n};\r\n\r\nexport const getCrimeCategory = (aCrimeCategory) => {\r\n\tlet crimeCategory = \"\";\r\n\tswitch (aCrimeCategory) {\r\n\t\tcase \"Anti-social behaviour\": // Low threat\r\n\t\t\tcrimeCategory = \"Anti-Social Behaviour\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Burglary\": // Medium threat\r\n\t\t\tcrimeCategory = \"Burglary\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Criminal damage and arson\": // Medium threat\r\n\t\t\tcrimeCategory = \"Criminal Damage & Arson\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Drugs\": // Low threat\r\n\t\t\tcrimeCategory = \"Drugs\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Possession of weapons\": // High threat\r\n\t\t\tcrimeCategory = \"Possession of Weapons\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Public order\": // Low threat\r\n\t\t\tcrimeCategory = \"Public Order\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Robbery\": //High threat\r\n\t\t\tcrimeCategory = \"Robbery\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Shoplifting\": // Low threat\r\n\t\t\tcrimeCategory = \"Shoplifting\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Theft\": // Medium threat\r\n\t\t\tcrimeCategory = \"Theft\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Vehicle crime\": // Medium threat\r\n\t\t\tcrimeCategory = \"Vehicle Crime\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"Violent crime\": // High threat\r\n\t\t\tcrimeCategory = \"Violent Crime\";\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\t//intentially blank\r\n\t\t\tbreak;\r\n\t}\r\n\treturn crimeCategory;\r\n};\r\n\r\n// function which completes an API call to get predicted crime rates\r\nexport const getPredictions = async (payload) => {\r\n\treturn new Promise((resolve) => {\r\n\t\taxios\r\n\t\t\t.post(\"http://localhost:4000/api/map/predictions\", payload)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconst response = {\r\n\t\t\t\t\tpredictions: res.data.predictions,\r\n\t\t\t\t};\r\n\t\t\t\tresolve(response);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"error in obtaining prediction results from API: \",\r\n\t\t\t\t\terror\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t});\r\n};\r\n\r\n// function which completes an API call to obtain historic crime data\r\nexport const getHistoricCrimes = async (payload) => {\r\n\treturn new Promise((resolve) => {\r\n\t\taxios\r\n\t\t\t.post(\"http://localhost:4000/api/map/historic\", payload)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconst response = {\r\n\t\t\t\t\thistoricCrimes: res.data.historicCrimes,\r\n\t\t\t\t};\r\n\t\t\t\tresolve(response);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(\"error in obtaining historic crimes from API: \");\r\n\t\t\t});\r\n\t});\r\n};\r\n\r\n// function which sorts an array of crimes from highest to lowest percentage value\r\nexport const sortCrimesByPercentage = (predictions) => {\r\n\tvar result;\r\n\r\n\t// sort crimes by lowest to highest percentage\r\n\tresult = predictions.sort(function (crimeA, crimeB) {\r\n\t\treturn crimeA.percentage - crimeB.percentage;\r\n\t});\r\n\r\n\t// reverse order\r\n\tresult.reverse();\r\n\r\n\treturn result;\r\n};\r\n\r\n// function which populates an array with formatted crime predictions\r\nexport const populateCrimes = (predictions) => {\r\n\tvar results = [];\r\n\r\n\tfor (var crime in predictions.percentages) {\r\n\t\tvar crimeCategory = getCrimeCategory(crime);\r\n\t\tvar crimeOccurence = parseInt(predictions.totals[crime]);\r\n\t\tvar percentageOfCrimes = parseFloat(predictions.percentages[crime]);\r\n\r\n\t\tvar crimeData = {\r\n\t\t\tcrime: crimeCategory,\r\n\t\t\toccurrences: crimeOccurence,\r\n\t\t\tpercentage: percentageOfCrimes,\r\n\t\t};\r\n\t\tresults.push(crimeData);\r\n\t}\r\n\tresults = sortCrimesByPercentage(results);\r\n\r\n\treturn results;\r\n};\r\n\r\n// function which finds the most prolific crimes from an array of crimes\r\nexport const getThreatLevel = (predictions) => {\r\n\t\r\n\tvar threatLevel = \"Low\";\r\n\r\n\t// format crime data as objects\r\n\tconst formattedCrimeArray = populateCrimes(predictions);\r\n\r\n\t// sort predictions by percentage\r\n\tconst sortedPredictions = sortCrimesByPercentage(formattedCrimeArray);\r\n\r\n\t//for (var counter = 0; counter < 3; counter++) {\r\n\tfor (var counter = 0; counter < 2; counter++) {\r\n\t\tvar crimeType = sortedPredictions[counter].crime;\r\n\r\n\t\t// check which crimes are highest two predicted crime types\r\n\t\tif (\r\n\t\t\tcrimeType === \"Possession of Weapons\" ||\r\n\t\t\tcrimeType === \"Violent Crime\" ||\r\n\t\t\tcrimeType === \"Robbery\"\r\n\t\t) {\r\n\t\t\tthreatLevel = \"High\";\r\n\t\t\tbreak;\r\n\t\t} else if (\r\n\t\t\tcrimeType === \"Vehicle Crime\" ||\r\n\t\t\tcrimeType === \"Theft\" ||\r\n\t\t\tcrimeType === \"Criminal Damage & Arson\" ||\r\n\t\t\tcrimeType === \"Burglary\"\r\n\t\t) {\r\n\t\t\tthreatLevel = \"Medium\";\t\t\t\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn threatLevel;\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { MapDetails } from \"../contexts/MapDetailsContext\";\r\nimport { ResultsData } from \"../contexts/ResultsDataContext\";\r\nimport { Crimes } from \"../contexts/CrimeDataContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Form from \"../components/Form\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport { getCrimeData, getThreatLevel } from \"../util/GetCrimeData\";\r\n\r\n// style components\r\nimport { MDBRow, MDBCol, MDBCard, MDBCardBody, MDBCardHeader } from \"mdbreact\";\r\n\r\nconst Search = (props) => {\r\n\tconst [submitText, setSubmitText] = useState(\"Submit\");\r\n\tconst [radioButton, setRadioButton] = useState(\"0\");\r\n\tconst [numberOfMonths, setNumberOfMonths] = useState(3);\r\n\tconst [locationName, setLocationName] = useState(\"\");\r\n\tconst [lat, setLat] = useState(\"\");\r\n\tconst [lon, setLon] = useState(\"\");\r\n\tconst [error, setError] = useState(null);\r\n\tconst history = useHistory();\r\n\tconst [mapDetails, setMapDetails] = useContext(MapDetails);\r\n\tconst [resultsData, setResultsData] = useContext(ResultsData);\r\n\tconst [crimestoDisplay, setCrimestoDisplay] = useContext(Crimes); //TODO not needed?\r\n\r\n\t// function which updates the map context\r\n\tconst setMapData = (aLocationName, aLat, aLon, allCrimes) => {\r\n\t\tsetMapDetails({\r\n\t\t\tlocationName: aLocationName,\r\n\t\t\tallCrimes: allCrimes,\r\n\t\t\tlat: aLat,\r\n\t\t\tlon: aLon,\r\n\t\t\tfilters: [],\r\n\t\t});\r\n\t};\r\n\r\n\t// handler which records currently selected radio button\r\n\tconst radioClickedHandler = (radioSelected) => {\r\n\t\tsetRadioButton(radioSelected);\r\n\t};\r\n\r\n\t// handler which updates state with user form input\r\n\tconst formInputHandler = (e) => {\r\n\t\tconst { name, value } = e.currentTarget;\r\n\t\t// if locationName selected, set locationName\r\n\t\tif (name === \"locationName\") {\r\n\t\t\tsetLocationName(value);\r\n\t\t} else if (name === \"lat\") {\r\n\t\t\t// if latitude input, set lat state\r\n\t\t\tsetLat(value);\r\n\t\t} else if (name === \"lon\") {\r\n\t\t\t// if longitude input, set lon state\r\n\t\t\tsetLon(value);\r\n\t\t}\r\n\t};\r\n\r\n\t// dropdown handler for months\r\n\tconst dropHandler = (selectedNumberOfMonths) => {\r\n\t\tif (selectedNumberOfMonths === 0) {\r\n\t\t\tselectedNumberOfMonths = 3;\r\n\t\t}\r\n\t\tsetNumberOfMonths(selectedNumberOfMonths);\r\n\t};\r\n\r\n\t/**\r\n\t * function which checks if a latitude, longitude coordinate lies\r\n\t * within the united kingdom boundary or not\r\n\t * @param {Number} lat The latitude coordinate\r\n\t * @param {Number} lon The longituded coordinate\r\n\t *\r\n\t * @returns {Boolean} isValidCoordinate Returns true if coordinate lies within UK\r\n\t */\r\n\tconst isWithinUK = (lat, lon) => {\r\n\t\tlet isValidCoordinate = true;\r\n\t\tif (lat < 49.88 || lat > 60.86 || lon < -8.21 || lon > 1.77) {\r\n\t\t\tisValidCoordinate = false;\r\n\t\t}\r\n\t\treturn isValidCoordinate;\r\n\t};\r\n\r\n\t// function which submits a search to API\r\n\tconst submitForm = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\t// declare boolean flag to determine whether this is a name search or not\r\n\t\tlet isNameSearch = radioButton === \"0\";\r\n\r\n\t\t// form validation\r\n\t\tif (!isNameSearch && (isNaN(lat) || isNaN(lon))) {\r\n\t\t\tsetError(\"Latitude and Longitude must be valid numbers\");\r\n\t\t\talert(\"Latitude and Longitude must be number coordinates\");\r\n\t\t} else {\r\n\t\t\t// variable boolean flag to determine whether lat and lon coordinates are wthin the UK\r\n\t\t\tlet coordinatesWithinUK = isWithinUK(lat, lon);\r\n\r\n\t\t\t// if named location search selected, but form input was empty\r\n\t\t\tif (isNameSearch && locationName === \"\") {\r\n\t\t\t\talert(\"The location is empty, please enter a location!\");\r\n\t\t\t} else if (!isNameSearch && (lat === \"\" || lon === \"\")) {\r\n\t\t\t\t// if lat and lon search, but lat or lon input boxes are empty\r\n\t\t\t\talert(\r\n\t\t\t\t\t\"Please add coordinates for both latitude and longitude!\"\r\n\t\t\t\t);\r\n\t\t\t} else if (!isNameSearch && (isNaN(lat) || isNaN(lon))) {\r\n\t\t\t\t// if lat and lon search, but either the lat or lon value is not a number\r\n\t\t\t\talert(\r\n\t\t\t\t\t\"Your latitude and longitude coordinates must be numbers only!\"\r\n\t\t\t\t);\r\n\t\t\t} else if (!isNameSearch && !coordinatesWithinUK) {\r\n\t\t\t\t// if lat and lon search, but coordinates are outside the bounds of UK\r\n\t\t\t\talert(\r\n\t\t\t\t\t\"Your latitude and longitude coordinates are outside of the UK!\"\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\t// form input was validated, display loading icon\r\n\t\t\t\tsetSubmitText(\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\tanimation=\"border\"\r\n\t\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\tvariant=\"dark\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label className=\"submit-btn-text\">\r\n\t\t\t\t\t\t\tLOADING CRIME DATA....\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// search data to pass to API\r\n\t\t\t\tvar payload = {\r\n\t\t\t\t\tlocationName: locationName,\r\n\t\t\t\t\tisNameSearch: isNameSearch,\r\n\t\t\t\t\tlat: lat,\r\n\t\t\t\t\tlon: lon,\r\n\t\t\t\t\tnumberOfMonths: numberOfMonths,\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// call function which calls API for user search\r\n\t\t\t\tconst response = await getCrimeData(payload);\r\n\r\n\t\t\t\t// check if no crimes were recorded for search criteria\r\n\t\t\t\tconst noCrimesDetected = response.noCrimes;\r\n\r\n\t\t\t\t// check for invalid lat and lon response, due to mispelled/invalid location name\r\n\t\t\t\tlet isValidLocation = isWithinUK(response.lat, response.lon);\r\n\r\n\t\t\t\t// if invalid search location\r\n\t\t\t\tif (!isValidLocation) {\r\n\t\t\t\t\tsetSubmitText(\r\n\t\t\t\t\t\t<label className=\"submit-btn-text\">Submit</label>\r\n\t\t\t\t\t);\r\n\t\t\t\t\talert(\r\n\t\t\t\t\t\t\"Location name is not recognised!, please check your spelling\"\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// no crimes found + manchester search\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tnoCrimesDetected &&\r\n\t\t\t\t\t\tresponse.policeForce === \"greater-manchester\"\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tsetSubmitText(\"Submit\");\r\n\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t\"Please note that Greater Manchester crime data is currently restricted due to an ongoing investigation into missing police data.\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t// set prediction and historic data\r\n\t\t\t\t\t\tsetResultsData({\r\n\t\t\t\t\t\t\tpredictions: response.predictions,\r\n\t\t\t\t\t\t\thistoricCrimes: response.historicCrimes,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (noCrimesDetected) {\r\n\t\t\t\t\t\t// no crimes found & is not a manchester search\r\n\t\t\t\t\t\tsetSubmitText(\"Submit\");\r\n\t\t\t\t\t\talert(\"No crime data found for this search!\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Crimes found & location is valid\r\n\t\t\t\t\t\tif (response.policeForce === \"greater-manchester\") {\r\n\t\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t\t\"Please note: Greater Manchester crime data is currently restricted due to an ongoing investigation into missing police crime data.\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// set lat and lon values\r\n\t\t\t\t\t\tsetLat(response.lat);\r\n\t\t\t\t\t\tsetLon(response.lon);\r\n\r\n\t\t\t\t\t\t// pass response data to function\r\n\t\t\t\t\t\tsetMapData(\r\n\t\t\t\t\t\t\tresponse.locationName,\r\n\t\t\t\t\t\t\tresponse.lat,\r\n\t\t\t\t\t\t\tresponse.lon,\r\n\t\t\t\t\t\t\tresponse.allCrimes\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// get crime threat level for area\r\n\t\t\t\t\t\tvar threatLevel = getThreatLevel(response.predictions);\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t// pass historic crime data and flask prediction data to results context\r\n\t\t\t\t\t\tsetResultsData({\r\n\t\t\t\t\t\t\tpredictions: response.predictions,\r\n\t\t\t\t\t\t\thistoricCrimes: response.historicCrimes,\r\n\t\t\t\t\t\t\tthreatLevel: threatLevel,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsetCrimestoDisplay(response.allCrimes);\r\n\r\n\t\t\t\t\t\t//history.push(`/mapdisplay`);\r\n\t\t\t\t\t\thistory.push(`/mapdisplay`, {\r\n\t\t\t\t\t\t\tisfavourite: \"false\", //if map a previously favourited map or new search result\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthreatlevel: threatLevel,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"search-map-div\">\r\n\t\t\t<MDBRow>\r\n\t\t\t\t<MDBCol size=\"12\" sm=\"10\" className=\"form-card\">\r\n\t\t\t\t\t<MDBCard>\r\n\t\t\t\t\t\t<MDBCardBody>\r\n\t\t\t\t\t\t\t<MDBCardHeader className=\"form-header bg-primary rounded\">\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-globe\" />\r\n\t\t\t\t\t\t\t\t<label className=\"header-label\">Search</label>\r\n\t\t\t\t\t\t\t</MDBCardHeader>\r\n\t\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\t\tsubmitForm={submitForm}\r\n\t\t\t\t\t\t\t\tformInputHandler={formInputHandler}\r\n\t\t\t\t\t\t\t\tlocationName={locationName}\r\n\t\t\t\t\t\t\t\tlat={lat}\r\n\t\t\t\t\t\t\t\tlon={lon}\r\n\t\t\t\t\t\t\t\tnumberOfMonths={numberOfMonths}\r\n\t\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\t\tdropHandler={dropHandler}\r\n\t\t\t\t\t\t\t\tradioButton={radioButton}\r\n\t\t\t\t\t\t\t\tradioClickedHandler={radioClickedHandler}\r\n\t\t\t\t\t\t\t\tsubmitText={submitText}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MDBCardBody>\r\n\t\t\t\t\t</MDBCard>\r\n\t\t\t\t</MDBCol>\r\n\t\t\t</MDBRow>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Search;\r\n","import L from \"leaflet\";\r\n\r\nconst geoapifyAPIKey = \"b0188d827da8401786390efebdbc0484\";\r\n\r\n// function which returns a text label for a given crime category\r\nexport const getCrimeCategory = (aCrimeCategory) => {\r\n\tlet crimeCat;\r\n\r\n\tswitch (aCrimeCategory) {\r\n\t\tcase \"anti-social-behaviour\":\r\n\t\t\tcrimeCat = \"Anti-Social Behaviour\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"burglary\":\r\n\t\t\tcrimeCat = \"Burglary\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"criminal-damage-arson\":\r\n\t\t\tcrimeCat = \"Criminal Damage/Arson\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"drugs\":\r\n\t\t\tcrimeCat = \"Drugs\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"possession-of-weapons\":\r\n\t\t\tcrimeCat = \"Possession of Weapons\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"public-order\":\r\n\t\tcase \"other-crime\":\r\n\t\t\tcrimeCat = \"Public Order\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"robbery\":\t\t\r\n\t\t\tcrimeCat = \"Robbery\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"shoplifting\":\r\n\t\t\tcrimeCat = \"Shoplifting\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"theft-from-the-person\":\r\n\t\tcase \"bicycle-theft\":\r\n\t\tcase \"other-theft\":\t\t\r\n\t\t\tcrimeCat = \"Theft\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"vehicle-crime\":\r\n\t\t\tcrimeCat = \"Vehicle Crime\";\r\n\t\t\tbreak;\r\n\t\r\n\t\tcase \"violent-crime\":\t\t\r\n\t\tcase \"violence-and-sexual-offences\":\r\n\t\t\tcrimeCat = \"Violent Crime\";\r\n\t\t\tbreak;\t\r\n\r\n\t\tdefault:\r\n\t\t\t//intentially blank\r\n\t\t\tbreak;\r\n\t}\r\n\treturn crimeCat;\r\n};\r\n\r\n// function which returns the correct map icon for a crime category\r\nexport const getCrimeIcon = (aCrimeCategory, isForButton) => {\r\n\tvar icon;\r\n\tvar iconName;\r\n\tvar color;\r\n\tvar iconType;\r\n\r\n\tswitch (aCrimeCategory) {\r\n\t\tcase \"anti-social-behaviour\":\r\n\t\t\tcolor = \"darkslateblue\"; //e.g. %23 plus hex code c12b08\r\n\t\t\ticonName = \"record-voice-over\";\r\n\t\t\ticonType = \"material\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"burglary\":\r\n\t\t\tcolor = \"hotpink\";\r\n\t\t\ticonName = \"home\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"criminal-damage-arson\":\r\n\t\t\tcolor = \"orangered\";\r\n\t\t\ticonName = \"fire-alt\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"drugs\":\r\n\t\t\tcolor = \"brown\";\r\n\t\t\ticonName = \"syringe\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"possession-of-weapons\":\r\n\t\t\tcolor = \"red\";\r\n\t\t\ticonName = \"fist-raised\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\t\t\r\n\r\n\t\tcase \"public-order\":\r\n\t\tcase \"other-crime\":\r\n\t\t\tcolor = \"%23570345\";\r\n\t\t\ticonName = \"bullhorn\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase \"robbery\":\r\n\t\t\tcolor = \"olive\";\r\n\t\t\ticonName = \"cash-register\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"shoplifting\":\r\n\t\t\tcolor = \"gold\";\r\n\t\t\ticonName = \"shopping-cart\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"theft-from-the-person\":\r\n\t\tcase \"bicycle-theft\":\r\n\t\tcase \"other-theft\":\t\t\r\n\t\t\tcolor = \"blue\";\r\n\t\t\ticonName = \"money-bill-alt\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"vehicle-crime\":\r\n\t\t\tcolor = \"%238884d8\";\r\n\t\t\ticonName = \"car\";\r\n\t\t\ticonType = \"awesome\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"violent-crime\":\t\t\r\n\t\tcase \"violence-and-sexual-offences\":\r\n\t\t\tcolor = \"black\";\r\n\t\t\ticonName = \"sports_kabaddi\";\r\n\t\t\ticonType = \"material\";\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\t//intentially blank\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tif (isForButton) {\r\n\t\t// create icon for filter button\r\n\t\tvar size = \"x-large\"; //x-large large small (default medium no need to declare)\r\n\r\n\t\ticon = new L.icon({\r\n\t\t\ticonUrl:\r\n\t\t\t\t\"https://api.geoapify.com/v1/icon/?type=circle&color=\" +\r\n\t\t\t\tcolor +\r\n\t\t\t\t\"&size=\" +\r\n\t\t\t\tsize +\r\n\t\t\t\t\"&icon=\" +\r\n\t\t\t\ticonName +\r\n\t\t\t\t\"&iconType=\" +\r\n\t\t\t\ticonType +\r\n\t\t\t\t\"&iconSize=large&noShadow&noWhiteCircle&apiKey=\" +\r\n\t\t\t\tgeoapifyAPIKey,\r\n\t\t\ticonSize: [75, 95], // size of the icon\r\n\t\t});\r\n\t} else {\r\n\t\t// create icon for map icons\r\n\t\ticon = new L.icon({\r\n\t\t\ticonUrl:\r\n\t\t\t\t\"https://api.geoapify.com/v1/icon/?type=\" +\r\n\t\t\t\ticonType +\r\n\t\t\t\t\"&color=\" +\r\n\t\t\t\tcolor +\r\n\t\t\t\t\"&size=xx-large&icon=\" +\r\n\t\t\t\ticonName +\r\n\t\t\t\t\"&textSize=large&noWhiteCircle&scaleFactor=2&apiKey=\" +\r\n\t\t\t\tgeoapifyAPIKey,\r\n\t\t\ticonSize: [65, 90], // size of the icon\r\n\t\t\ticonAnchor: [15.5, 42], // point of icon corresponding to marker location\r\n\t\t\tpopupAnchor: [20, -33], // point popup is relative to the iconAnchor\r\n\t\t});\r\n\t}\r\n\treturn icon;\r\n};\r\n\r\nexport const getCenterPoint = () => {\r\n\tconst color = \"red\"; //const color = \"%23572ec7\";\r\n\tconst type = \"awesome\"; //const type = \"material\";\r\n\tconst iconType = \"awesome\";\r\n\tconst iconName = \"search\" //\"times-circle\" //\"universal-access\"\r\n\r\n\tconst icon = new L.icon({\r\n\t\ticonUrl:\r\n\t\t\t\"https://api.geoapify.com/v1/icon/?type=\" +\r\n\t\t\ttype +\r\n\t\t\t\"&color=\" +\r\n\t\t\tcolor +\r\n\t\t\t\"&icon=\" + \r\n\t\t\ticonName + \r\n\t\t\t\"&size=xx-large&iconType=\" +\r\n\t\t\ticonType +\r\n\t\t\t\"&iconSize=large&noWhiteCircle&scaleFactor=2&apiKey=\" +\t\t\t\r\n\t\t\tgeoapifyAPIKey,\r\n\t\ticonSize: [95, 130], // size of the icon\r\n\t\ticonAnchor: [15.5, 42], // point of icon corresponding to marker location\r\n\t\tpopupAnchor: [20, -33], // point popup is relative to the iconAnchor\r\n\t});\r\n\treturn icon;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport uuid from \"react-uuid\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Col from \"react-bootstrap/col\";\r\nimport { getCenterPoint } from \"../util/AssignMapIcons\";\r\n\r\n// import leaflet related\r\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n/**\r\n * A favourite for a user //TODO fix function descriptions\r\n *\r\n * @param {string} title - Title for this favourite\r\n * @param {string} timestamp - Date the favourite was created\r\n * @param {string} deleteFavourite - Reference to function which deletes the favourite from the user's favourites\r\n */\r\nconst Favourite = ({\r\n\ttitle,\r\n\tlocationName,\r\n\tlat,\r\n\tlon,\r\n\ttimestamp,\r\n\tdeleteFavourite,\r\n\tdisplayMap,\r\n}) => {\r\n\tconst [map, setMap] = useState(null); // leaflet map object\r\n\r\n\t//default zoom level on map\r\n\tconst zoom = 15;\r\n\r\n\treturn (\r\n\t\t<Col className=\"container-fluid mt-4\">\r\n\t\t\t<Card className=\"favourite-card\" key={uuid()} border=\"info\" style={{ width: \"18rem\" }}>\r\n\t\t\t\t<MapContainer\r\n\t\t\t\t\tclassName=\"markercluster-map\"\r\n\t\t\t\t\tcenter={[lat, lon]}\r\n\t\t\t\t\tzoom={zoom}\r\n\t\t\t\t\tmaxZoom={18}\r\n\t\t\t\t\tstyle={{ height: \"33vh\" }}\r\n\t\t\t\t\twhenCreated={() => setMap(map)}\r\n\t\t\t\t\tzoomControl={false}>\r\n\t\t\t\t\t{/* add center point marker */}\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\tposition={[lat, lon]}\r\n\t\t\t\t\t\ticon={getCenterPoint()}>\r\n\t\t\t\t\t\t<Popup className=\"icon-popup\">\r\n\t\t\t\t\t\t\t{locationName}\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t({lat}, {lon})\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</Popup>\r\n\t\t\t\t\t</Marker>\r\n\r\n\t\t\t\t\t<TileLayer\r\n\t\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MapContainer>\r\n\r\n\t\t\t\t<Card.Header className=\"favourite-card-header\">\r\n\t\t\t\t\t<h3>{title}</h3>\r\n\t\t\t\t</Card.Header>\r\n\t\t\t\t<Card.Body className=\"favourite-card-body\" bg=\"light\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"favourite-card-display-button\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tdisplayMap(timestamp);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvariant=\"primary\">\r\n\t\t\t\t\t\tDisplay Map\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\tclassName=\"far fa-trash-alt fa-lg trash-favourites\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tdeleteFavourite(timestamp);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Card.Body>\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<small className=\"text-muted\">\r\n\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t<h5>Date created:</h5>\r\n\t\t\t\t\t\t<h4>{timestamp.slice(0, -10)}</h4>\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</Col>\r\n\t);\r\n};\r\n\r\nexport default Favourite;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonFilter = (props) => {\r\n\tlet history = useHistory();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"right\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content className=\"button-tooltip-text\">Back\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t<Button\r\n\t\t\tclassName=\"btn-back\"\r\n\t\t\tvariant=\"secondary\"\r\n\t\t\tonClick={() => history.goBack()}>\r\n\t\t\t<i className=\"fa fa-arrow-left fa-lg mx-2\" />\r\n\t\t</Button>\r\n\t\t</OverlayTrigger>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonFilter;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Favourite from \"../components/Favourite\";\r\nimport { MapDetails } from \"../contexts/MapDetailsContext\";\r\nimport uuid from \"react-uuid\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport {\r\n\tdeleteUserFavourite,\r\n\tgetUserFavourites,\r\n\tgetUserFavourite,\r\n} from \"../firebase\";\r\nimport ButtonBack from \"../components/ButtonBack\";\r\nimport CardDeck from \"react-bootstrap/CardDeck\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Crimes } from \"../contexts/CrimeDataContext\";\r\nimport FadeIn from \"react-fade-in\";\r\n\r\nconst Favourites = (props) => {\r\n\tconst [localFavourites, setLocalFavourites] = useState([]);\r\n\tconst [mapDetails, setMapDetails] = useContext(MapDetails);\r\n\tconst [crimesToDisplay, setCrimesToDisplay] = useContext(Crimes); // crimes data context\r\n\r\n\tconst history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tgetFavourites();\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\t// updates the mapDetails context\r\n\tconst updateMap = (aFavourite) => {\r\n\t\t// update context with data from saved favourite\r\n\t\tsetMapDetails((mapDetails) => ({\r\n\t\t\tallCrimes: aFavourite.allCrimes,\r\n\t\t\tlocationName: aFavourite.locationName,\r\n\t\t\tlat: aFavourite.lat,\r\n\t\t\tlon: aFavourite.lon,\r\n\t\t\tfilters: aFavourite.filters,\r\n\t\t}));\r\n\t\tsetCrimesToDisplay(aFavourite.allCrimes);\r\n\t};\r\n\r\n\t// display favourited map when clicked\r\n\tconst displayMap = async (aTimestamp) => {\r\n\t\tvar aFavourite = await getUserFavourite(aTimestamp);\r\n\t\tupdateMap(aFavourite);\r\n\r\n\t\thistory.push(`/mapdisplay`, {\r\n\t\t\tisfavourite: \"true\", //if map a previously favourited map or new search result\r\n\t\t\ttimestamp: aTimestamp,\r\n\t\t});\r\n\t};\r\n\r\n\t// function which deletes a specific favourited map\r\n\tconst deleteFavourite = async (aTimestamp) => {\r\n\t\tawait deleteUserFavourite(aTimestamp);\r\n\t\tgetFavourites();\r\n\t};\r\n\r\n\t// function which gets all user favourited maps\r\n\tconst getFavourites = async () => {\r\n\t\tvar favouritesReturned = await getUserFavourites();\r\n\t\tsetLocalFavourites(favouritesReturned);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container className={\"favourites-container\"}>\r\n\t\t\t<ButtonBack id=\"back-btn-favourites\" />\r\n\t\t\t<FadeIn delay={240}>\r\n\t\t\t\t<Container>\t\t\t\t\t\r\n\t\t\t\t\t\t<Container id=\"favourites-list-Container\">\r\n\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\tclassName=\"favourites-title\"\r\n\t\t\t\t\t\t\tstyle={{ opacity: \"0.8\" }}>\r\n\t\t\t\t\t\t\tYou have {localFavourites.length}\r\n\t\t\t\t\t\t\t{localFavourites.length > 1 || localFavourites.length === 0\r\n\t\t\t\t\t\t\t\t? \" favourites saved\"\r\n\t\t\t\t\t\t\t\t: \" favourite saved\"}\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<CardDeck>\r\n\t\t\t\t\t\t\t\t{localFavourites.map((favourite) => (\r\n\t\t\t\t\t\t\t\t\t<Favourite\r\n\t\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\t\tdeleteFavourite={deleteFavourite}\r\n\t\t\t\t\t\t\t\t\t\tdisplayMap={displayMap}\r\n\t\t\t\t\t\t\t\t\t\ttitle={favourite.title}\r\n\t\t\t\t\t\t\t\t\t\tlocationName={favourite.locationName}\r\n\t\t\t\t\t\t\t\t\t\tlat={favourite.lat}\r\n\t\t\t\t\t\t\t\t\t\tlon={favourite.lon}\r\n\t\t\t\t\t\t\t\t\t\ttimestamp={favourite.timestamp}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</CardDeck>\r\n\t\t\t\t\t\t</Container>\t\t\t\t\t\r\n\t\t\t\t</Container>\r\n\t\t\t</FadeIn>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default Favourites;\r\n","/**\r\n * function which returns an array of all user selected crime filters to apply\r\n *\r\n * @param {array} filters All user selected filters\r\n *\r\n * @return {array} All the selected filters to apply to crimes\r\n */\r\nconst applyFilters = (filters) => {\r\n\tconst allCategories = [\r\n\t\t\"anti-social-behaviour\",\r\n\t\t\"burglary\",\r\n\t\t\"criminal-damage-arson\",\t\t\r\n\t\t\"drugs\",\r\n\t\t\"possession-of-weapons\",\t\t\r\n\t\t\"public-order\",\t\r\n\t\t\"robbery\",\t\r\n\t\t\"shoplifting\",\r\n\t\t\"theft\",\t\t\r\n\t\t\"vehicle-crime\",\r\n\t\t\"violent-crime\",\r\n\t];\r\n\r\n\t// if crime is not to be hidden, add to array of crimes to display\r\n\tconst crimesToDisplay = allCategories.filter(\r\n\t\t(aCategory) => !filters.includes(aCategory)\r\n\t);\r\n\t// return array of crimes to include on map\r\n\treturn crimesToDisplay;\r\n};\r\n\r\n// function which creates an array of all crimes to be displayed on map\r\nexport const populateDisplayCrimes = (crimes, filters) => {\r\n\tvar displayCrimes = [];\r\n\r\n\t// call function which creates a list of crime categories to display on map\r\n\tconst categoriesToInclude = applyFilters(filters);\r\n\r\n\tcrimes.forEach((aCrime) => {\r\n\t\tif (categoriesToInclude.includes(aCrime.category)) {\r\n\t\t\tdisplayCrimes.push(aCrime);\r\n\t\t}\r\n\t});\r\n\r\n\t// return list of crime categories to display on map\r\n\treturn displayCrimes;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { addUserFavourite } from \"../firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n// style components\r\nimport { MDBInput, MDBIcon } from \"mdbreact\";\r\n\r\nconst AddFavouriteModal = (props) => {\r\n\tconst [title, setTitle] = useState(\"\");\r\n\tconst [charCount, setCharCount] = useState(50);\r\n\tconst history = useHistory();\r\n\r\n\t// function which adds a new user favourite\r\n\tconst createNewFavourite = async (e) => {\r\n\t\tprops.onHide();\r\n\r\n\t\ttry {\r\n\t\t\tawait addUserFavourite(\r\n\t\t\t\ttitle,\r\n\t\t\t\tprops.mapdetails.allCrimes,\r\n\t\t\t\tprops.mapdetails.locationName,\r\n\t\t\t\tprops.mapdetails.lat,\r\n\t\t\t\tprops.mapdetails.lon,\r\n\t\t\t\tprops.mapdetails.filters\r\n\t\t\t);\r\n\r\n\t\t\t// change icon from add fav + to remove fav -\r\n\t\t\thistory.push(`/mapdisplay`, {\r\n\t\t\t\tisfavourite: \"true\", // if was a previously favourited map\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(\"Error adding favourite\" + error);\r\n\t\t}\r\n\t};\r\n\r\n\t// function to handle user form input\r\n\tconst onChangeHandler = (e) => {\r\n\t\tconst { name, value } = e.currentTarget;\r\n\t\t// if title input, set title state\r\n\t\tif (name === \"title\") {\r\n\t\t\tsetTitle(value);\r\n\t\t\tsetCharCount(42 - value.length);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\t\t\t\r\n\t\t\tsize=\"lg\"\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t<h3 className=\"my-3\">\r\n\t\t\t\t\t\t<MDBIcon className=\"addFavModal-icon\" icon=\"bookmark\" />\r\n\t\t\t\t\t\tAdd New Favourite Location\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<div className=\"grey-text\">\r\n\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\tclassName=\"favourite-input-title\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tlabel=\"Enter a title...\"\r\n\t\t\t\t\t\tmaxLength=\"42\"\r\n\t\t\t\t\t\tbackground\r\n\t\t\t\t\t\tsize=\"lg\"\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\tvalidate\r\n\t\t\t\t\t\terror=\"wrong\"\r\n\t\t\t\t\t\tsuccess=\"right\"\r\n\t\t\t\t\t\tvalue={title}\r\n\t\t\t\t\t\tonChange={(e) => onChangeHandler(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label>({charCount} Characters Remaining)</label>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal.Body>\r\n\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"red\" onClick={props.onHide}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"green\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tonClick={() => createNewFavourite()}>\r\n\t\t\t\t\tSave Favourite\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default AddFavouriteModal;\r\n","import React, { useContext } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { ResultsData } from \"../contexts/ResultsDataContext\";\r\nimport {\r\n\tAreaChart,\r\n\tArea,\r\n\tXAxis,\r\n\tYAxis,\r\n\tCartesianGrid,\r\n\tTooltip,\r\n\tResponsiveContainer,\r\n} from \"recharts\";\r\n\r\n//style components\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nconst ShowHistoricCrimeModal = (props) => {\r\n\tconst [resultsData, setResultsData] = useContext(ResultsData);\r\n\r\n\tvar testData = \r\n\t[\r\n\t\t{\"month\":\"Oct\",\r\n\"Anti-Social Behaviour\":10,\r\n\"Burglary\":10,\r\n\"Criminal Damage & Arson\":9,\r\n\"Drugs\":5,\r\n\"Public Order\":5,\r\n\"Possession of Weapons\":5,\r\n\"Shoplifting\":5,\r\n\"Theft\":5,\r\n\"Vehicle Crime\":5,\r\n\"Violent Crime\":20\r\n},\r\n\r\n{\"month\":\"Nov\",\r\n\"Anti-Social Behaviour\":10,\r\n\"Burglary\":10,\r\n\"Criminal Damage & Arson\":9,\r\n\"Drugs\":5,\r\n\"Public Order\":5,\r\n\"Possession of Weapons\":5,\r\n\"Shoplifting\":5,\r\n\"Theft\":5,\r\n\"Vehicle Crime\":5,\r\n\"Violent Crime\":20},\r\n\r\n{\"month\":\"Dec\",\r\n\"Anti-Social Behaviour\":10,\r\n\"Burglary\":10,\r\n\"Criminal Damage & Arson\":9,\r\n\"Drugs\":5,\r\n\"Public Order\":5,\r\n\"Possession of Weapons\":5,\r\n\"Shoplifting\":5,\r\n\"Theft\":5,\r\n\"Vehicle Crime\":5,\r\n\"Violent Crime\":20},\r\n\r\n{\"month\":\"Jan\",\r\n\"Anti-Social Behaviour\":10,\r\n\"Burglary\":10,\r\n\"Criminal Damage & Arson\":9,\r\n\"Drugs\":5,\r\n\"Public Order\":5,\r\n\"Possession of Weapons\":5,\r\n\"Shoplifting\":5,\r\n\"Theft\":5,\r\n\"Vehicle Crime\":5,\r\n\"Violent Crime\":20},\r\n\r\n{\"month\":\"Feb\",\r\n\"Anti-Social Behaviour\":10,\r\n\"Burglary\":10,\r\n\"Criminal Damage & Arson\":9,\r\n\"Drugs\":5,\r\n\"Public Order\":5,\r\n\"Possession of Weapons\":5,\r\n\"Shoplifting\":5,\r\n\"Theft\":5,\r\n\"Vehicle Crime\":5,\r\n\"Violent Crime\":20},\r\n\r\n{\"month\":\"Mar\",\"Anti-Social Behaviour\":10,\r\n\"Burglary\":10,\r\n\"Criminal Damage & Arson\":9,\r\n\"Drugs\":5,\r\n\"Public Order\":5,\r\n\"Possession of Weapons\":5,\r\n\"Shoplifting\":5,\r\n\"Theft\":5,\r\n\"Vehicle Crime\":5,\r\n\"Violent Crime\":20},\r\n\r\n{\"month\":\"Apr\",\r\n\"Anti-Social Behaviour\": 0,\r\n\t\t\t\t\"Burglary\": 0,\r\n\t\t\t\t\"Criminal Damage & Arson\": 0,\r\n\t\t\t\t\"Drugs\": 0,\r\n\t\t\t\t\"Possession of Weapons\": 0,\r\n\t\t\t\t\"Public Order\": 0,\r\n\t\t\t\t\"Robbery\": 0,\r\n\t\t\t\t\"Shoplifting\": 0,\r\n\t\t\t\t\"Theft\": 0,\r\n\t\t\t\t\"Vehicle Crime\": 0,\r\n\t\t\t\t\"Violent Crime\": 0,},\r\n\r\n{\"month\":\"May\",\r\n\"Anti-Social Behaviour\": 10,\r\n\t\t\t\t\"Burglary\": 30,\r\n\t\t\t\t\"Criminal Damage & Arson\": 10,\r\n\t\t\t\t\"Drugs\": 0,\r\n\t\t\t\t\"Possession of Weapons\": 0,\r\n\t\t\t\t\"Public Order\": 0,\r\n\t\t\t\t\"Robbery\": 0,\r\n\t\t\t\t\"Shoplifting\": 0,\r\n\t\t\t\t\"Theft\": 0,\r\n\t\t\t\t\"Vehicle Crime\": 0,\r\n\t\t\t\t\"Violent Crime\": 0,},\r\n\r\n];\r\n\r\n\t// array of month names\r\n\tvar months = [\r\n\t\t\"Jan\",\r\n\t\t\"Feb\",\r\n\t\t\"Mar\",\r\n\t\t\"Apr\",\r\n\t\t\"May\",\r\n\t\t\"Jun\",\r\n\t\t\"Jul\",\r\n\t\t\"Aug\",\r\n\t\t\"Sep\",\r\n\t\t\"Oct\",\r\n\t\t\"Nov\",\r\n\t\t\"Dec\",\r\n\t];\r\n\r\n\t// function which returns an array of months sorted in order of how\r\n\t// they should be displayed on a graph of historic crimes\r\n\tconst getSortedMonths = () => {\r\n\t\tvar sortedMonths = [];\r\n\r\n\t\t//get final graph month to display\r\n\t\tlet finalGraphMonth = new Date().getMonth() + 1; //zero indexed\r\n\r\n\t\tif (finalGraphMonth === 1) {\r\n\t\t\t// January special case\r\n\t\t\tfinalGraphMonth = 11; // set month to (2 months prior)\r\n\t\t} else if (finalGraphMonth === 2) {\r\n\t\t\t// February special case\r\n\t\t\tfinalGraphMonth = 12; // set crime month to December (2 months prior)\r\n\t\t} else {\r\n\t\t\t// else decrement month by 2\r\n\t\t\tfinalGraphMonth = finalGraphMonth - 2;\r\n\t\t}\r\n\r\n\t\t// get first graph month\r\n\t\tvar currentGraphMonth = finalGraphMonth + 1;\r\n\r\n\t\t// create new crime stats month object and add to array\r\n\t\tfor (var i = 0; i < 12; i++) {\r\n\t\t\tif (currentGraphMonth > 12) {\r\n\t\t\t\tcurrentGraphMonth = currentGraphMonth - 12;\r\n\t\t\t}\r\n\r\n\t\t\tvar monthlyStats = {\r\n\t\t\t\t\"month\": months[currentGraphMonth - 1],\r\n\t\t\t\t\"Anti-Social Behaviour\": 0,\r\n\t\t\t\t\"Burglary\": 0,\r\n\t\t\t\t\"Criminal Damage & Arson\": 0,\r\n\t\t\t\t\"Drugs\": 0,\r\n\t\t\t\t\"Possession of Weapons\": 0,\r\n\t\t\t\t\"Public Order\": 0,\r\n\t\t\t\t\"Robbery\": 0,\r\n\t\t\t\t\"Shoplifting\": 0,\r\n\t\t\t\t\"Theft\": 0,\r\n\t\t\t\t\"Vehicle Crime\": 0,\r\n\t\t\t\t\"Violent Crime\": 0,\r\n\t\t\t};\r\n\t\t\tsortedMonths.push(monthlyStats);\r\n\t\t\tcurrentGraphMonth++;\r\n\t\t}\r\n\r\n\t\treturn sortedMonths;\r\n\t};\r\n\r\n\tconst getCrimeCategory = (aCrimeCategory) => {\r\n\t\tlet crimeCat = \"\";\r\n\r\n\t\tswitch (aCrimeCategory) {\r\n\t\t\tcase \"Anti social behaviour\":\r\n\t\t\t\tcrimeCat = \"Anti-Social Behaviour\";\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"Burglary\":\r\n\t\t\t\tcrimeCat = \"Burglary\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Criminal damage arson\":\r\n\t\t\t\tcrimeCat = \"Criminal Damage & Arson\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Drugs\":\r\n\t\t\t\tcrimeCat = \"Drugs\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Possession of weapons\":\r\n\t\t\t\tcrimeCat = \"Possession of Weapons\";\r\n\t\t\t\tbreak;\t\t\r\n\r\n\t\t\tcase \"Public order\":\r\n\t\t\tcase \"Other crime\":\r\n\t\t\t\tcrimeCat = \"Public Order\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Robbery\":\t\t\t\r\n\t\t\t\tcrimeCat = \"Robbery\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Shoplifting\":\r\n\t\t\t\tcrimeCat = \"Shoplifting\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Theft from the person\":\r\n\t\t\tcase \"Bicycle theft\":\r\n\t\t\tcase \"Other theft\":\t\t\t\r\n\t\t\t\tcrimeCat = \"Theft\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Vehicle crime\":\r\n\t\t\t\tcrimeCat = \"Vehicle Crime\";\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase \"Violent crime\":\t\t\t\r\n\t\t\tcase \"Violence and sexual offences\":\r\n\t\t\t\tcrimeCat = \"Violent Crime\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t//intentially blank\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn crimeCat;\r\n\t};\r\n\r\n\tvar graphData = getSortedMonths();\r\n\r\n\tfor (const crime in resultsData.historicCrimes) {\r\n\t\tlet aCrimeRecord = resultsData.historicCrimes[crime];\t\t\r\n\t\t\r\n\t\t// format crime category string\r\n\t\tvar aCategory = aCrimeRecord.category.replace(/-/g, \" \");\r\n\t\taCategory = aCategory.charAt(0).toUpperCase() + aCategory.slice(1);\r\n\t\taCategory = getCrimeCategory(aCategory);\r\n\r\n\t\t// revert crime month to zero based index\r\n\t\tvar indexOfMonth = parseInt(aCrimeRecord.month - 1);\r\n\t\tvar aMonth = months[indexOfMonth];\r\n\r\n\t\tfor (var index in graphData){\r\n\t\t\tvar monthlyCrimes = graphData[index];\r\n\t\t\tif(monthlyCrimes.month === aMonth){\t\t\t\t\r\n\t\t\t\tmonthlyCrimes[aCategory] = monthlyCrimes[aCategory] + 1;\t\t\t\t\t\t\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tdialogClassName=\"modal-dialog modal-xl\"\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t<h3 className=\"my-3\">\r\n\t\t\t\t\t\t<MDBIcon className=\"addFavModal-icon\" icon=\"bookmark\" />\r\n\t\t\t\t\t\tCrime occurences per month in this area\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\t\t\t\r\n\t\t\t\t<ResponsiveContainer width={\"100%\"} height={600}>\r\n\t\t\t\t\t<AreaChart\r\n\t\t\t\t\t\twidth={\"100%\"}\r\n\t\t\t\t\t\theight={\"100%\"}\r\n\t\t\t\t\t\tdata={graphData}\r\n\t\t\t\t\t\tanimationDuration={800}\r\n\t\t\t\t\t\tmargin={{\r\n\t\t\t\t\t\t\ttop: 10,\r\n\t\t\t\t\t\t\tright: 30,\r\n\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\r\n\t\t\t\t\t\t<XAxis dataKey=\"month\" />\r\n\t\t\t\t\t\t<YAxis type=\"number\" domain={[\"dataMin\", \"dataMax\"]} />\r\n\t\t\t\t\t\t<Tooltip />\t\t\t\t\t\t\r\n\t\t\t\t\t <Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Anti-Social Behaviour\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"darkslateblue\"\r\n\t\t\t\t\t\t\tfill=\"darkslateblue\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Burglary\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"hotpink\"\r\n\t\t\t\t\t\t\tfill=\"hotpink\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Criminal Damage & Arson\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"orangered\"\r\n\t\t\t\t\t\t\tfill=\"orangered\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Drugs\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"brown\"\r\n\t\t\t\t\t\t\tfill=\"brown\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Possession of Weapons\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"red\"\r\n\t\t\t\t\t\t\tfill=\"red\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Public Order\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"#570345\"\r\n\t\t\t\t\t\t\tfill=\"#570345\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Robbery\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"olive\"\r\n\t\t\t\t\t\t\tfill=\"olive\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Shoplifting\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"gold\"\r\n\t\t\t\t\t\t\tfill=\"gold\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Theft\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"blue\"\r\n\t\t\t\t\t\t\tfill=\"blue\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Vehicle Crime\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"#8884d8\"\r\n\t\t\t\t\t\t\tfill=\"#8884d8\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Area\r\n\t\t\t\t\t\t\ttype=\"monotone\"\r\n\t\t\t\t\t\t\tdataKey=\"Violent Crime\"\r\n\t\t\t\t\t\t\tstackId=\"1\"\r\n\t\t\t\t\t\t\tstroke=\"black\"\r\n\t\t\t\t\t\t\tfill=\"black\"\r\n\t\t\t\t\t\t/> \r\n\t\t\t\t\t</AreaChart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ShowHistoricCrimeModal;\r\n","import React, { useContext, useState } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { ResultsData } from \"../contexts/ResultsDataContext\";\r\nimport FadeIn from \"react-fade-in\";\r\n\r\nimport {\r\n\tResponsiveContainer,\r\n\tBarChart,\r\n\tBar,\r\n\tLabelList,\r\n\tXAxis,\r\n\tYAxis,\r\n\tCell,\r\n} from \"recharts\";\r\n\r\n//style components\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nconst ShowPredictionsModal = (props) => {\r\n\tconst [resultsData, setResultsData] = useContext(ResultsData);\r\n\r\n\tconst [crimeColours, setCrimeColours] = useState([\t\t\r\n\t\t\"darkslateblue\", // anti-social-behaviour\r\n\t\t\"hotpink\", // burglary\r\n\t\t\"orangered\", // criminal_damage_and_arson\r\n\t\t\"brown\", // drugs\r\n\t\t\"red\", // possession_of_weapons\r\n\t\t\"#570345\", // public_order\r\n\t\t\"olive\", // robbery\r\n\t\t\"gold\", // shoplifting\r\n\t\t\"blue\", // theft\r\n\t\t\"#8884d8\", // vehicle_crime\r\n\t\t\"black\", // violent_crime\r\n\t]);\r\n\t// array of month names\r\n\tvar months = [\r\n\t\t\"January\",\r\n\t\t\"February\",\r\n\t\t\"March\",\r\n\t\t\"April\",\r\n\t\t\"May\",\r\n\t\t\"June\",\r\n\t\t\"July\",\r\n\t\t\"August\",\r\n\t\t\"September\",\r\n\t\t\"October\",\r\n\t\t\"November\",\r\n\t\t\"December\",\r\n\t];\r\n\r\n\tvar aCurrentMonth = months[new Date().getMonth() + 1]; // compensate for zero indexed data\r\n\r\n\t// function which returns a crime category as graph label text\r\n\tconst getCrimeCategory = (aCrimeCategory) => {\r\n\t\tlet crimeCategory = \"\";\r\n\r\n\t\t//console.log('crime category received predictions modal: ' + aCrimeCategory);\r\n\t\tswitch (aCrimeCategory) {\r\n\t\t\tcase \"Anti-social behaviour\":\r\n\t\t\t\tcrimeCategory = \"Anti-Social Behaviour\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Burglary\":\r\n\t\t\t\tcrimeCategory = \"Burglary\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Criminal damage and arson\":\r\n\t\t\t\tcrimeCategory = \"Criminal Damage & Arson\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Drugs\":\r\n\t\t\t\tcrimeCategory = \"Drugs\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Possession of weapons\":\r\n\t\t\t\tcrimeCategory = \"Possession of Weapons\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Public order\":\r\n\t\t\t\tcrimeCategory = \"Public Order\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Robbery\":\r\n\t\t\t\tcrimeCategory = \"Robbery\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Shoplifting\":\r\n\t\t\t\tcrimeCategory = \"Shoplifting\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Theft\":\r\n\t\t\t\tcrimeCategory = \"Theft\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Vehicle crime\":\r\n\t\t\t\tcrimeCategory = \"Vehicle Crime\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Violent crime\":\r\n\t\t\t\tcrimeCategory = \"Violent Crime\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t//intentially blank\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn crimeCategory;\r\n\t};\r\n\r\n\tvar chartData = [];\r\n\r\n\t// create graph data for each crime\r\n\tif (resultsData.predictions) {\r\n\t\tfor (var crime in resultsData.predictions.totals) {\r\n\t\t\tvar crimeCategory = getCrimeCategory(crime);\r\n\t\t\tvar crimeOccurence = parseInt(\r\n\t\t\t\tresultsData.predictions.totals[crime]\r\n\t\t\t);\r\n\t\t\tvar percentageOfCrimes = parseFloat(\r\n\t\t\t\tresultsData.predictions.percentages[crime]\r\n\t\t\t);\r\n\r\n\t\t\tvar crimeData = {\r\n\t\t\t\tcrime: crimeCategory,\r\n\t\t\t\toccurrences: crimeOccurence,\r\n\t\t\t\tpercentage: percentageOfCrimes + \"%\",\r\n\t\t\t};\r\n\r\n\t\t\tchartData.push(crimeData);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tdialogClassName=\"modal-dialog modal-xl\"\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t<h2 className=\"my-3 prediction-modal-heading\">\r\n\t\t\t\t\t\t<MDBIcon\r\n\t\t\t\t\t\t\tclassName=\"probabilityModal-icon\"\r\n\t\t\t\t\t\t\ticon=\"fa fa-brain fa-lg\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tNumber of crime incidents predicted for {aCurrentMonth}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<FadeIn delay={250}>\r\n\t\t\t\t\t<ResponsiveContainer width={\"100%\"} height={500}>\r\n\t\t\t\t\t\t<BarChart\r\n\t\t\t\t\t\t\tdata={chartData}\r\n\t\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t\t\tbarCategoryGap={4}\r\n\t\t\t\t\t\t\tmargin={{ top: 0, right: 65, left: 22, bottom: 0 }}>\r\n\t\t\t\t\t\t\t<XAxis type=\"number\" hide />\r\n\t\t\t\t\t\t\t<YAxis\r\n\t\t\t\t\t\t\t\ttype=\"category\"\r\n\t\t\t\t\t\t\t\twidth={220}\r\n\t\t\t\t\t\t\t\tdataKey=\"crime\"\r\n\t\t\t\t\t\t\t\ttickMargin={10}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Bar\r\n\t\t\t\t\t\t\t\tdataKey=\"occurrences\"\r\n\t\t\t\t\t\t\t\tfill={\"blue\"}\r\n\t\t\t\t\t\t\t\tanimationDuration={2000}\r\n\t\t\t\t\t\t\t\tradius={[0, 8, 8, 0]}>\r\n\t\t\t\t\t\t\t\t<LabelList\r\n\t\t\t\t\t\t\t\t\tclassName=\"chart-labellist\"\r\n\t\t\t\t\t\t\t\t\tdataKey=\"occurrences\"\r\n\t\t\t\t\t\t\t\t\tposition=\"right\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ fill: \"black\" }}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{chartData.map((entry, index) => (\r\n\t\t\t\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\t\t\t\tkey={`cell-${index}`}\r\n\t\t\t\t\t\t\t\t\t\tfill={crimeColours[index]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Bar>\r\n\t\t\t\t\t\t</BarChart>\r\n\t\t\t\t\t</ResponsiveContainer>\r\n\t\t\t\t</FadeIn>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ShowPredictionsModal;\r\n","import React, { useContext } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { ResultsData } from \"../contexts/ResultsDataContext\";\r\nimport { populateCrimes } from \"../util/GetCrimeData\";\r\nimport FadeIn from \"react-fade-in\";\r\nimport uuid from \"react-uuid\";\r\n\r\n//style components\r\nimport { MDBIcon } from \"mdbreact\";\r\n\r\nconst CrimeWarningModal = (props) => {\r\n\tconst [resultsData, setResultsData] = useContext(ResultsData);\r\n\r\n\tconst displayCrimes = populateCrimes(resultsData.predictions);\r\n\r\n\tconst getIncidentText = (occurences) => {\r\n\t\tvar text = \"incident\";\r\n\r\n\t\tif (occurences > 1) {\r\n\t\t\ttext = \"incidents\";\r\n\t\t}\r\n\r\n\t\treturn text;\r\n\t};\r\n\t// function which returns the correct threat message for each level\r\n\tconst getThreatMessage = (aThreatLevel) => {\r\n\t\tvar message;\r\n\r\n\t\tswitch (aThreatLevel) {\r\n\t\t\tcase \"High\":\r\n\t\t\t\tmessage = \"Risk of violence\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Medium\":\r\n\t\t\t\tmessage = \"Risk to property or possessions\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"Low\":\r\n\t\t\t\tmessage = \"Risk of noise and distruption\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t//intentially blank\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn message;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tdialogClassName=\"modal-dialog modal-xl\"\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title \r\n\t\t\t\tid=\"contained-modal-title-vcenter\">\t\t\t\t\t\t\r\n\t\t\t\t\t<p className=\"my-3 prediction-modal-heading\">\r\n\t\t\t\t\t\t<MDBIcon\r\n\t\t\t\t\t\t\tclassName=\"crime-warnings-icon\"\r\n\t\t\t\t\t\t\ticon=\"fa fa-exclamation fa-lg\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tPredicted Threat Level: {resultsData.threatLevel}\r\n\t\t\t\t\t\t<span className=\"risk-title-declaration\">\r\n\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t({getThreatMessage(resultsData.threatLevel)}){\" \"}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<FadeIn delay={100}>\r\n\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t\t\t<p className=\"threat-list-titles\">\r\n\t\t\t\t\t\t\t\tMost Prolific Predicted Crimes\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t\t\t{displayCrimes.slice(0, 2).map((aCrime) => (\r\n\t\t\t\t\t\t\t<p className=\"crime-warning-top\" key={uuid()}>\r\n\t\t\t\t\t\t\t\t<strong>{aCrime.crime}: </strong>\r\n\t\t\t\t\t\t\t\t{aCrime.occurrences}{\" \"}\r\n\t\t\t\t\t\t\t\t{getIncidentText(aCrime.occurrences)}\r\n\t\t\t\t\t\t\t\t<span className=\"percentages-top-crimes\">\r\n\t\t\t\t\t\t\t\t\t({aCrime.percentage}% of crimes)\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t\t\t<p className=\"threat-list-titles\">\r\n\t\t\t\t\t\t\t\tOther Predicted Crimes\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t\t\t{displayCrimes.slice(2).map((aCrime) => (\r\n\t\t\t\t\t\t\t<p className=\"crime-warning-other\" key={uuid()}>\r\n\t\t\t\t\t\t\t\t{aCrime.crime}: {aCrime.occurrences}{\" \"}\r\n\t\t\t\t\t\t\t\t{getIncidentText(aCrime.occurrences)}\r\n\t\t\t\t\t\t\t\t<span className=\"percentages-other-crimes\">\r\n\t\t\t\t\t\t\t\t\t({aCrime.percentage}% of crimes)\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t</FadeIn>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default CrimeWarningModal;\r\n","import React from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { deleteUserFavourite } from \"../firebase\";\r\n\r\nconst RemoveFavouriteModal = (props) => {\r\n\tconst deleteFavourite = async () => {\r\n\t\tawait deleteUserFavourite(props.timestamp);\r\n\t\tprops.setFavouriteButton(\"false\");\r\n\t\tprops.onHide(); //hide modal interface\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\t\t\t\r\n\t\t\tsize=\"lg\"\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tAre you sure you want to delete this favourite?\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"green\" onClick={props.onHide}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"red\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tonClick={() => deleteFavourite(props.timestamp)}>\r\n\t\t\t\t\tDelete Favourite\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RemoveFavouriteModal;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nconst ButtonFilterCrime = (props) => {\r\n\t\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tclassName={\r\n\t\t\t\tprops.isActive ? \"btn-filter-active\" : \"btn-filter-inactive\"\r\n\t\t\t}\r\n\t\t\tid={props.id}\r\n\t\t\tonClick={() => props.changeFilterState(props.label)}>\r\n\t\t\t<img className=\"filter-icon\"\r\n\t\t\t\tsrc={props.getCrimeIcon(props.id, true).options.iconUrl}\r\n\t\t\t\talt={props.label}\r\n\t\t\t/>\r\n\t\t\t<span className=\"filter-text\">{props.label}</span>\r\n\t\t\t\r\n\t\t\t<i\r\n\t\t\t\tclassName={\r\n\t\t\t\t\tprops.isActive\r\n\t\t\t\t\t\t? \"fa fas fa-check fa-sm filter-button-icon\"\r\n\t\t\t\t\t\t: \"fa fas fa-times fa-sm filter-button-icon\"\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ButtonFilterCrime;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport ButtonFilterCrime from \"../components/ButtonFilterCrime\";\r\nimport uuid from \"react-uuid\";\r\nimport {getCrimeIcon} from \"../util/AssignMapIcons\";\r\nimport FadeIn from \"react-fade-in\";\r\n\r\n\r\n// array to hold crimes to remove from map display\r\nlet filters = [];\r\n\r\nconst FiltersModal = (props) => {\r\n\t// filter buttons\r\n\tconst [crimeButtons, setCrimeButtons] = useState([\r\n\t\t{\r\n\t\t\tlabel: \"Anti-Social Behaviour\", // button label text\r\n\t\t\tcategories: [\"anti-social-behaviour\"], // element categories[0] used as button id\r\n\t\t\tisActive: true, // boolean flag to determine whether to display this crime on map\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Burglary\",\r\n\t\t\tcategories: [\"burglary\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Criminal Damage & Arson\", \r\n\t\t\tcategories: [\"criminal-damage-arson\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Drugs\",\r\n\t\t\tcategories: [\"drugs\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Weapons\",\r\n\t\t\tcategories: [\"possession-of-weapons\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Public Order\",\r\n\t\t\tcategories: [\"public-order\", \"other-crime\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Robbery\",\r\n\t\t\tcategories: [\"robbery\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Shoplifting\",\r\n\t\t\tcategories: [\"shoplifting\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Theft\",\r\n\t\t\tcategories: [\r\n\t\t\t\t\"other-theft\",\r\n\t\t\t\t\"bicycle-theft\",\r\n\t\t\t\t\"theft-from-the-person\",\r\n\t\t\t],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Vehicle Crime\",\r\n\t\t\tcategories: [\"vehicle-crime\"],\r\n\t\t\tisActive: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Violent Crime\",\r\n\t\t\tcategories: [\"violent-crime\"],\r\n\t\t\tisActive: true,\r\n\t\t},\t\t\r\n\t]);\r\n\r\n\t// function which returns the button label for a crime category.\r\n\tconst getButtonLabel = (aCrimeCategory) => {\r\n\t\tlet label = \"\";\r\n\r\n\t\tswitch (aCrimeCategory) {\r\n\t\t\tcase \"anti-social-behaviour\":\r\n\t\t\t\tlabel = \"Anti-Social Behaviour\";\t\t\t\t\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"burglary\":\r\n\t\t\t\tlabel = \"Burglary\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"criminal-damage-arson\":\r\n\t\t\t\tlabel = \"Criminal Damage & Arson\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"drugs\":\r\n\t\t\t\tlabel = \"Drugs\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"possession-of-weapons\":\r\n\t\t\t\tlabel = \"Weapons\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"public-order\":\r\n\t\t\tcase \"other-crime\":\r\n\t\t\t\tlabel = \"Public Order\";\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"robbery\":\t\t\t\t\t\r\n\t\t\t\tlabel = \"Robbery\";\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"shoplifting\":\r\n\t\t\t\tlabel = \"Shoplifting\";\r\n\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\tcase \"theft-from-the-person\":\r\n\t\t\tcase \"bicycle-theft\":\r\n\t\t\tcase \"other-theft\":\t\t\t\r\n\t\t\t\tlabel = \"Theft\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"vehicle-crime\":\r\n\t\t\t\tlabel = \"Vehicle Crime\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"violent-crime\":\t\t\t\r\n\t\t\tcase \"violence-and-sexual-offences\":\r\n\t\t\t\tlabel = \"Violent Crime\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t//intentially blank\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn label;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (props.favouriteFilters.length > 0) {\r\n\t\t\tfor (let aFavouriteFilter of props.favouriteFilters) {\r\n\t\t\t\tvar aLabel = getButtonLabel(aFavouriteFilter);\r\n\t\t\t\tchangeFilterState(aLabel); // convert saved filters to button label\r\n\t\t\t}\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\t// function to handle user form input\r\n\tconst changeFilterState = (label) => {\r\n\t\tconst indexOfButtonToUpdate = crimeButtons.findIndex(\r\n\t\t\t(aButton) => aButton.label === label\r\n\t\t);\r\n\r\n\t\t// create copy of array\r\n\t\tconst updatedButtons = [...crimeButtons];\r\n\t\tlet newIsActiveStatus = !updatedButtons[indexOfButtonToUpdate].isActive;\r\n\t\tupdatedButtons[indexOfButtonToUpdate].isActive = newIsActiveStatus;\r\n\t\tlet categories = updatedButtons[indexOfButtonToUpdate].categories;\r\n\r\n\t\t// if button is now active, remove crime categories from filtered crimes list\r\n\t\tif (newIsActiveStatus) {\r\n\t\t\tfor (let category of updatedButtons[indexOfButtonToUpdate]\r\n\t\t\t\t.categories) {\r\n\t\t\t\tfilters = filters.filter(\r\n\t\t\t\t\t(crimeFilter) => crimeFilter !== category\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// else add crime categories to list of crimes to filter\r\n\t\t\tfor (let category of categories) {\r\n\t\t\t\tfilters.push(category);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// update set of buttons with new state\r\n\t\tsetCrimeButtons(updatedButtons);\r\n\t};\r\n\r\n\t// function to apply selected filters to map display\r\n\tconst applyFilters = async () => {\r\n\t\tprops.onHide(); //hide filter modal interface\r\n\t\tprops.updateFilteredCrimes(filters);\r\n\t};\r\n\r\n\tconst resetFilters = () => {\r\n\t\tfilters = [];\r\n\r\n\t\t//iterate over all buttons and call the change state function for each\r\n\t\tfor (let aButton of crimeButtons) {\r\n\t\t\tif (!aButton.isActive) {\r\n\t\t\t\tchangeFilterState(aButton.label);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tanimation={false}\r\n\t\t\tshow={props.show}\r\n\t\t\tonHide={props.onHide}\t\t\t\r\n\t\t\tsize=\"lg\"\r\n\t\t\tcentered>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tCrime Filters\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body className=\"filterButtonsGroup\">\r\n\t\t\t<FadeIn delay={100}>\r\n\t\t\t\t{crimeButtons.map((aButton) => (\r\n\t\t\t\t\t<ButtonFilterCrime\r\n\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\tid={aButton.categories[0]}\r\n\t\t\t\t\t\tlabel={aButton.label}\r\n\t\t\t\t\t\tcategories={aButton.categories}\r\n\t\t\t\t\t\tisActive={aButton.isActive}\r\n\t\t\t\t\t\tchangeFilterState={changeFilterState}\r\n\t\t\t\t\t\tgetCrimeIcon={getCrimeIcon}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t\t\t</FadeIn>\r\n\t\t\t</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"btn-footer\"\r\n\t\t\t\t\tvariant=\"red\"\r\n\t\t\t\t\tonClick={resetFilters}>\r\n\t\t\t\t\tReset\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"btn-footer\"\r\n\t\t\t\t\tvariant=\"green\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tonClick={() => applyFilters()}>\r\n\t\t\t\t\tApply\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default FiltersModal;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonAddToFavs = ({ setModalShow }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"left\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content>\r\n\t\t\t\t\t\t\t<h2 className=\"button-tooltip-text\">Add to favourites</h2>\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t<Button\r\n\t\t\tclassName=\"w-full py-3 btn-add-to-favourites\"\r\n\t\t\tvariant=\"success\"\r\n\t\t\ttitle=\"Add to favourites\"\r\n\t\t\tonClick={() => setModalShow(true)}>\r\n\t\t\t<i className=\"fa fa-plus fa-lg mx-4\" />\r\n\t\t</Button>\r\n\t\t</OverlayTrigger>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonAddToFavs;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonRemoveFromFavs = ({ setModalShow }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"left\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content className=\"button-tooltip-text\">\r\n\t\t\t\t\t\t\t\tDelete from favourites\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t<Button\r\n\t\t\tclassName=\"w-full py-3 btn-delete-favourite\"\r\n\t\t\tvariant=\"danger\"\t\t\r\n\t\t\tonClick={() => setModalShow(true)}>\r\n\t\t\t<i className=\"fa fa-minus fa-lg mx-4\" />\r\n\t\t</Button>\r\n\t\t</OverlayTrigger>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonRemoveFromFavs;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonShowFilters = ({ setModalShow }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"left\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content className=\"button-tooltip-text\">\r\n\t\t\t\t\t\t\t\tFilter Crimes\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t<Button\r\n\t\t\tclassName=\"btn-open-filter\"\r\n\t\t\tvariant=\"dark\"\r\n\t\t\tonClick={() => setModalShow(true)}>\r\n\t\t\t<i className=\"fa fa-filter fa-lg mx-2\" />\r\n\t\t</Button>\r\n\t\t</OverlayTrigger>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonShowFilters;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonShowPredictions = ({ setModalShow }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content className=\"button-tooltip-text\">\r\n\t\t\t\t\t\t\t\tPredict Crimes\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t<Button\r\n\t\t\tclassName=\"btn-display-predictions\"\r\n\t\t\tvariant=\"danger\"\t\t\t\r\n\t\t\tonClick={() => setModalShow(true)}>\r\n\t\t\t<i\r\n\t\t\t\tclassName=\"fa fa-brain fa-lg mx-4\"\r\n\t\t\t\ttitle=\"View Crime Predictions\"\r\n\t\t\t/>\r\n\t\t\t<span className=\"tooltip-text\">Crime Predictions</span>\r\n\t\t</Button>\r\n\t\t</OverlayTrigger>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonShowPredictions;\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { ResultsData } from \"../contexts/ResultsDataContext\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonShowWarnings = ({ setModalShow, analysisComplete }) => {\r\n\tconst [resultsData] = useContext(ResultsData);\r\n\r\n\tvar variant = \"success\";\r\n\tvar threatText = resultsData.threatLevel;\r\n\r\n\tif (resultsData.threatLevel === \"Medium\") {\r\n\t\tvariant = \"warning\";\r\n\t} else if (resultsData.threatLevel === \"High\") {\r\n\t\tvariant = \"danger\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{analysisComplete ? (\r\n\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content className=\"button-tooltip-text\">\r\n\t\t\t\t\t\t\t\tCrime Alerts\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"btn-show-warnings\"\r\n\t\t\t\t\t\tvariant={variant}\r\n\t\t\t\t\t\tonClick={() => setModalShow(true)}>\r\n\t\t\t\t\t\t<i className=\"fa fa-exclamation-triangle fa-2x mx-4\" />\r\n\t\t\t\t\t\t<span className=\"tooltip-text\">\r\n\t\t\t\t\t\t\tThreat level: {threatText}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t) : (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"btn-show-analysis\"\r\n\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\ttitle=\"Show warnings\">\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\tclassName=\"fa fa-exclamation-triangle fa-2x mx-4\"\r\n\t\t\t\t\t\ttitle=\"Warning\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<span className=\"tooltip-text\">\r\n\t\t\t\t\t\tAnalysing Threats....{' '} \r\n\t\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\tanimation=\"border\"\r\n\t\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonShowWarnings;\r\n","import React from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\n\r\nconst ButtonShowHistoricCrimes = ({ setModalShow }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t<OverlayTrigger\r\n\t\t\t\t\tplacement=\"right\"\r\n\t\t\t\t\toverlay={\r\n\t\t\t\t\t\t<Popover id={\"button-tooltip\"}>\r\n\t\t\t\t\t\t\t<Popover.Content className=\"button-tooltip-text\">\r\n\t\t\t\t\t\t\t\tDisplay Annual Crime Rates\r\n\t\t\t\t\t\t\t</Popover.Content>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}>\r\n\t\t<Button\r\n\t\t\tclassName=\"btn-display-historiccrimes\"\r\n\t\t\tvariant=\"secondary\"\r\n\t\t\ttitle=\"Show data\"\r\n\t\t\tonClick={() => setModalShow(true)}>\r\n\t\t\t<i\r\n\t\t\t\tclassName=\"fa fa-chart-line fa-lg mx-4\"\r\n\t\t\t\ttitle=\"View Historic Crime Data\"\r\n\t\t\t/>\r\n\t\t\t<span className=\"tooltip-text\">Historic Crime Data</span>\r\n\t\t</Button>\r\n\t\t</OverlayTrigger>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ButtonShowHistoricCrimes;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\n// import contexts\r\nimport { MapDetails } from \"../contexts/MapDetailsContext\";\r\nimport { Crimes } from \"../contexts/CrimeDataContext\";\r\nimport { ResultsData } from \"../contexts/ResultsDataContext\";\r\n\r\n// import utility functions\r\nimport { populateDisplayCrimes } from \"../util/FilterCrimeIcons\";\r\nimport { getMonthName } from \"../util/DateHelper\";\r\nimport {\r\n\tgetCrimeCategory,\r\n\tgetCrimeIcon,\r\n\tgetCenterPoint,\r\n} from \"../util/AssignMapIcons\";\r\nimport {\r\n\tgetPredictions,\r\n\tgetHistoricCrimes,\r\n\tgetThreatLevel,\r\n} from \"../util/GetCrimeData\";\r\n\r\nimport uuid from \"react-uuid\";\r\n\r\n// import modals\r\nimport AddFavouriteModal from \"../modals/AddFavouriteModal\";\r\nimport ShowHistoricCrimeModal from \"../modals/HistoricCrimeModal\";\r\nimport ShowPredictionsModal from \"../modals/PredictionsModal\";\r\nimport CrimeWarningModal from \"../modals/CrimeWarningModal\";\r\nimport RemoveFavouriteModal from \"../modals/RemoveFavouriteModal\";\r\nimport FiltersModal from \"../modals/FiltersModal\";\r\n\r\n// import buttons\r\nimport ButtonAddToFavs from \"../components/ButtonAddToFavs\";\r\nimport ButtonRemoveFromFavs from \"../components/ButtonRemoveFromFavs\";\r\nimport ButtonShowFilters from \"../components/ButtonShowFilters\";\r\nimport ButtonShowPredictions from \"../components/ButtonShowPredictions\";\r\nimport ButtonShowWarnings from \"../components/ButtonShowWarnings\";\r\n\r\nimport ButtonBack from \"../components/ButtonBack\";\r\nimport ButtonShowHistoricCrimes from \"../components/ButtonShowHistoricCrimes\";\r\n\r\n// import leaflet related\r\nimport { MapContainer, Marker, Popup, TileLayer } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n// import history\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst MapDisplay = () => {\r\n\tconst [map, setMap] = useState(null); // leaflet map object\r\n\tconst [showAddFavouriteModal, setShowAddFavouriteModal] = useState(false); // favourites modal\r\n\tconst [showRemoveFavouritesModal, setShowRemoveFavouritesModal] =\r\n\t\tuseState(false);\r\n\r\n\tconst [resultsData, setResultsData] = useContext(ResultsData);\r\n\tconst [showFiltersModal, setShowFiltersModal] = useState(false); // filters modal\r\n\tconst [showHistoricCrimeModal, setShowHistoricCrimeModal] = useState(false); // data chart modal\r\n\tconst [showPredictionsModal, setShowPredictionsModal] = useState(false); // data chart modal\r\n\tconst [showWarningsModal, setShowWarningsModal] = useState(false); // filters modal\r\n\tconst [mapDetails, setMapDetails] = useContext(MapDetails); // map data context\r\n\tconst [crimesToDisplay, setCrimesToDisplay] = useContext(Crimes); // crimes data context\r\n\tconst [timestamp, setTimestamp] = useState(\"\");\r\n\tconst [showWarningButton, setShowWarningButton] = useState(false);\r\n\r\n\tlet history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (history.location.state?.isfavourite === \"true\") {\r\n\t\t\t// set filters from saved favourite filters\r\n\t\t\tupdateFilteredCrimes(mapDetails.filters);\r\n\r\n\t\t\tif (history.location.state.timestamp) {\r\n\t\t\t\tsetTimestamp(history.location.state.timestamp);\r\n\t\t\t}\r\n\t\t\tsetMapFromFavourite();\r\n\t\t} else {\r\n\t\t\tsetShowWarningButton(true);\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst setFavouriteButton = async (buttonState) => {\r\n\t\thistory.location.state.isfavourite = buttonState;\r\n\t};\r\n\r\n\tconst setMapFromFavourite = async () => {\r\n\t\tconst payload = {\r\n\t\t\tlat: mapDetails.lat,\r\n\t\t\tlon: mapDetails.lon,\r\n\t\t};\r\n\t\t// populate predictions and historic data for favourite\r\n\t\tvar predictionsResponse = await getPredictions(payload);\r\n\t\tvar threatLevel = getThreatLevel(predictionsResponse.predictions);\r\n\t\tvar historicResponse = await getHistoricCrimes(payload);\r\n\r\n\t\tsetResultsData({\r\n\t\t\tpredictions: predictionsResponse.predictions,\r\n\t\t\thistoricCrimes: historicResponse.historicCrimes,\r\n\t\t\tthreatLevel: threatLevel,\r\n\t\t});\r\n\r\n\t\tsetShowWarningButton(true);\r\n\t};\r\n\r\n\t// function which updates the filtered crimes on map\r\n\tconst updateFilteredCrimes = async (filters) => {\r\n\t\tvar crimesFiltered = populateDisplayCrimes(\r\n\t\t\tmapDetails.allCrimes,\r\n\t\t\tfilters\r\n\t\t);\r\n\t\tsetCrimesToDisplay(crimesFiltered);\r\n\r\n\t\t// update mapDetails with new filters\r\n\t\tsetMapDetails((mapDetails) => ({\r\n\t\t\tallCrimes: mapDetails.allCrimes,\r\n\t\t\tlocationName: mapDetails.locationName,\r\n\t\t\tlat: mapDetails.lat,\r\n\t\t\tlon: mapDetails.lon,\r\n\t\t\tfilters: filters,\r\n\t\t}));\r\n\t};\r\n\r\n\t//default zoom level on map\r\n\tconst zoom = 17;\r\n\r\n\treturn (\r\n\t\t<div className=\"map-container\">\r\n\t\t\t<MapContainer\r\n\t\t\t\tclassName=\"markercluster-map\"\r\n\t\t\t\tcenter={[mapDetails.lat, mapDetails.lon]}\r\n\t\t\t\tzoom={zoom}\r\n\t\t\t\tmaxZoom={18}\r\n\t\t\t\tstyle={{ height: \"90vh\" }}\r\n\t\t\t\twhenCreated={() => setMap(map)}\r\n\t\t\t\tzoomControl={false}>\r\n\t\t\t\t{/* for each crime, add the correct marker to map */}\r\n\t\t\t\t{crimesToDisplay.map((crime) => (\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\tposition={[crime.latitude, crime.longitude]}\r\n\t\t\t\t\t\ticon={getCrimeIcon(crime.category, false)}>\r\n\t\t\t\t\t\t<Popup className=\"icon-popup\">\r\n\t\t\t\t\t\t\t{getCrimeCategory(crime.category)}\r\n\t\t\t\t\t\t\t{\"\\n\"}\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t{getMonthName(crime.month)}, {crime.year}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t({crime.latitude}, {crime.longitude})\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</Popup>\r\n\t\t\t\t\t</Marker>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t{/* add center point marker */}\r\n\t\t\t\t<Marker\r\n\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\tposition={[mapDetails.lat, mapDetails.lon]}\r\n\t\t\t\t\ticon={getCenterPoint()}>\r\n\t\t\t\t\t<Popup className=\"icon-popup\">\r\n\t\t\t\t\t\t{mapDetails.locationName}\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t({mapDetails.lat}, {mapDetails.lon})\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Popup>\r\n\t\t\t\t</Marker>\r\n\r\n\t\t\t\t<ButtonBack />\r\n\r\n\t\t\t\t{/* modal for crime warnings */}\r\n\t\t\t\t<ButtonShowWarnings\r\n\t\t\t\t\tsetModalShow={setShowWarningsModal}\r\n\t\t\t\t\tanalysisComplete={showWarningButton}\r\n\t\t\t\t/>\r\n\t\t\t\t<CrimeWarningModal\r\n\t\t\t\t\tanimation={false}\r\n\t\t\t\t\tshow={showWarningsModal}\r\n\t\t\t\t\tonHide={() => setShowWarningsModal(false)}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{/* filters */}\r\n\t\t\t\t<ButtonShowFilters setModalShow={setShowFiltersModal} />\r\n\t\t\t\t<FiltersModal\r\n\t\t\t\t\tanimation={false}\r\n\t\t\t\t\tshow={showFiltersModal}\r\n\t\t\t\t\tonHide={() => setShowFiltersModal(false)}\r\n\t\t\t\t\tupdateFilteredCrimes={updateFilteredCrimes}\r\n\t\t\t\t\tfavouriteFilters={mapDetails.filters}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{/* add and remove favourites */}\r\n\t\t\t\t{history.location.state?.isfavourite === \"true\" ? (\r\n\t\t\t\t\t<ButtonRemoveFromFavs\r\n\t\t\t\t\t\tsetModalShow={setShowRemoveFavouritesModal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ButtonAddToFavs setModalShow={setShowAddFavouriteModal} />\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<RemoveFavouriteModal\r\n\t\t\t\t\tanimation={false}\r\n\t\t\t\t\tshow={showRemoveFavouritesModal}\r\n\t\t\t\t\tonHide={() => setShowRemoveFavouritesModal(false)}\r\n\t\t\t\t\tmapdetails={mapDetails}\r\n\t\t\t\t\ttimestamp={timestamp}\r\n\t\t\t\t\tsetFavouriteButton={setFavouriteButton}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<AddFavouriteModal\r\n\t\t\t\t\tanimation={false}\r\n\t\t\t\t\tshow={showAddFavouriteModal}\r\n\t\t\t\t\tonHide={() => setShowAddFavouriteModal(false)}\r\n\t\t\t\t\tmapdetails={mapDetails}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{/* prediction data from flask server */}\r\n\t\t\t\t<ShowPredictionsModal\r\n\t\t\t\t\tanimation={false}\r\n\t\t\t\t\tshow={showPredictionsModal}\r\n\t\t\t\t\tonHide={() => setShowPredictionsModal(false)}\r\n\t\t\t\t/>\r\n\t\t\t\t<ButtonShowPredictions setModalShow={setShowPredictionsModal} />\r\n\r\n\t\t\t\t{/* historic data */}\r\n\t\t\t\t<ShowHistoricCrimeModal\r\n\t\t\t\t\tanimation={false}\r\n\t\t\t\t\tshow={showHistoricCrimeModal}\r\n\t\t\t\t\tonHide={() => setShowHistoricCrimeModal(false)}\r\n\t\t\t\t/>\r\n\t\t\t\t<ButtonShowHistoricCrimes\r\n\t\t\t\t\tsetModalShow={setShowHistoricCrimeModal}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n\t\t\t\t/>\r\n\t\t\t</MapContainer>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MapDisplay;\r\n","/**\r\n * function which converts a month number into the string name equivalent\r\n * @param {aMonthNumber} the number of the month\r\n * @returns {string} The name of the month\r\n */\r\n\r\nexport const getMonthName = (aMonthNumber) => {\r\n\tvar months = [\r\n\t\t\"January\",\r\n\t\t\"February\",\r\n\t\t\"March\",\r\n\t\t\"April\",\r\n\t\t\"May\",\r\n\t\t\"June\",\r\n\t\t\"July\",\r\n\t\t\"August\",\r\n\t\t\"September\",\r\n\t\t\"October\",\r\n\t\t\"November\",\r\n\t\t\"December\",\r\n\t];\r\n\r\n\treturn months[aMonthNumber];\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport Login from \"../pages/Login\";\r\nimport Register from \"../pages/Register\";\r\nimport Profile from \"../pages/Profile\";\r\nimport { UserContext } from \"../auth/UserProvider\";\r\nimport Navbar from \"../navigation/NavBar\";\r\nimport Search from \"../pages/Search\";\r\nimport Favourites from \"../pages/Favourites\";\r\nimport MapDisplay from \"../pages/MapDisplay\";\r\n\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\n\r\nconst Application = () => {\r\n\tconst user = useContext(UserContext);\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Navbar />\r\n\t\t\t{user ? (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath=\"/mapdisplay\"\r\n\t\t\t\t\t\t\trender={(props) => <MapDisplay />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath=\"/search\"\r\n\t\t\t\t\t\t\trender={(props) => <Search />}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tpath=\"/favourites\"\r\n\t\t\t\t\t\t\tcomponent={Favourites}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route exact path=\"/profile\" component={Profile} />\r\n\t\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t\t<Redirect to=\"/search\" /> : <Search />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={Login} />\r\n\r\n\t\t\t\t\t\t<Route exact path=\"/search\">\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" /> : <Login />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route exact path=\"/favourites\">\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" /> : <Login />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route exact path=\"/profile\">\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" /> : <Login />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route exact path=\"/mapdisplay\">\r\n\t\t\t\t\t\t\t<Redirect to=\"/\" /> : <Login />\r\n\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t<Route exact path=\"/register\">\r\n\t\t\t\t\t\t\t<Redirect to=\"/register\" /> : <Register />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default Application;\r\n","import React, { useState } from \"react\";\r\nimport Application from \"./components/Application\";\r\nimport UserProvider from \"./auth/UserProvider\";\r\nimport { MapDetails } from \"./contexts/MapDetailsContext\";\r\nimport { ResultsData } from \"./contexts/ResultsDataContext\";\r\nimport { Crimes } from \"./contexts/CrimeDataContext\";\r\n\r\nimport \"./App.css\";\r\nimport axios from \"axios\";\r\naxios.defaults.withCredentials = true;\r\n\r\nconst App = () => {\r\n\tconst [mapDetails, setMapDetails] = useState({});\r\n\tconst [resultsData, setResultsData] = useState({});\r\n\tconst [crimesToDisplay, setCrimesToDisplay] = useState({});\r\n\r\n\treturn (\r\n\t\t<Crimes.Provider value={[crimesToDisplay, setCrimesToDisplay]}>\r\n\t\t\t<ResultsData.Provider value={[resultsData, setResultsData]}>\r\n\t\t\t\t<MapDetails.Provider value={[mapDetails, setMapDetails]}>\r\n\t\t\t\t\t<UserProvider>\r\n\t\t\t\t\t\t<Application />\r\n\t\t\t\t\t</UserProvider>\r\n\t\t\t\t</MapDetails.Provider>\r\n\t\t\t</ResultsData.Provider>\r\n\t\t</Crimes.Provider>\r\n\t);\r\n};\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap-css-only/css/bootstrap.min.css'; \nimport 'mdbreact/dist/css/mdb.css'; \nimport App from './App.js';\nimport {BrowserRouter as Router} from 'react-router-dom';\n\nReactDOM.render (\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById ('root')\n);\n"],"sourceRoot":""}